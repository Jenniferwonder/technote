---
title: Iterator è¿­ä»£å™¨
Type: D
DateStarted: 2023-08-13
DateModified: 2023-11-28
status:
  - Young
aliases:
  - Iterator
  - è¿­ä»£å™¨
mindmap-plugin: basic
LeadTime: "2"
Page-D: "0"
Cards-D: "0"
DateDo: 2023-08-09T00:00:00.000+08:00
DateDue: ""
DateDone: 2023-08-10T00:00:00.000+08:00
EST: "-19577"
Topic:
  - Practice
---

# Iterator è¿­ä»£å™¨

## è¿­ä»£å®šä¹‰ (Iteration)

- æœ€ç®€å•çš„è¿­ä»£ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=676c2276-9bfb-d891)
  - è®¡æ•°å¾ªç¯ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=8e661f59-1eca-a0ca)
    - ![](./z-Assets/1691564604297.png) [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=42590d6d-5407-156f)
- å¾ªç¯æ˜¯è¿­ä»£æœºåˆ¶çš„åŸºç¡€ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=3afecd5b-01ad-d115)
  - å› ä¸ºå®ƒå¯ä»¥æŒ‡å®šè¿­ä»£çš„æ¬¡æ•°ï¼Œä»¥åŠæ¯æ¬¡è¿­ä»£è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=6c4e7b92-ce28-868b)
- åœ¨ä¸€ä¸ªæœ‰åºé›†åˆä¸Šè¿›è¡Œ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=22d5ab25-364a-703a)
  - æ•°ç»„ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=812f0270-ea00-ae77)
  - ES5 æ–°å¢äº† Array.prototype.forEach() [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=a046879d-b323-24c6)
    - æ²¡æœ‰åŠæ³•æ ‡è¯†è¿­ä»£ä½•æ—¶ç»ˆæ­¢ã€‚ å› æ­¤è¿™ä¸ªæ–¹æ³•åªé€‚ç”¨äºæ•°ç»„ï¼Œè€Œä¸”å›è°ƒç»“æ„ä¹Ÿæ¯”è¾ƒç¬¨æ‹™ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=cf89c9a7-9b4e-438f)

## è¿­ä»£å™¨æ¨¡å¼ (The Iterator Pattern) [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=36b02d7e-998c-beaf)

- JavaScript åœ¨ ECMAScript 6 ä»¥åä¹Ÿæ”¯æŒäº†è¿­ä»£å™¨æ¨¡å¼ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=8d752266-9015-043d)
- å¼€å‘è€…æ— é¡»äº‹å…ˆçŸ¥é“å¦‚ä½•è¿­ä»£å°±èƒ½å®ç° è¿­ä»£æ“ä½œ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=8da72929-3622-2f1e)

## å¯è¿­ä»£å¯¹è±¡/æ¥å£ï¼ˆIterableï¼‰ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9a70ba99-e1ca-79d3)

- å®ƒä»¬å®ç°äº†æ­£å¼çš„ Iterable æ¥å£ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=e340cf10-9fff-b0ec)
- å¯ä»¥é€šè¿‡è¿­ä»£å™¨ Iterator æ¶ˆè´¹ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=13840766-d943-6779)
- å¯è¿­ä»£åè®® (Iterable Protocol) [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=25be718f-0e17-3a9c)
  - è¦æ±‚åŒæ—¶å…·å¤‡ä¸¤ç§èƒ½åŠ› [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=455a1fdd-cc30-1c81)
    - æ”¯æŒè¿­ä»£çš„è‡ªæˆ‘è¯†åˆ«èƒ½åŠ› [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=277d1c8f-3d3e-4dcd)
      - å¿…é¡»æš´éœ²ä¸€ä¸ªå±æ€§ä½œä¸ºâ€œé»˜è®¤è¿­ä»£å™¨â€ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=b062c107-604d-1af0)
      - æ£€æŸ¥æ˜¯å¦å­˜åœ¨é»˜è®¤è¿­ä»£å™¨å±æ€§å¯ä»¥æš´éœ²è¿™ä¸ªå·¥å‚å‡½æ•° [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=a97de4d3-94ff-d513)
        - ![](./z-Assets/1691565228166.png) [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=665c7d9a-85b3-a0ec)
    - åˆ›å»ºå®ç° Iterator æ¥å£çš„å¯¹è±¡çš„èƒ½åŠ› [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=6b519eb0-c495-5e09)
      - é»˜è®¤è¿­ä»£å™¨å±æ€§å¿…é¡»å¼•ç”¨ä¸€ä¸ªè¿­ä»£å™¨å·¥å‚å‡½æ•° [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=97b1c89a-1ee4-77bc)
      - è¿™ä¸ªå±æ€§å¿…é¡»ä½¿ç”¨ç‰¹æ®Šçš„ `Symbol.iterator` ä½œä¸ºé”® [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=ec85170e-8c69-774a)
      - è°ƒç”¨è¿™ä¸ªå·¥å‚å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªæ–°è¿­ä»£å™¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=3bb643df-355f-3edb)
- æ¥æ”¶å¯è¿­ä»£å¯¹è±¡çš„åŸç”Ÿè¯­è¨€ç‰¹æ€§ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=52f0d65b-b0c8-e159)
  - for-of å¾ªç¯ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=debb98cd-8d15-02ce)
  - æ•°ç»„è§£æ„ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=f38dfd0b-6a23-613a)
  - æ‰©å±•æ“ä½œç¬¦ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=02239a72-4841-d206)
  - Array.from() [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=2085dcda-355e-3719)
  - åˆ›å»ºé›†åˆ Set [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=23bc8009-6a81-8456)
  - åˆ›å»ºæ˜ å°„ Map [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=de37be5f-615f-f3c5)
  - Promise.all()æ¥æ”¶ç”±æœŸçº¦ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=3b0192a2-af40-bf0e)
  - Promise.race()æ¥æ”¶ç”±æœŸçº¦ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=ca6ea732-6e21-ecd6)
  - `yield*`æ“ä½œç¬¦ï¼Œåœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=efe7fd97-2d58-ae9b)
  - è¿™äº›åŸç”Ÿè¯­è¨€ç»“æ„ä¼šåœ¨åå°è°ƒç”¨æä¾›çš„å¯è¿­ä»£å¯¹è±¡çš„è¿™ä¸ªå·¥å‚å‡½æ•°ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼š [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=a91339b4-d8b0-ee0e)

## è¿­ä»£å™¨ (Iterator)

- æ¦‚å¿µ
  - é€šç”¨çš„è¿­ä»£ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=6ad6bc48-da1e-3d0a)
  - æ¥å£ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=26de5751-9a3f-e080)
  - æ­£å¼çš„è¿­ä»£å™¨ç±»å‹ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=33ad8c93-a928-8eea)
  - æ˜¯**æŒ‰éœ€åˆ›å»ºçš„ä¸€æ¬¡æ€§å¯¹è±¡** [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=250dcc2e-1fc2-bd16)
- æ˜¾ç¤ºè¿­ä»£å™¨ä¸åŸç”Ÿè¿­ä»£å™¨çš„å®ç° - ç±»å®ç°æ˜¾ç¤ºè¿­ä»£å™¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=0f6af28d-0020-fb3a)
  <!--SR:!2023-08-16,3,250-->

          -
            ```js
            class Foo {
            [Symbol.iterator]() {
            return {
            next() {
            return { done: false, value: 'foo' };
            }
            } } }
            let f = new Foo(); // æ‰“å°å‡ºå®ç°äº†è¿­ä»£å™¨æ¥å£çš„å¯¹è±¡ console.log(f[Symbol.iterator]()); // { next: f() {} }
            ```

      - Array ç±»å‹çš„åŸç”Ÿè¿­ä»£å™¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9402fb7e-28e1-9b5c)

          -
            ```js
            let a = new Array(); // æ‰“å°å‡º ArrayIterator çš„å®ä¾‹ console.log(a[Symbol.iterator]()); // Array Iterator {}
            ```

- è¿­ä»£å™¨åè®® (Iterator Protocol) [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=8c7f95db-2f65-c1d0)
  - ç‰¹ç‚¹
    - æ¯ä¸ªè¿­ä»£å™¨éƒ½ä¼šå…³è”ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=1226db27-0dad-bc24)
    - è¿­ä»£å™¨ä¼šæš´éœ²è¿­ä»£å…¶å…³è”å¯è¿­ä»£å¯¹è±¡çš„ API [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9923649d-6241-0dc6)
    - è¿­ä»£å™¨æ— é¡»äº†è§£ä¸å…¶å…³è”çš„å¯è¿­ä»£å¯¹è±¡ (Iterable) çš„ç»“æ„ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å–å¾—è¿ç»­çš„å€¼ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=4153195f-f6b9-576c)
      - è¿™ç§æ¦‚å¿µä¸Šçš„åˆ†ç¦»æ­£æ˜¯ Iterable å’Œ Iterator çš„å¼ºå¤§ä¹‹å¤„ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=b066cc32-2434-d186)
    - æ¯ä¸ªè¿­ä»£å™¨éƒ½è¡¨ç¤º**å¯¹å¯è¿­ä»£å¯¹è±¡çš„ä¸€æ¬¡æ€§æœ‰åºéå†** [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=02b5a647-a7f3-6984)
  - next()æ–¹æ³• [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=5ebbea62-65f1-7cb7)
    - è¿”å› **è¿­ä»£å™¨å¯¹è±¡ IteratorResult** [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=fcd04e43-00b3-b8d7)
      - åŒ…å«ä¸¤ä¸ªå±æ€§ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=327212bb-bf06-ef67)
        - **done** [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=bd7744a2-be89-2158)
          - æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è¿˜å¯ä»¥å†æ¬¡è°ƒç”¨ next()å–å¾—ä¸‹ä¸€ä¸ªå€¼ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=28270ef7-ce4c-bd07)
          - done: true çŠ¶æ€ç§°ä¸ºâ€œè€—å°½â€ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=f4ab1d73-bd7f-2bdd)
        - **value** [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=aa6aff0c-82da-b7a2)
          - åŒ…å«å¯è¿­ä»£å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå€¼ï¼ˆdone ä¸º falseï¼‰ï¼Œæˆ–è€… undefinedï¼ˆdone ä¸º trueï¼‰ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=04895c3f-ee1a-70b7)
  - æ¡ˆä¾‹
    - // å¯è¿­ä»£å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=34da9bb4-24e8-db9c)
      - `let arr = ['foo', 'bar'];` [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=f98391a3-10f4-7d2b)
    - // è¿­ä»£å™¨å·¥å‚å‡½æ•° [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=c236eecb-8686-f1b4)
      - `console.log(arr[Symbol.iterator]); // f values() { [native code] }` [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=46ab24db-89f0-6414)
    - // è¿­ä»£å™¨å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=1f8c6333-200f-78ee)
      - `let iter = arr[Symbol.iterator](); console.log(iter); // ArrayIterator {}` [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=daf099e8-9754-b03d)
    - // æ‰§è¡Œè¿­ä»£ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9f23ef57-6b17-37fb)
      - `console.log(iter.next()); // { done: false, value: 'foo' } console.log(iter.next()); // { done: false, value: 'bar' } console.log(iter.next()); // { done: true, value: undefined }` [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=d3732677-98e3-be0c)
- è‡ªå®šä¹‰è¿­ä»£å™¨-Custom Iterator Definition
  - ä»»ä½•å®ç° Iterator æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºè¿­ä»£å™¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=b495a015-57fc-79d1)
- æå‰ç»ˆæ­¢è¿­ä»£å™¨-Early Termination of Iterators - å¯é€‰çš„ return()æ–¹æ³• [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=1492fe50-c3fa-149e) - ç”¨äºæŒ‡å®šåœ¨è¿­ä»£å™¨æå‰å…³é—­æ—¶æ‰§è¡Œçš„é€»è¾‘ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=f561138b-0c97-ce7f) - æ‰§è¡Œè¿­ä»£çš„ç»“æ„åœ¨æƒ³è®©è¿­ä»£å™¨çŸ¥ é“å®ƒä¸æƒ³éå†åˆ°å¯è¿­ä»£å¯¹è±¡è€—å°½æ—¶ï¼Œå°±å¯ä»¥â€œå…³é—­â€è¿­ä»£å™¨ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=529d5f6b-bf01-de58) - å¿…é¡»è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„ IteratorResult å¯¹è±¡ [ğŸ“Œ](<../obsidian://jump-to-pdf?pdf=Source%2FS-JS%2FB-JS%2FProJS%2FJavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%AC4%E7%89%88-%E4%B8%AD%E6%96%87%E9%AB%98%E6%B8%85).pdf&annotate=3d2dc853-21ac-2a0c>>) - for-of å¾ªç¯é€šè¿‡ breakã€continueã€return æˆ– throw æå‰é€€å‡º [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=c595f1f5-3392-b535) - è§£æ„æ“ä½œå¹¶æœªæ¶ˆè´¹æ‰€æœ‰å€¼ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=53f275cf-9330-d24a) - å¹¶éæ‰€æœ‰è¿­ä»£å™¨éƒ½æ˜¯å¯å…³é—­çš„ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9cd97d76-5d08-91ca) - è¦çŸ¥é“æŸä¸ªè¿­ä»£å™¨æ˜¯å¦å¯å…³é—­ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=9dbc6491-5aa5-145d) - å¯ä»¥æµ‹è¯•è¿™ä¸ªè¿­ä»£å™¨å®ä¾‹çš„ return å±æ€§æ˜¯ä¸æ˜¯å‡½æ•°å¯¹è±¡ [ğŸ“Œ](obsidian://jump-to-pdf?id=ProJS-ZN&annotate=f446f6ca-26a7-a70e)
<!--SR:!2023-08-16,3,250!2023-08-16,3,250!2023-08-16,3,250!2023-08-16,3,250-->
