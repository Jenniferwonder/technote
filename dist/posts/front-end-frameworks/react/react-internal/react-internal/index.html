<!DOCTYPE html><html class="transition bg-[var(--page-bg)] md:text-[16px] text-[14px]" data-astro-cid-sckkx6r4 lang=en pathname=/technote/posts/front-end-frameworks/react/react-internal/react-internal/ style=--configHue:250><head><title>react-internal - 瞻思笔记</title><meta charset=UTF-8><meta content="Astro description" name=description><meta content="width=device-width" name=viewport><meta content="Astro v4.5.12" name=generator><link href=/favicon/favicon-light-32.png rel=icon media="(prefers-color-scheme: light)" sizes=32x32><link href=/favicon/favicon-light-128.png rel=icon media="(prefers-color-scheme: light)" sizes=128x128><link href=/favicon/favicon-light-180.png rel=icon media="(prefers-color-scheme: light)" sizes=180x180><link href=/favicon/favicon-light-192.png rel=icon media="(prefers-color-scheme: light)" sizes=192x192><link href=/favicon/favicon-dark-32.png rel=icon media="(prefers-color-scheme: dark)" sizes=32x32><link href=/favicon/favicon-dark-128.png rel=icon media="(prefers-color-scheme: dark)" sizes=128x128><link href=/favicon/favicon-dark-180.png rel=icon media="(prefers-color-scheme: dark)" sizes=180x180><link href=/favicon/favicon-dark-192.png rel=icon media="(prefers-color-scheme: dark)" sizes=192x192><link href=https://cdn.staticfile.org/KaTeX/0.16.9/katex.min.css rel=stylesheet crossorigin=anonymous integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><link href=/technote/_astro/hoisted.BeYdinUv.css rel=stylesheet><style></style><link href=/technote/_astro/_page_.CqkcIig3.css rel=stylesheet><link href=/technote/_astro/_page_.I-qzObFy.css rel=stylesheet><link href=/technote/_astro/about.B9W--hzk.css rel=stylesheet><link href=/technote/_astro/_category_.Dq0_ZQCx.css rel=stylesheet><style>#display-setting.svelte-3akcb9 input[type=range].svelte-3akcb9{-webkit-appearance:none;height:1.5rem;background-image:var(--color-selection-bar);transition:background-image .15s ease-in-out}#display-setting.svelte-3akcb9 .svelte-3akcb9::-webkit-slider-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;background:#ffffffb3;box-shadow:none}#display-setting.svelte-3akcb9 .svelte-3akcb9::-webkit-slider-thumb:hover{background:#fffc}#display-setting.svelte-3akcb9 .svelte-3akcb9::-webkit-slider-thumb:active{background:#fff9}#display-setting.svelte-3akcb9 .svelte-3akcb9::-moz-range-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;border-width:0;background:#ffffffb3;box-shadow:none}#display-setting.svelte-3akcb9 .svelte-3akcb9::-moz-range-thumb:hover{background:#fffc}#display-setting.svelte-3akcb9 .svelte-3akcb9::-moz-range-thumb:active{background:#fff9}#display-setting.svelte-3akcb9.svelte-3akcb9::-ms-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;background:#ffffffb3;box-shadow:none}#display-setting.svelte-3akcb9.svelte-3akcb9::-ms-thumb:hover{background:#fffc}#display-setting.svelte-3akcb9.svelte-3akcb9::-ms-thumb:active{background:#fff9}</style><script src=/technote/_astro/hoisted.DeDWCSli.js type=module></script><script src=/technote/_astro/page.DBG_D7lG.js type=module></script></head><body class="transition min-h-screen" data-astro-cid-sckkx6r4 style=--configHue:250><div id=config-carrier data-hue=250></div><div><div class="w-full absolute" id=banner-wrapper style=--configHue:250 data-astro-cid-sckkx6r4><div class="relative overflow-hidden h-full hidden object-center object-cover"><div class="transition absolute pointer-events-none bg-opacity-50 dark:bg-black/10 inset-0"></div><img alt="Banner image of the blog" src=/technote/_astro/demo-banner.WD4SMgz__2oASWH.webp class="w-full h-full object-center object-cover" decoding=async height=1369 loading=lazy width=1920></div></div><div class="relative gap-4 grid grid-cols-[17.5rem_auto] grid-rows-[auto_auto_1fr_auto] lg:grid-rows-[auto_1fr_auto] max-w-[var(--page-width)] md:px-4 min-h-screen mx-auto px-0"><div class="onload-animation col-span-2 grid-rows-1 z-50" id=top-row><div class="transition absolute -top-8 bg-[var(--card-bg)] h-8 left-0 right-0"></div><div class="flex items-center justify-between card-base h-[4.5rem] max-w-[var(--page-width)] mx-auto overflow-visible px-4 rounded-t-none sticky top-0"><a href=/technote class="rounded-lg font-bold active:scale-95 btn-plain px-5 h-[3.25rem]"><div class="flex items-center flex-row text-[var(--primary)] text-md"><svg data-icon=material-symbols:home-outline-rounded height=1.75rem viewBox="0 0 24 24" width=1.75rem class="mb-1 mr-2"><symbol id=ai:material-symbols:home-outline-rounded><path d="M6 19h3v-5q0-.425.288-.712T10 13h4q.425 0 .713.288T15 14v5h3v-9l-6-4.5L6 10zm-2 0v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-4q-.425 0-.712-.288T13 20v-5h-2v5q0 .425-.288.713T10 21H6q-.825 0-1.412-.587T4 19m8-6.75" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:home-outline-rounded></use></svg> 瞻思笔记</div></a><div class="hidden md:flex"><a href=/technote/ class="rounded-lg font-bold active:scale-95 btn-plain px-5 h-11" aria-label=主页><div class="flex items-center">主页</div></a><a href=/technote/archive class="rounded-lg font-bold active:scale-95 btn-plain px-5 h-11" aria-label=归档><div class="flex items-center">归档</div></a><a href=/technote/about class="rounded-lg font-bold active:scale-95 btn-plain px-5 h-11" aria-label=关于><div class="flex items-center">关于</div></a><a href=https://github.com/jenniferwonder/technote class="rounded-lg font-bold active:scale-95 btn-plain px-5 h-11" aria-label=GitHub target=_blank><div class="flex items-center">GitHub <svg data-icon=fa6-solid:arrow-up-right-from-square height=14 viewBox="0 0 512 512" width=14 class="transition -translate-y-[1px] dark:text-white/[0.2] ml-1 text-black/[0.2]"><symbol id=ai:fa6-solid:arrow-up-right-from-square><path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32zM80 32C35.8 32 0 67.8 0 112v320c0 44.2 35.8 80 80 80h320c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v112c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16h112c17.7 0 32-14.3 32-32s-14.3-32-32-32z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-solid:arrow-up-right-from-square></use></svg></div></a></div><div class=flex><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(self.Astro||(self.Astro={})).load=async t=>{await(await t())()},window.dispatchEvent(new Event("astro:load")),(()=>{var t,e=Object.defineProperty,r=(t,r,n)=>(((t,r,n)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n})(t,"symbol"!=typeof r?r+"":r,n),n);{let e={0:t=>i(t),1:t=>s(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(s(t)),5:t=>new Set(s(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},n=t=>{let[r,n]=t;return r in e?e[r](n):void 0},s=t=>t.map(n),i=t=>"object"!=typeof t||null===t?t:Object.fromEntries(Object.entries(t).map((([t,e])=>[t,n(e)])));customElements.get("astro-island")||customElements.define("astro-island",(t=class extends HTMLElement{constructor(){super(...arguments),r(this,"Component"),r(this,"hydrator"),r(this,"hydrate",(async()=>{var t;if(!this.hydrator||!this.isConnected)return;let e=null==(t=this.parentElement)?void 0:t.closest("astro-island[ssr]");if(e)return void e.addEventListener("astro:hydrate",this.hydrate,{once:!0});let r,n=this.querySelectorAll("astro-slot"),s={},o=this.querySelectorAll("template[data-astro-template]");for(let t of o){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(s[t.getAttribute("data-astro-template")||"default"]=t.innerHTML,t.remove())}for(let t of n){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(s[t.getAttribute("name")||"default"]=t.innerHTML)}try{r=this.hasAttribute("props")?i(JSON.parse(this.getAttribute("props"))):{}}catch(t){let e=this.getAttribute("component-url")||"<unknown>",r=this.getAttribute("component-export");throw r&&(e+=` (export ${r})`),console.error(`[hydrate] Error parsing props for component ${e}`,this.getAttribute("props"),t),t}await this.hydrator(this)(this.Component,r,s,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))})),r(this,"unmount",(()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))}))}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(this.hasAttribute("await-children")&&"interactive"!==document.readyState&&"complete"!==document.readyState){let t=()=>{document.removeEventListener("DOMContentLoaded",t),e.disconnect(),this.childrenConnectedCallback()},e=new MutationObserver((()=>{var e;(null==(e=this.lastChild)?void 0:e.nodeType)===Node.COMMENT_NODE&&"astro:end"===this.lastChild.nodeValue&&(this.lastChild.remove(),t())}));e.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",t)}else this.childrenConnectedCallback()}async childrenConnectedCallback(){let t=this.getAttribute("before-hydration-url");t&&await import(t),this.start()}async start(){let t=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(void 0!==Astro[e])try{await Astro[e]((async()=>{let t=this.getAttribute("renderer-url"),[e,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),t?import(t):()=>()=>{}]),n=this.getAttribute("component-export")||"default";if(n.includes(".")){this.Component=e;for(let t of n.split("."))this.Component=this.Component[t]}else this.Component=e[n];return this.hydrator=r,this.hydrate}),t,this)}catch(t){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,t)}else window.addEventListener(`astro:${e}`,(()=>this.start()),{once:!0})}attributeChangedCallback(){this.hydrate()}},r(t,"observedAttributes",["props"]),t))}})()</script><astro-island await-children="" client=load component-export=default component-url=/technote/_astro/Search.DrRjlEGv.js opts={&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:true} props={} renderer-url=/technote/_astro/client.Cx1FBVJX.js ssr="" uid=yJxBH><div class="rounded-lg items-center bg-black/[0.04] dark:bg-white/5 dark:focus-within:bg-white/10 dark:hover:bg-white/10 focus-within:bg-black/[0.06] h-11 hidden hover:bg-black/[0.06] lg:flex mr-2 transition-all" id=search-bar><astro-slot name=search-icon><svg data-icon=material-symbols:search height=1.25rem viewBox="0 0 24 24" width=1.25rem class="transition absolute pointer-events-none dark:text-white/30 ml-3 my-auto text-black/30" slot=search-icon><symbol id=ai:material-symbols:search><path d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5q0-2.725 1.888-4.612T9.5 3q2.725 0 4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5q0-1.875-1.312-3.187T9.5 5Q7.625 5 6.313 6.313T5 9.5q0 1.875 1.313 3.188T9.5 14" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:search></use></svg></astro-slot><input class="text-sm bg-transparent dark:text-white/50 focus:w-60 outline-0 pl-10 text-black/50 active:w-60 h-full transition-all w-40" placeholder=Search value=""></div><button class="rounded-lg btn-plain h-11 active:scale-90 w-11 lg:hidden" aria-label="Search Panel" id=search-switch><astro-slot name=search-switch><svg data-icon=material-symbols:search height=1.25rem viewBox="0 0 24 24" width=1.25rem slot=search-switch><use xlink:href=#ai:material-symbols:search></use></svg></astro-slot></button><div class="absolute closed float-panel right-4 left-4 md:left-[unset] md:w-[30rem] p-2 rounded-2xl search-panel shadow-2xl top-20" id=search-panel><div class="flex items-center relative bg-black/[0.04] dark:bg-white/5 dark:focus-within:bg-white/10 dark:hover:bg-white/10 focus-within:bg-black/[0.06] h-11 hover:bg-black/[0.06] lg:hidden rounded-xl transition-all" id=search-bar-inside><astro-slot name=search-icon><svg data-icon=material-symbols:search height=1.25rem viewBox="0 0 24 24" width=1.25rem class="transition absolute pointer-events-none dark:text-white/30 ml-3 my-auto text-black/30" slot=search-icon><symbol id=ai:material-symbols:search><path d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5q0-2.725 1.888-4.612T9.5 3q2.725 0 4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5q0-1.875-1.312-3.187T9.5 5Q7.625 5 6.313 6.313T5 9.5q0 1.875 1.313 3.188T9.5 14" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:search></use></svg></astro-slot><input class="text-sm bg-transparent dark:text-white/50 focus:w-60 outline-0 pl-10 text-black/50 absolute inset-0" placeholder=Search value=""></div></div><template data-astro-template=arrow-icon><svg data-icon=fa6-solid:chevron-right height=0.75rem viewBox="0 0 320 512" width=0.75rem class="transition text-[var(--primary)] my-auto translate-x-0.5" slot=arrow-icon><symbol id=ai:fa6-solid:chevron-right><path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256L73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-solid:chevron-right></use></svg></template></astro-island><button class="rounded-lg btn-plain h-11 active:scale-90 w-11" aria-label="Display Settings" id=display-settings-switch><svg data-icon=material-symbols:palette-outline height=1.25rem viewBox="0 0 24 24" width=1.25rem><symbol id=ai:material-symbols:palette-outline><path d="M12 22q-2.05 0-3.875-.788t-3.187-2.15q-1.363-1.362-2.15-3.187T2 12q0-2.075.813-3.9t2.2-3.175Q6.4 3.575 8.25 2.788T12.2 2q2 0 3.775.688t3.113 1.9q1.337 1.212 2.125 2.875T22 11.05q0 2.875-1.75 4.413T16 17h-1.85q-.225 0-.312.125t-.088.275q0 .3.375.863t.375 1.287q0 1.25-.687 1.85T12 22m-5.5-9q.65 0 1.075-.425T8 11.5q0-.65-.425-1.075T6.5 10q-.65 0-1.075.425T5 11.5q0 .65.425 1.075T6.5 13m3-4q.65 0 1.075-.425T11 7.5q0-.65-.425-1.075T9.5 6q-.65 0-1.075.425T8 7.5q0 .65.425 1.075T9.5 9m5 0q.65 0 1.075-.425T16 7.5q0-.65-.425-1.075T14.5 6q-.65 0-1.075.425T13 7.5q0 .65.425 1.075T14.5 9m3 4q.65 0 1.075-.425T19 11.5q0-.65-.425-1.075T17.5 10q-.65 0-1.075.425T16 11.5q0 .65.425 1.075T17.5 13M12 20q.225 0 .363-.125t.137-.325q0-.35-.375-.825T11.75 17.3q0-1.05.725-1.675T14.25 15H16q1.65 0 2.825-.962T20 11.05q0-3.025-2.312-5.038T12.2 4Q8.8 4 6.4 6.325T4 12q0 3.325 2.338 5.663T12 20" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:palette-outline></use></svg></button> <button class="rounded-lg btn-plain h-11 active:scale-90 w-11" aria-label="Light/Dark Mode" id=scheme-switch><svg data-icon=material-symbols:wb-sunny-outline-rounded height=1.25rem viewBox="0 0 24 24" width=1.25rem class="absolute opacity-[var(--display-light-icon)]"><symbol id=ai:material-symbols:wb-sunny-outline-rounded><path d="M11 3V2q0-.425.288-.712T12 1q.425 0 .713.288T13 2v1q0 .425-.288.713T12 4q-.425 0-.712-.288T11 3m0 19v-1q0-.425.288-.712T12 20q.425 0 .713.288T13 21v1q0 .425-.288.713T12 23q-.425 0-.712-.288T11 22m11-9h-1q-.425 0-.712-.288T20 12q0-.425.288-.712T21 11h1q.425 0 .713.288T23 12q0 .425-.288.713T22 13M3 13H2q-.425 0-.712-.288T1 12q0-.425.288-.712T2 11h1q.425 0 .713.288T4 12q0 .425-.288.713T3 13m16.75-7.325l-.35.35q-.275.275-.687.275T18 6q-.275-.275-.288-.687t.263-.713l.375-.375q.275-.3.7-.3t.725.3q.3.3.288.725t-.313.725M6.025 19.4l-.375.375q-.275.3-.7.3t-.725-.3q-.3-.3-.288-.725t.313-.725l.35-.35q.275-.275.688-.275T6 18q.275.275.288.688t-.263.712m12.3.35l-.35-.35q-.275-.275-.275-.687T18 18q.275-.275.688-.287t.712.262l.375.375q.3.275.3.7t-.3.725q-.3.3-.725.288t-.725-.313M4.6 6.025l-.375-.375q-.3-.275-.3-.7t.3-.725q.3-.3.725-.288t.725.313l.35.35q.275.275.275.688T6 6q-.275.275-.687.288T4.6 6.025M12 18q-2.5 0-4.25-1.75T6 12q0-2.5 1.75-4.25T12 6q2.5 0 4.25 1.75T18 12q0 2.5-1.75 4.25T12 18m0-2q1.675 0 2.838-1.162T16 12q0-1.675-1.162-2.838T12 8q-1.675 0-2.838 1.163T8 12q0 1.675 1.163 2.838T12 16m0-4" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:wb-sunny-outline-rounded></use></svg> <svg data-icon=material-symbols:dark-mode-outline-rounded height=1.25rem viewBox="0 0 24 24" width=1.25rem class="absolute opacity-[var(--display-dark-icon)]"><symbol id=ai:material-symbols:dark-mode-outline-rounded><path d="M12 21q-3.775 0-6.387-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.325-.05.575.088t.4.362q.15.225.163.525t-.188.575q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.275-.175.563-.162t.512.137q.25.125.388.375t.087.6q-.35 3.45-2.937 5.725T12 21m0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19m-.25-6.75" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:dark-mode-outline-rounded></use></svg></button> <button class="rounded-lg btn-plain h-11 active:scale-90 w-11 md:hidden" aria-label=Menu id=nav-menu-switch name="Nav Menu"><svg data-icon=material-symbols:menu-rounded height=1.25rem viewBox="0 0 24 24" width=1.25rem><symbol id=ai:material-symbols:menu-rounded><path d="M4 18q-.425 0-.712-.288T3 17q0-.425.288-.712T4 16h16q.425 0 .713.288T21 17q0 .425-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12q0-.425.288-.712T4 11h16q.425 0 .713.288T21 12q0 .425-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7q0-.425.288-.712T4 6h16q.425 0 .713.288T21 7q0 .425-.288.713T20 8z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:menu-rounded></use></svg></button></div><div class="absolute closed float-panel right-4 fixed px-2 py-2 transition-all" id=nav-menu-panel><a href=/technote/ class="transition flex items-center rounded-lg active:bg-[var(--btn-plain-bg-active)] gap-8 group hover:bg-[var(--btn-plain-bg-hover)] justify-between pl-3 pr-1 py-2"><div class="transition font-bold dark:text-white/75 text-black/75 group-active:text-[var(--primary)] group-hover:text-[var(--primary)]">主页</div><svg data-icon=material-symbols:chevron-right-rounded height=20 viewBox="0 0 24 24" width=20 class="transition text-[var(--primary)]"><use xlink:href=#ai:material-symbols:chevron-right-rounded></use></svg> </a><a href=/technote/archive class="transition flex items-center rounded-lg active:bg-[var(--btn-plain-bg-active)] gap-8 group hover:bg-[var(--btn-plain-bg-hover)] justify-between pl-3 pr-1 py-2"><div class="transition font-bold dark:text-white/75 text-black/75 group-active:text-[var(--primary)] group-hover:text-[var(--primary)]">归档</div><svg data-icon=material-symbols:chevron-right-rounded height=20 viewBox="0 0 24 24" width=20 class="transition text-[var(--primary)]"><use xlink:href=#ai:material-symbols:chevron-right-rounded></use></svg> </a><a href=/technote/about class="transition flex items-center rounded-lg active:bg-[var(--btn-plain-bg-active)] gap-8 group hover:bg-[var(--btn-plain-bg-hover)] justify-between pl-3 pr-1 py-2"><div class="transition font-bold dark:text-white/75 text-black/75 group-active:text-[var(--primary)] group-hover:text-[var(--primary)]">关于</div><svg data-icon=material-symbols:chevron-right-rounded height=20 viewBox="0 0 24 24" width=20 class="transition text-[var(--primary)]"><use xlink:href=#ai:material-symbols:chevron-right-rounded></use></svg> </a><a href=https://github.com/jenniferwonder/technote class="transition flex items-center rounded-lg active:bg-[var(--btn-plain-bg-active)] gap-8 group hover:bg-[var(--btn-plain-bg-hover)] justify-between pl-3 pr-1 py-2" target=_blank><div class="transition font-bold dark:text-white/75 text-black/75 group-active:text-[var(--primary)] group-hover:text-[var(--primary)]">GitHub</div><svg data-icon=fa6-solid:arrow-up-right-from-square height=12 viewBox="0 0 512 512" width=12 class="transition -translate-x-1 dark:text-white/25 text-black/25"><use xlink:href=#ai:fa6-solid:arrow-up-right-from-square></use></svg></a></div><script>(self.Astro||(self.Astro={})).only=async t=>{await(await t())()},window.dispatchEvent(new Event("astro:only"))</script><astro-island await-children="" client=only component-export=default component-url=/technote/_astro/DisplaySettings.DjSFb1F5.js opts={&quot;name&quot;:&quot;DisplaySettings&quot;,&quot;value&quot;:&quot;svelte&quot;} props={} renderer-url=/technote/_astro/client.Cx1FBVJX.js ssr="" uid=57NuU><template data-astro-template=restore-icon><svg data-icon=fa6-solid:arrow-rotate-left height=0.875rem viewBox="0 0 512 512" width=0.875rem class="" slot=restore-icon><symbol id=ai:fa6-solid:arrow-rotate-left><path d="M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2l17.6-17.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-solid:arrow-rotate-left></use></svg></template></astro-island></div><script>async function loadPagefind(){const a=await import("/pagefind/pagefind.js");await a.options({excerptLength:20}),a.init(),window.pagefind=a,a.search("")}loadPagefind()</script></div><div class="w-full col-span-2 lg:col-span-1 lg:max-w-[17.5rem] lg:row-end-3 lg:row-start-2 onload-animation row-end-4 row-start-3" id=sidebar><div class="flex w-full gap-4 flex-col mb-4"><div class=card-base><a href=/technote/about class="relative overflow-hidden mx-auto active:scale-95 block group lg:max-w-none lg:mt-3 lg:mx-3 max-w-[240px] mb-3 mt-4 rounded-xl" aria-label="Go to About Page"><div class="transition flex items-center justify-center absolute group-active:bg-black/50 group-hover:bg-black/30 h-full pointer-events-none w-full z-50"><svg data-icon=fa6-regular:address-card height=1em viewBox="0 0 576 512" width=1.13em class="transition group-hover:opacity-100 opacity-0 text-5xl text-white"><symbol id=ai:fa6-regular:address-card><path d="M512 80c8.8 0 16 7.2 16 16v320c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm144 224a64 64 0 1 0 0-128a64 64 0 1 0 0 128m-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80zm200-144c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-regular:address-card></use></svg></div><div class="relative overflow-hidden h-full lg:mt-0 lg:w-full mx-auto"><div class="transition absolute pointer-events-none bg-opacity-50 dark:bg-black/10 inset-0"></div><img alt="Profile Image of the Author" src=/technote/_astro/avatar-wide.CJl7PnJA_SRepV.webp class="w-full h-full object-center object-cover" decoding=async height=1024 loading=lazy width=1024></div></a><div class="transition font-bold dark:text-neutral-50 mb-1 text-center text-xl">瞻妮芙</div><div class="transition mb-2 bg-[var(--primary)] h-1 mx-auto rounded-full w-5"></div><div class="transition text-center mb-2.5 text-neutral-400">英语专业，前端开发，进阶打怪</div><div class="flex justify-center gap-2 mb-4 mx-2"><a href=https://github.com/jenniferwonder class="rounded-lg btn-regular active:scale-90 h-10 w-10" aria-label=GitHub target=_blank><svg data-icon=fa6-brands:github height=1.5rem viewBox="0 0 496 512" width=1.5rem><symbol id=ai:fa6-brands:github><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9c1.6 2.3 4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2" fill=currentColor /></symbol><use xlink:href=#ai:fa6-brands:github></use></svg> </a><a href=https://twitter.com/jennifer_coding class="rounded-lg btn-regular active:scale-90 h-10 w-10" aria-label=Twitter target=_blank><svg data-icon=fa6-brands:x-twitter height=1.5rem viewBox="0 0 512 512" width=1.5rem><symbol id=ai:fa6-brands:x-twitter><path d="M389.2 48h70.6L305.6 224.2L487 464H345L233.7 318.6L106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-brands:x-twitter></use></svg> </a><a href=https://dev.to/jenniferwonder class="rounded-lg btn-regular active:scale-90 h-10 w-10" aria-label=Dev target=_blank><svg data-icon=fa6-brands:dev height=1.5rem viewBox="0 0 448 512" width=1.5rem><symbol id=ai:fa6-brands:dev><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35c3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06M404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8M154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72l29.57-113.72h32.58z" fill=currentColor /></symbol><use xlink:href=#ai:fa6-brands:dev></use></svg></a></div></div></div><div class="flex w-full gap-4 flex-col top-4 top-4 sticky"><widget-layout class="onload-animation card-base pb-4" data-astro-cid-ucso7hve data-id=categories style=animation-delay:0s;--collapsedHeight:7.5rem><div class="transition font-bold before:absolute before:bg-[var(--primary)] before:rounded-md before:h-4 before:left-[-16px] before:top-[5.5px] before:w-1 dark:text-neutral-100 mb-2 ml-8 mt-4 relative text-lg text-neutral-900" style=--collapsedHeight:7.5rem data-astro-cid-ucso7hve>分类</div><div class="collapse-wrapper overflow-hidden px-4" id=categories style=--collapsedHeight:7.5rem data-astro-cid-ucso7hve><a href=/technote/archive/category/Programming><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Programming</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">107</div></div></button> </a><a href="/technote/archive/category/Web Design"><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Web Design</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">65</div></div></button> </a><a href="/technote/archive/category/Front-End Frameworks"><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Front-End Frameworks</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">36</div></div></button> </a><a href=/technote/archive/category/Network><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Network</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">13</div></div></button> </a><a href="/technote/archive/category/Front-End Tooling"><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Front-End Tooling</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">7</div></div></button> </a><a href=/technote/archive/category/Examples><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Examples</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">4</div></div></button> </a><a href=/technote/archive/category/Deployment><button class="rounded-lg active:bg-[var(--btn-plain-bg-active)] hover:bg-[var(--btn-plain-bg-hover)] bg-none dark:hover:text-[var(--primary)] dark:text-neutral-300 h-10 hover:pl-3 hover:text-[var(--primary)] pl-2 text-neutral-700 transition-all w-full"><div class="flex items-center justify-between mr-2 relative"><div class="text-left overflow-ellipsis overflow-hidden whitespace-nowrap">Deployment</div><div class="transition text-sm bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)] dark:text-[var(--deep-text)] flex font-bold h-7 items-center justify-center min-w-[2rem] ml-4 rounded-lg text-[var(--btn-content)]">4</div></div></button></a></div></widget-layout><widget-layout class="onload-animation card-base pb-4" data-astro-cid-ucso7hve data-id=tags style=animation-delay:0s;--collapsedHeight:7.5rem><div class="transition font-bold before:absolute before:bg-[var(--primary)] before:rounded-md before:h-4 before:left-[-16px] before:top-[5.5px] before:w-1 dark:text-neutral-100 mb-2 ml-8 mt-4 relative text-lg text-neutral-900" style=--collapsedHeight:7.5rem data-astro-cid-ucso7hve>标签</div><div class="collapse-wrapper overflow-hidden px-4" id=tags style=--collapsedHeight:7.5rem data-astro-cid-ucso7hve><div class="flex flex-wrap gap-2"><a href=/technote/archive/tag/JavaScript class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the JavaScript tag">JavaScript </a><a href=/technote/archive/tag/CSS class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the CSS tag">CSS </a><a href=/technote/archive/tag/React class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the React tag">React </a><a href=/technote/archive/tag/Design class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Design tag">Design </a><a href=/technote/archive/tag/Algo class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Algo tag">Algo </a><a href=/technote/archive/tag/Network class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Network tag">Network </a><a href=/technote/archive/tag/Testing class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Testing tag">Testing </a><a href=/technote/archive/tag/Storybook class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Storybook tag">Storybook </a><a href=/technote/archive/tag/Deployment class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Deployment tag">Deployment </a><a href=/technote/archive/tag/DevPractice class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the DevPractice tag">DevPractice </a><a href=/technote/archive/tag/HTTP class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the HTTP tag">HTTP </a><a href=/technote/archive/tag/Example class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Example tag">Example </a><a href=/technote/archive/tag/Video class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Video tag">Video </a><a href=/technote/archive/tag/Astro class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Astro tag">Astro </a><a href=/technote/archive/tag/NextJS class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the NextJS tag">NextJS </a><a href=/technote/archive/tag/TCP-IP class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the TCP-IP tag">TCP-IP </a><a href=/technote/archive/tag/Security class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Security tag">Security </a><a href=/technote/archive/tag/Markdown class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Markdown tag">Markdown </a><a href=/technote/archive/tag/Blogging class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Blogging tag">Blogging </a><a href=/technote/archive/tag/Demo class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Demo tag">Demo </a><a href=/technote/archive/tag/Test class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Test tag">Test </a><a href=/technote/archive/tag/TypeScript class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the TypeScript tag">TypeScript </a><a href=/technote/archive/tag/SASS class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the SASS tag">SASS </a><a href=/technote/archive/tag/Content-Making class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Content-Making tag">Content-Making </a><a href=/technote/archive/tag/Server class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the Server tag">Server </a><a href=/technote/archive/tag/HTTPS class="text-sm rounded-lg btn-regular h-8 px-3" aria-label="View all posts with the HTTPS tag">HTTPS</a></div></div></widget-layout></div></div><main class="row-end-3 col-span-2 lg:col-span-1 overflow-hidden row-start-2 transition-fade" id=swup><div class=overflow-hidden id=content-wrapper><div><div class="flex w-full mb-4 overflow-hidden relative rounded-[var(--radius-large)]"><div class="w-full relative card-base md:px-9 pb-4 pt-6 px-6 z-10" id=post-container><div class="transition flex dark:text-white/30 flex-row gap-5 mb-3 onload-animation text-black/30"><div class="flex items-center flex-row"><div class="transition flex items-center justify-center bg-black/5 dark:bg-white/10 dark:text-white/50 h-6 mr-2 rounded-md text-black/50 w-6"><svg data-icon=material-symbols:notes-rounded height=1em viewBox="0 0 24 24" width=1em><symbol id=ai:material-symbols:notes-rounded><path d="M4 18q-.425 0-.712-.288T3 17q0-.425.288-.712T4 16h10q.425 0 .713.288T15 17q0 .425-.288.713T14 18zm0-5q-.425 0-.712-.288T3 12q0-.425.288-.712T4 11h16q.425 0 .713.288T21 12q0 .425-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7q0-.425.288-.712T4 6h16q.425 0 .713.288T21 7q0 .425-.288.713T20 8z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:notes-rounded></use></svg></div><div class=text-sm>4366 字</div></div><div class="flex items-center flex-row"><div class="transition flex items-center justify-center bg-black/5 dark:bg-white/10 dark:text-white/50 h-6 mr-2 rounded-md text-black/50 w-6"><svg data-icon=material-symbols:schedule-outline-rounded height=1em viewBox="0 0 24 24" width=1em><symbol id=ai:material-symbols:schedule-outline-rounded><path d="M13 11.6V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v3.975q0 .2.075.388t.225.337l3.3 3.3q.275.275.7.275T16 16q.275-.275.275-.7T16 14.6zM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.325 0 5.663-2.337T20 12q0-3.325-2.337-5.663T12 4Q8.675 4 6.337 6.338T4 12q0 3.325 2.338 5.663T12 20" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:schedule-outline-rounded></use></svg></div><div class=text-sm>22 分钟</div></div></div><div class="relative onload-animation"><div class="transition font-bold before:absolute before:bg-[var(--primary)] before:rounded-md before:h-5 before:left-[-1.125rem] before:top-[0.75rem] block dark:text-white/90 mb-3 md:before:w-1 md:text-[2.5rem]/[2.75rem] text-3xl text-black/90 w-full" data-pagefind-body data-pagefind-meta=title data-pagefind-weight=10>react-internal</div></div><div class=onload-animation><div class="flex items-center gap-4 dark:text-neutral-400 flex-wrap gap-x-4 gap-y-2 mb-5 text-neutral-500" data-astro-cid-qtyrxm4s><div class="flex items-center" data-astro-cid-qtyrxm4s><div class=meta-icon data-astro-cid-qtyrxm4s><svg data-icon=material-symbols:calendar-today-outline-rounded height=1em viewBox="0 0 24 24" width=1em class=text-xl data-astro-cid-qtyrxm4s><symbol id=ai:material-symbols:calendar-today-outline-rounded><path d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2q.425 0 .713.288T8 3v1h8V3q0-.425.288-.712T17 2q.425 0 .713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:calendar-today-outline-rounded></use></svg></div><span class="text-sm text-50 font-medium" data-astro-cid-qtyrxm4s>2024-05-24</span></div><div class="flex items-center" data-astro-cid-qtyrxm4s><div class=meta-icon data-astro-cid-qtyrxm4s><svg data-icon=material-symbols:menu-book-outline-rounded height=1em viewBox="0 0 24 24" width=1em class=text-xl data-astro-cid-qtyrxm4s><symbol id=ai:material-symbols:menu-book-outline-rounded><path d="M6.5 16q1.175 0 2.288.263T11 17.05V7.2q-1.025-.6-2.175-.9T6.5 6q-.9 0-1.788.175T3 6.7v9.9q.875-.3 1.738-.45T6.5 16m6.5 1.05q1.1-.525 2.213-.787T17.5 16q.9 0 1.763.15T21 16.6V6.7q-.825-.35-1.713-.525T17.5 6q-1.175 0-2.325.3T13 7.2zm-1 2.425q-.35 0-.663-.087t-.587-.238q-.975-.575-2.05-.862T6.5 18q-1.05 0-2.062.275T2.5 19.05q-.525.275-1.012-.025T1 18.15V6.1q0-.275.138-.525T1.55 5.2q1.15-.6 2.4-.9T6.5 4q1.45 0 2.838.375T12 5.5q1.275-.75 2.663-1.125T17.5 4q1.3 0 2.55.3t2.4.9q.275.125.413.375T23 6.1v12.05q0 .575-.487.875t-1.013.025q-.925-.5-1.937-.775T17.5 18q-1.125 0-2.2.288t-2.05.862q-.275.15-.587.238t-.663.087m2-10.7q0-.225.163-.462T14.525 8q.725-.25 1.45-.375T17.5 7.5q.5 0 .988.063t.962.162q.225.05.388.25t.162.45q0 .425-.275.625t-.7.1q-.35-.075-.737-.112T17.5 9q-.65 0-1.275.125t-1.2.325q-.45.175-.737-.025T14 8.775m0 5.5q0-.225.163-.462t.362-.313q.725-.25 1.45-.375T17.5 13q.5 0 .988.063t.962.162q.225.05.388.25t.162.45q0 .425-.275.625t-.7.1q-.35-.075-.737-.112T17.5 14.5q-.65 0-1.275.113t-1.2.312q-.45.175-.737-.012T14 14.275m0-2.75q0-.225.163-.462t.362-.313q.725-.25 1.45-.375t1.525-.125q.5 0 .988.063t.962.162q.225.05.388.25t.162.45q0 .425-.275.625t-.7.1q-.35-.075-.737-.112t-.788-.038q-.65 0-1.275.125t-1.2.325q-.45.175-.737-.025t-.288-.65" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:menu-book-outline-rounded></use></svg></div><div class="flex flex-row flex-nowrap" data-astro-cid-qtyrxm4s><div data-astro-cid-qtyrxm4s><a href="/technote/archive/category/Front-End Frameworks" class="text-sm text-50 font-medium dark:hover:text-[var(--primary)] hover:text-[var(--primary)] link-lg whitespace-nowrap" aria-label="View all posts in the Front-End Frameworks category" data-astro-cid-qtyrxm4s>Front-End Frameworks</a></div></div></div><div class="flex items-center" data-astro-cid-qtyrxm4s><div class=meta-icon data-astro-cid-qtyrxm4s><svg data-icon=material-symbols:tag-rounded height=1em viewBox="0 0 24 24" width=1em class=text-xl data-astro-cid-qtyrxm4s><symbol id=ai:material-symbols:tag-rounded><path d="m9 16l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T6.3 18.8L7 16H4.275q-.5 0-.8-.387T3.3 14.75q.075-.35.35-.55t.625-.2H7.5l1-4H5.775q-.5 0-.8-.387T4.8 8.75q.075-.35.35-.55t.625-.2H9l.825-3.275Q9.9 4.4 10.15 4.2t.6-.2q.475 0 .775.375t.175.825L11 8h4l.825-3.275q.075-.325.325-.525t.6-.2q.475 0 .775.375t.175.825L17 8h2.725q.5 0 .8.387t.175.863q-.075.35-.35.55t-.625.2H16.5l-1 4h2.725q.5 0 .8.388t.175.862q-.075.35-.35.55t-.625.2H15l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T12.3 18.8L13 16zm.5-2h4l1-4h-4z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:tag-rounded></use></svg></div><div class="flex flex-row flex-nowrap" data-astro-cid-qtyrxm4s><div class=with-divider data-astro-cid-qtyrxm4s><a href=/technote/archive/tag/React class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap" aria-label="View all posts with the React tag" data-astro-cid-qtyrxm4s>React</a></div></div></div></div><div class="mb-5 border-[var(--line-divider)] border-b-[1px] border-dashed"></div></div><div class="onload-animation mb-6 custom-md dark:prose-invert markdown-content max-w-none prose prose-base" data-pagefind-body><h1 id=react-internal>React Internal<a href=#react-internal class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h1><p><a href=https://juejin.cn/post/7329780589061095434>juejin.cn/post/7329780589061095434</a></p><h2 id=reverse-engineering>Reverse Engineering<a href=#reverse-engineering class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h2><p><a href=https://angularindepth.com/posts/1005/level-up-your-reverse-engineering-skills>in Depth-level-up-your-reverse-engineering-skills</a><br><a href=https://angularindepth.com/posts/1006/practical-application-of-reverse-engineering-guidelines-and-principles>in Depth-practical-application-of-reverse-engineering-guidelines-and-principles</a></p><h2 id=fiber>Fiber<a href=#fiber class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h2><p><a href="https://www.youtube.com/watch?v=ZCuYPiUIONs">Lin Clark - A Cartoon Intro to Fiber - React Conf 2017 - YouTube</a> <a href="https://github.com/acdlite/react-fiber-architecture?source=post_page---------------------------">GitHub - acdlite/react-fiber-architecture: A description of React’s new core algorithm, React Fiber</a> (Notes by Andrew Clark)</p><h3 id=what-is-fiber>What is Fiber<a href=#what-is-fiber class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h3><p>Fiber 实际上是对 React 虚拟 DOM 的每个节点的重新实现。每个 Fiber 节点代表一个工作单元，它对应一个 React 元素、组件实例或 DOM 节点。这个新的结构是个单链表的形式，允许 React 在执行中逐节点遍历和操作。 每个 Fiber 节点都有自己的内部状态和对其他 Fiber 节点的引用（例如，对子节点、父节点、兄弟节点的引用），以及对实际 DOM 节点的引用（如果有的话）。React 可以独立地更新这些 Fiber 节点，这是 Fiber 架构的核心优势，它允许<strong>任务分割和中断</strong>工作。为未来的 React 特性和优化提供了基础，包括<strong>异步渲染和并发模式（Concurrent Mode）</strong>，这些都是 React 应用未来性能提升的关键方面。</p><h4 id=why-this-name-fiber>Why this name “Fiber”<a href=#why-this-name-fiber class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>A fiber represents a <strong>unit of work</strong>  Fiber is reimplementation of the stack, specialized for React components.  You can think of a single fiber as a <strong>virtual stack frame</strong> In order to use new Browser APIs (<a href=react-internal%201.md#%5Eu64q5e>Time-Slicing</a>) for scheduling update:</p><ul><li>need a way to break rendering work into incremental units. If you rely only on the call stack, it will keep doing work until the stack is empty So that we can</li><li>customize the behavior of the <strong>call stack</strong> to optimize for rendering UIs</li><li>interrupt the call stack at will and manipulate stack frames manually</li><li>can <a href=https://www.facebook.com/groups/2003630259862046/permalink/2054053404819731/ >keep stack frames in memory</a> and execute them however (and <em>whenever</em>) you want</li><li>potential for features such as concurrency and error boundaries</li></ul><h4 id=reconciliation>Reconciliation<a href=#reconciliation class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>一种新的调和算法 (Reconciliation algorithm), reimplementation of React’s core algorithm the algorithm React uses to <strong>diff</strong> one tree with another to determine which parts need to be changed the culmination of over two years of research by the React team</p><h4 id=data-structure-list--tree>Data Structure (List &#x26; Tree)<a href=#data-structure-list--tree class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>a plain JS object that</p><ul><li>contains information about a component, its input, and its output</li><li>corresponds to a stack frame, but it also corresponds to an instance of a component</li><li>has an 1-to-1 relationship with a component instance (to manage work for an instance)</li></ul><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>const</span><span style=color:#79b8ff> fiber</span><span style=color:#f97583> =</span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#e1e4e8>  stateNode </span><span style=color:#6a737d>// To manage its instance</span></span>
<span class=line><span style=color:#e1e4e8>  child</span></span>
<span class=line><span style=color:#e1e4e8>  return</span></span>
<span class=line><span style=color:#e1e4e8>  sibling</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span></code></pre><p><img alt=image.png|275 src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/202406151445079.png></p><h5 id=important-fields-of-a-fiber>Important fields of a fiber<a href=#important-fields-of-a-fiber class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><table><thead><tr><th>Fields</th><th>For</th></tr></thead><tbody><tr><td><code>type</code> &#x26; <code>key</code></td><td>The type and key of a fiber serve the same purpose as they do for React elements. (In fact, when a fiber is created from an element, these two fields are copied over directly.)<br>The <code>type</code> describes the component that it corresponds to;<br>It’s the function (as in <code>v = f(d)</code>) whose execution is being tracked by the stack frame<br>The <code>key</code> is used during reconciliation to determine whether the fiber can be reused</td></tr><tr><td><code>child</code> and <code>sibling</code></td><td>point to other fibers, describing the <strong>recursive tree structure</strong> of a fiber<br>The child fibers form a singly-linked list (单向链表) whose head is the first child</td></tr><tr><td><code>return</code></td><td>The return fiber is the fiber to which the program should return after processing the current one. It is conceptually the same as the return address of a stack frame. It can also be thought of as the parent fiber.<br>If a fiber has multiple child fibers, each child fiber’s return fiber is the parent.</td></tr><tr><td><code>pendingProps</code> and <code>memoizedProps</code></td><td><code>pendingProps</code> are set at the beginning of the function execution, and <code>memoizedProps</code> are set at the end.<br>When the incoming <code>pendingProps</code> are equal to <code>memoizedProps</code>, it signals that the fiber’s previous output can be reused, preventing unnecessary work</td></tr><tr><td><code>pendingWorkPriority</code> (New: FiberNode Implementations does not have any “priorities”. instead it has “Lanes”)</td><td>A number indicating the priority of the work represented by the fiber;<br>With the exception of <code>NoWork</code>, which is 0, a larger number indicates a lower priority.<br>The scheduler uses the priority field to search for the next unit of work to perform<br><code>js&#x3C;br> /**&#x3C;br> * Each filer knows&#x3C;br> * 1. priorities for the work of itself - lanes&#x3C;br> * 2. priorities for the work of its descendant - childLanes&#x3C;br> */&#x3C;br> this.lanes = NoLanes;&#x3C;br> this.childLanes = NoLanes;&#x3C;br></code><br></td></tr><tr><td><code>alternate</code></td><td>a component instance has at most two fibers that correspond to it: the current, flushed fiber, and the work-in-progress fiber;<br>The alternate of the current fiber is the work-in-progress, and the alternate of the work-in-progress is the current fiber.<br>A fiber’s alternate is created lazily using a function called <code>cloneFiber</code>. Rather than always creating a new object, <code>cloneFiber</code> will attempt to reuse the fiber’s alternate if it exists, minimizing allocations (Double buffering/ 改变指针指向)</td></tr><tr><td><code>output</code></td><td>the output of a fiber is the return value of a function<br>Every fiber eventually has output, but output is created only at the leaf nodes by <strong>host components</strong> (The leaf nodes of a React application. They are specific to the rendering environment (e.g., in a browser app, they are <code>div</code>, <code>span</code>, etc.)). The output is then transferred up the tree<br>The output is what is eventually given to the renderer so that it can flush the changes to the rendering environment. It’s the renderer’s responsibility to define how the output is created and updated</td></tr></tbody></table><p>The child fiber corresponds to the value returned by a component’s <code>render</code> method. So in the following example</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>function</span><span style=color:#b392f0> Parent</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#f97583>  return</span><span style=color:#e1e4e8> &#x3C;</span><span style=color:#79b8ff>Child</span><span style=color:#e1e4e8> />;</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span></code></pre><p>The child fiber of <code>Parent</code> corresponds to <code>Child</code>. The sibling field accounts for the case where <code>render</code> returns multiple children (a new feature in Fiber!):</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>function</span><span style=color:#b392f0> Parent</span><span style=color:#e1e4e8>() {</span></span>
<span class=line><span style=color:#f97583>  return</span><span style=color:#e1e4e8> [&#x3C;</span><span style=color:#79b8ff>Child1</span><span style=color:#e1e4e8> />, &#x3C;</span><span style=color:#79b8ff>Child2</span><span style=color:#e1e4e8> />];</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span>
<span class=line></span></code></pre><h3 id=background>Background<a href=#background class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h3><p><a href=https://www.zhihu.com/question/31809713/answer/53544875>zhihu.com/question/31809713/answer/53544875</a></p><h4 id=杀手级特性-killer-feature>杀手级特性 (killer feature)<a href=#杀手级特性-killer-feature class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><ul><li><strong>Declarative:</strong> React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable, simpler to understand, and easier to debug. (make UI coding easier (declarative instead of imperative))</li><li><strong>Component-Based:</strong> Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep the state out of the DOM.</li><li><strong>Learn Once, Write Anywhere:</strong> We don’t make assumptions about the rest of your technology stack, so you can develop new features in React without rewriting existing code. React can also render on the server using <a href=https://nodejs.org/en>Node</a> and power mobile apps using <a href=https://reactnative.dev/ >React Native</a>.</li><li>The central idea of React’s API is to think of updates as if they cause the entire app to re-render.</li></ul><h4 id=re-render>Re-render<a href=#re-render class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>A change in the data used to render a React app. Usually the result of <code>setState</code>. Eventually results in a re-render.</p><h4 id=diff>Diff<a href=#diff class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p><img alt=image.png src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/react-diff.png></p><h4 id=reconciliation--virtual-dom-虚拟-dom>Reconciliation / Virtual DOM (虚拟 DOM)<a href=#reconciliation--virtual-dom-虚拟-dom class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><blockquote><p>Virtual DOM 是 React 的一个非常核心的技术细节，它也是前端渲染和性能的关键技术。所以，你有必要要好好学习一下这个技术的实现原理和算法。当然，前提条件是你需要学习过前面我所推荐过的浏览器的工作原理。下面是一些不错的文章可以帮你学习这一技术。 虚拟 DOM（Virtual DOM）是一种 <strong>在内存中表示真实 DOM 的数据结构</strong>。它允许我们在内存中对 DOM 进行操作，而不是直接操作真实的 DOM。</p></blockquote><ul><li>Optimization for re-rendering</li><li>When the app is updated (usually via <code>setState</code>), a new tree is generated.</li><li>The new tree is diffed with the previous tree to compute which operations are needed to update the rendered app. ^a7iagv<ul><li>Different component types are assumed to generate substantially different trees. React will not attempt to diff them, but rather replace the old tree completely.</li><li>Diffing of lists is performed using keys. Keys should be “stable, predictable, and unique.”</li></ul></li></ul><h5 id=supports-dom-and-ios-android-via-react-native>Supports DOM, and iOS, Android via React Native<a href=#supports-dom-and-ios-android-via-react-native class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><table><thead><tr><th>Reconciler</th><th>Renderer</th></tr></thead><tbody><tr><td>only 1 reconciliation algorithm when download react (-> Rewritten to <strong>Fiber reconciliation algorithm</strong>)</td><td>pluggable (can work with other host platform besides DOM)</td></tr><tr><td>does the work of computing which parts of a tree have changed</td><td>uses that information to actually update the rendered app</td></tr><tr><td></td><td>React DOM and React Native can use their own renderers while sharing the same reconciler, provided by React core</td></tr></tbody></table><h5 id=你知道-virtual-dom-的工作原理吗><a href=https://github.com/haizlin/fe-interview/issues/655>你知道 Virtual DOM 的工作原理吗？</a><a href=#你知道-virtual-dom-的工作原理吗 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><ul><li><a href=https://github.com/haizlin/fe-interview/issues/720>为何说虚拟 DOM 会提高性能？</a></li><li><a href=https://github.com/haizlin/fe-interview/issues/617>React 的虚拟 DOM 和 vue 的虚拟 DOM 有什么区别？</a> 虚拟 DOM 的主要优势是性能提升，原因如下：</li></ul><ol><li>减少 DOM 操作次数：真实 DOM 的操作（如创建、更新、删除元素）通常比内存操作更耗时。虚拟 DOM 允许我们在内存中进行大量操作，然后一次性将这些操作应用到真实 DOM 上，减少了对真实 DOM 的操作次数。</li><li>最小化更新范围：虚拟 DOM 结合 diff 算法，可以找出新旧虚拟 DOM 之间的差异，从而仅对有差异的部分进行真实 DOM 的更新。这可以减少不必要的 DOM 操作，提高性能。</li><li>批量更新：当有多个更改需要应用到真实 DOM 时，虚拟 DOM 可以将这些更改合并为一次更新。这有助于避免因多次操作导致的布局抖动（Layout Thrashing）和重绘，从而提高性能。</li><li>更好的跨平台兼容性：虚拟 DOM 不仅可以表示 Web 页面中的 DOM，还可以表示其他平台的 UI（例如移动应用或桌面应用）。这意味着使用虚拟 DOM 的框架（如 Vue 或 React）可以更容易地实现跨平台应用程序，而不必为每个平台编写特定的代码。<br>虚拟 DOM 的性能提升并非绝对，它主要适用于大型应用和频繁更新的场景。对于简单的应用或更新较少的情况，虚拟 DOM 可能带来一定的开销。然而，在许多情况下，虚拟 DOM 提供了一种有效的方法来减少真实 DOM 操作，从而提高应用程序的性能。</li></ol><h5 id=pre-requisite>Pre-requisite<a href=#pre-requisite class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><ul><li>DOM: <img alt=image.png|475 src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/202406160709065.png></li><li>🏷️Browser-浏览器工作原理</li></ul><h5 id=reference>Reference<a href=#reference class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><ul><li><a href=https://angularindepth.com/posts/1501/exploring-how-virtual-dom-is-implemented-in-react>in Depth-how-virtual-dom-is-implemented-in-react</a></li><li><a href=https://medium.com/@deathmood/how-to-write-your-own-virtual-dom-ee74acc13060>How to write your own Virtual DOM | by deathmood | Medium</a></li><li><a href=https://medium.com/@deathmood/write-your-virtual-dom-2-props-events-a957608f5c76>Write your Virtual DOM 2: Props &#x26; Events | by deathmood | Medium</a></li><li><a href=https://medium.com/@gethylgeorge/how-virtual-dom-and-diffing-works-in-react-6fc805f9f84e>How Virtual-DOM and diffing works in React | by Gethyl George Kurian | Medium</a></li><li><a href=https://rajaraodv.medium.com/the-inner-workings-of-virtual-dom-666ee7ad47cf>The Inner Workings Of Virtual DOM | by rajaraodv | Medium</a></li><li><a href=https://github.com/livoras/blog/issues/13>深度剖析：如何实现一个 Virtual DOM 算法 · Issue #13 · livoras/blog · GitHub</a></li><li>两个 Vitual-DOM 实现供你参考<ul><li><a href=https://github.com/Matt-Esch/virtual-dom>GitHub - Matt-Esch/virtual-dom: A Virtual DOM and diffing algorithm</a></li><li><a href=https://maquettejs.org/ >Maquette</a></li></ul></li></ul><h5 id=questions>Questions<a href=#questions class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><ul><li><a href=https://github.com/haizlin/fe-interview/issues/724>说说 React diff 的原理是什么？</a></li><li><a href=https://github.com/haizlin/fe-interview/issues/870>说说你对 React 的 reconciliation（一致化算法）的理解</a></li><li><a href=https://github.com/haizlin/fe-interview/issues/711>React16 的 reconciliation 和 commit 分别是什么？</a></li></ul><h3 id=goal-of-fiber>Goal of Fiber<a href=#goal-of-fiber class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h3><p>increase react core algorithm’s suitability for areas like animation, layout, and gestures <strong>incremental rendering</strong>: the ability to split rendering work into chunks and spread it out over multiple frames</p><h4 id=the-ability-to-pause-abort-or-reuse-work-as-new-updates-come-in>the ability to pause, abort, or reuse work as new updates come in<a href=#the-ability-to-pause-abort-or-reuse-work-as-new-updates-come-in class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><ul><li>pause work and come back to it later.</li><li>reuse previously completed work.</li><li>abort work if it’s no longer needed.</li></ul><h4 id=the-ability-to-assign-priority-to-different-types-of-updates>the ability to assign priority to different types of updates<a href=#the-ability-to-assign-priority-to-different-types-of-updates class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h3 id=how-fiber-works>How Fiber works<a href=#how-fiber-works class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h3><ul><li>how the <strong>scheduler</strong> finds the next unit of work to perform.</li><li>how <strong>priority</strong> is tracked and propagated through the fiber tree.</li><li>how the scheduler knows when to pause and resume work.</li><li>how work is flushed and marked as complete.</li><li>how side-effects (such as lifecycle methods) work.</li><li>what a coroutine is and how it can be used to implement features like context and layout.</li></ul><h4 id=comparison-with-old-reconciler>Comparison with old reconciler<a href=#comparison-with-old-reconciler class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>| Previous (Stack) Reconciler | Fiber Reconciler | How optimization happens | | -------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | | element > instance > Dom node | | | | React walks the tree recursively and calls render functions of the whole updated tree during a single tick (main thread gets stuck) | be able to break up &#x26; schedule high priority work to be handled before low priority work (start delaying some updates to avoid dropping frames) | Current Tree &#x26; workInProgress Tree | | <img alt="image.png                                                                                                                                        | 200" src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/202406151436374.png><br>| <img alt="image.png                                                                                                                                                                                                                                                                                                                                                                                                             | 400" src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/202406151437675.png><br>| <strong>Phases</strong>:<br>P1: render/ reconciliation (can be interrupted)<br>- <code>componentWillMount</code><br>- <code>componentWillReceiveProps</code><br>- <code>shouldComponentUpate</code><br>- <code>componentWillUpdate</code><br>P2: commit (can not be interrupted)<br>- <code>componentDidMount</code><br>- <code>componentDidUpdate</code><br>- <code>componentWillUnmount</code> | | make changes to the DOM node immediately when changes detected (before other updates are computed/ before calling render on other bottom elements) | Why? to avoid change DOM directly while computing changes to the tree | <strong>Schedule updates</strong>: <code>requestIdleCallback()</code><br>- Browser will let React know how much idle time it has to spare to commit updates<br><strong>work loop</strong>:<br>- <strong>next unit of work</strong>: HostRoot (starts from HostRoot,<br>- if no updates it’s gonna clone the node then continues to check its child )<br>- if updates exits, it’s gonna tag the change to the workInProgress tree node<br>- <strong>time remaining</strong>: 13 ms | | | Enable error boundary | <strong>Double buffering</strong>:<br>when updates completed, react will switch pointer to the current tree and workInProgress tree | | | Higher priority work will be handled before lower priority work | <strong>Priority</strong><br>- High Priority: UI changes<br>- Low Priority: Data content changes from server<br><strong>Cooperative scheduling</strong><br>- Break work into small pieces of task, so that it can be paused | | render a single tree | steaming rendering | | | | handle work in parallel | Split branches of the tree | | | | |</p><h4 id=chunking分包>Chunking（分包）<a href=#chunking分包 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>Fiber 架构把渲染工作拆分成了多个小块（chunks）。每个 Fiber 节点代表了一个工作单元。React 渲染时，会按顺序遍历 Fiber 树中的节点，执行与每个节点相关的工作。 <img alt=image.png src=https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/full-stack/react-fiber.png></p><h4 id=double-buffering-双缓冲>Double Buffering (双缓冲)<a href=#double-buffering-双缓冲 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>React 在内存中维护了两个树结构：当前的树和正在工作的树。这使得 React 可以在用户不可见的地方进行工作，并且只有当工作完成并且整个树都准备好更新时，才会进行提交。</p><!-- ![diff](react-internal%201.md#^a7iagv) --><h4 id=priority>Priority<a href=#priority class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p><a href=https://github.com/facebook/react/blob/main/packages/scheduler/src/SchedulerPriorities.js>react/packages/scheduler/src/SchedulerPriorities.js at main · facebook/react · GitHub</a></p><ul><li>Different types of updates have different priorities — an animation update needs to complete more quickly than, say, an update from a data store.</li><li><strong>Immediate Priority</strong>：用于不能等待的工作，比如由用户输入或动画触发的更新。</li><li><strong>User Blocking Priority</strong>：用于可能阻塞用户操作的工作。</li><li><strong>Normal Priority</strong>：用于正常的数据抓取、DOM 更新等。</li><li><strong>Low Priority</strong>：用于不急迫的任务，可以推迟的工作，如日志记录。</li><li><strong>Idle Priority</strong>：用于完全不紧急的任务，只有在主线程空闲时才执行，如离屏渲染。</li></ul><h4 id=scheduler-调度器--concurrent-mode-并发模式>Scheduler (调度器) / Concurrent Mode (并发模式)<a href=#scheduler-调度器--concurrent-mode-并发模式 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><blockquote><p>it’s not necessary for every update to be applied immediately</p></blockquote><p>Unlike a push-based approach which requires the app (you, the programmer) to decide how to schedule work. A pull-based approach allows the framework (React) to be smart and make those decisions for you. <em>scheduling</em> the process of determining when work should be performed. <em>work</em> any computations that must be performed. Work is usually the result of an update (e.g. <code>setState</code>).  <a href="https://github.com/facebook/react/blob/340bfd9393e8173adca5380e6587e1ea1a23cefa/packages/shared/ReactWorkTags.js?source=post_page---------------------------#L29-L28">here</a> you can see all types of work targets in Fiber</p><h5 id=messagechannel>MessageChannel<a href=#messagechannel class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p><code>MessageChannel</code> API 可以创建一个新的消息通道，并通过它的两个<code>MessagePort</code>属性发送数据。在 React 的任务调度器中，使用<code>MessageChannel</code>主要是为了实现一种可以跨浏览器和环境持续运行的“微任务”调度。 使用<code>MessageChannel</code>可以使得 React 在处理如输入事件之后尽快调度更新，因为它可以将任务排队为微任务，这些微任务将在当前宏任务结束后尽快执行，但在下一个宏任务开始之前执行</p><h5 id=time-slicing时间分片>Time Slicing（时间分片）<a href=#time-slicing时间分片 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>React 使用浏览器的<code>requestIdleCallback</code>和<code>requestAnimationFrame</code>API 来执行时间分片。使用<code>requestIdleCallback</code>可以让 React 在浏览器空闲时执行低优先级的更新，而<code>requestAnimationFrame</code>则用于高优先级的更新，如动画。 ^u64q5e React 将更新分解成小的任务单元。每个任务单元在执行时都会检查是否还有剩余时间，如果没有，就将控制权交还给浏览器。这样可以让 React 在执行大量工作时仍然能够响应用户的交互。</p><h6 id=实现功能>实现功能<a href=#实现功能 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h6><p>non-blocking rendering applying updates based on the priority pre-rendering content in the background</p><h4 id=使用-concurrent-mode>使用 Concurrent Mode<a href=#使用-concurrent-mode class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>为了启用 Concurrent Mode，你需要使用<code>React.createRoot</code>代替<code>ReactDOM.render</code>来创建根节点</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> React </span><span style=color:#f97583>from</span><span style=color:#9ecbff> "react"</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> ReactDOM </span><span style=color:#f97583>from</span><span style=color:#9ecbff> "react-dom"</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#79b8ff> root</span><span style=color:#f97583> =</span><span style=color:#e1e4e8> ReactDOM.</span><span style=color:#b392f0>createRoot</span><span style=color:#e1e4e8>(document.</span><span style=color:#b392f0>getElementById</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>"root"</span><span style=color:#e1e4e8>));</span></span>
<span class=line><span style=color:#e1e4e8>root.</span><span style=color:#b392f0>render</span><span style=color:#e1e4e8>(&#x3C;</span><span style=color:#79b8ff>App</span><span style=color:#e1e4e8> />);</span></span>
<span class=line></span></code></pre><h4 id=react-fiber-它的目的是解决什么问题><a href=https://github.com/haizlin/fe-interview/issues/858>React Fiber 它的目的是解决什么问题？</a><a href=#react-fiber-它的目的是解决什么问题 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h4 id=说说你对-fiber-架构的理解><a href=https://github.com/haizlin/fe-interview/issues/700>说说你对 Fiber 架构的理解</a><a href=#说说你对-fiber-架构的理解 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><ul><li><a href=https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e>Inside Fiber: in-depth overview of the new reconciliation algorithm in React | by Max Koretskyi | React In Depth | Medium</a></li><li><a href=https://angularindepth.com/posts/1008/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react>in Depth-inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react</a></li><li><a href=https://angularindepth.com/posts/1007/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-to-walk-the-components-tree>in Depth-how-and-why-on-reacts-usage-of-linked-list-in-fiber-to-walk-the-components-tree</a></li></ul><h3 id=react-18-批处理>React 18 批处理<a href=#react-18-批处理 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h3><p>在 React 18 中，自动批处理被扩展到更多的场景，包括：</p><ul><li><strong>Promise 的解决和拒绝处理程序</strong>：在异步代码中，例如 Promise 链或 async/await 函数中的状态更新现在也会自动批处理。</li><li><strong>setTimeout 和 setInterval 回调</strong>：使用这些定时器函数的回调中的状态更新现在也会被批处理。</li><li><strong>原生事件处理程序</strong>：在非 React 合成事件的监听器中进行的状态更新也会被批处理。</li><li><strong>任何其他事件循环中的事件处理</strong>：几乎所有的状态更新，不管它们来源于什么，只要它们在同一个事件循环中，都会被自动批处理。 React 18 批处理自动批处理的工作原理是 React 在执行更新时采用了一种懒惰的方式，它会将多个更新累积起来，然后一次性应用这些更新，而不是对每个更新立即进行重新渲染。这减少了重复的工作和不必要的 DOM 更新，从而提高了性能。</li></ul><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d>// 假设我们有两个状态更新函数</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>count</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>setCount</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#b392f0> useState</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>0</span><span style=color:#e1e4e8>);</span></span>
<span class=line><span style=color:#f97583>const</span><span style=color:#e1e4e8> [</span><span style=color:#79b8ff>flag</span><span style=color:#e1e4e8>, </span><span style=color:#79b8ff>setFlag</span><span style=color:#e1e4e8>] </span><span style=color:#f97583>=</span><span style=color:#b392f0> useState</span><span style=color:#e1e4e8>(</span><span style=color:#79b8ff>false</span><span style=color:#e1e4e8>);</span></span>
<span class=line><span style=color:#6a737d>// 在 React 17 中，这些更新会导致两次重新渲染</span></span>
<span class=line><span style=color:#b392f0>setTimeout</span><span style=color:#e1e4e8>(() </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#b392f0>  setCount</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>c</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> c </span><span style=color:#f97583>+</span><span style=color:#79b8ff> 1</span><span style=color:#e1e4e8>); </span><span style=color:#6a737d>// 1st re-render</span></span>
<span class=line><span style=color:#b392f0>  setFlag</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>f</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#f97583> !</span><span style=color:#e1e4e8>f); </span><span style=color:#6a737d>// 2nd re-render</span></span>
<span class=line><span style=color:#e1e4e8>}, </span><span style=color:#79b8ff>1000</span><span style=color:#e1e4e8>);</span></span>
<span class=line><span style=color:#6a737d>// 在 React 18 中，这些更新会被自动批处理为一次重新渲染</span></span>
<span class=line><span style=color:#b392f0>setTimeout</span><span style=color:#e1e4e8>(() </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#b392f0>  setCount</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>c</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> c </span><span style=color:#f97583>+</span><span style=color:#79b8ff> 1</span><span style=color:#e1e4e8>); </span><span style=color:#6a737d>// Both updates are batched</span></span>
<span class=line><span style=color:#b392f0>  setFlag</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>f</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#f97583> !</span><span style=color:#e1e4e8>f); </span><span style=color:#6a737d>// into a single re-render</span></span>
<span class=line><span style=color:#e1e4e8>}, </span><span style=color:#79b8ff>1000</span><span style=color:#e1e4e8>);</span></span>
<span class=line></span></code></pre><h4 id=选择性批处理>选择性批处理<a href=#选择性批处理 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><p>React 18 提供了 <code>flushSync</code> 函数，允许你选择性地退出批处理，可以确保在回调中的更新立即被应用，触发同步的重新渲染</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> { flushSync } </span><span style=color:#f97583>from</span><span style=color:#9ecbff> "react-dom"</span><span style=color:#e1e4e8>;</span></span>
<span class=line><span style=color:#6a737d>// 在 flushSync 的回调中的更新不会批处理</span></span>
<span class=line><span style=color:#b392f0>flushSync</span><span style=color:#e1e4e8>(() </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#b392f0>  setCount</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>c</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> c </span><span style=color:#f97583>+</span><span style=color:#79b8ff> 1</span><span style=color:#e1e4e8>); </span><span style=color:#6a737d>// These updates are</span></span>
<span class=line><span style=color:#e1e4e8>});</span></span>
<span class=line><span style=color:#b392f0>flushSync</span><span style=color:#e1e4e8>(() </span><span style=color:#f97583>=></span><span style=color:#e1e4e8> {</span></span>
<span class=line><span style=color:#b392f0>  setFlag</span><span style=color:#e1e4e8>((</span><span style=color:#ffab70>f</span><span style=color:#e1e4e8>) </span><span style=color:#f97583>=></span><span style=color:#f97583> !</span><span style=color:#e1e4e8>f); </span><span style=color:#6a737d>// applied immediately</span></span>
<span class=line><span style=color:#e1e4e8>});</span></span>
<span class=line></span></code></pre><h2 id=questions-1>Questions<a href=#questions-1 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h2><h4 id=简要描述下你知道的-react-工作原理是什么><a href=https://github.com/haizlin/fe-interview/issues/611>简要描述下你知道的 React 工作原理是什么？</a><a href=#简要描述下你知道的-react-工作原理是什么 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h4 id=你阅读了几遍-react-的源码都有哪些收获你是怎么阅读的><a href=https://github.com/haizlin/fe-interview/issues/879>你阅读了几遍 React 的源码？都有哪些收获？你是怎么阅读的？</a><a href=#你阅读了几遍-react-的源码都有哪些收获你是怎么阅读的 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h4 id=你阅读过-react-的源码吗简要说下它的执行流程><a href=https://github.com/haizlin/fe-interview/issues/654>你阅读过 React 的源码吗？简要说下它的执行流程</a><a href=#你阅读过-react-的源码吗简要说下它的执行流程 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h4 id=react-怎么拿到组件对应的-dom-元素><a href=https://github.com/haizlin/fe-interview/issues/663>React 怎么拿到组件对应的 DOM 元素？</a><a href=#react-怎么拿到组件对应的-dom-元素 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h4 id=讲一下-react-状态发生变化触发视图更新的链路>讲一下 react 状态发生变化触发视图更新的链路<a href=#讲一下-react-状态发生变化触发视图更新的链路 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h4><h5 id=1-状态更新>1. 状态更新<a href=#1-状态更新 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>这个过程通常从一个状态更新开始。这可能是由于 <code>setState</code>、<code>useState</code> 的 setter 函数或 <code>useReducer</code> 的 dispatch 调用引起的。 当状态更新被触发时，React 会将该组件标记为需要更新。</p><h5 id=2-调度更新>2. 调度更新<a href=#2-调度更新 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>React 的调度器接收到更新请求，并根据其优先级决定何时执行更新。在 Concurrent Mode 下，React 可能会根据任务的紧急程度和浏览器的空闲时间来推迟或中断更新。</p><h5 id=3-协调reconciliation>3. 协调（Reconciliation）<a href=#3-协调reconciliation class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>协调过程开始时，React 会为当前的更新创建一个工作单元，并开始遍历组件树（也称为 Fiber 树）。</p><ol><li><strong>比较阶段</strong>：React 会比较新的组件状态和上一次渲染的状态，计算出实际需要变更的部分。</li><li><strong>生成 Fiber 树</strong>：React 为渲染中的每个组件创建或更新 Fiber 节点。Fiber 是 React 用于跟踪组件树中的每个组件状态和结构的内部数据结构。</li></ol><h5 id=4-渲染>4. 渲染<a href=#4-渲染 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>在协调过程中，React 为组件调用渲染函数（例如，函数组件本身或类组件的 <code>render</code> 方法），生成新的虚拟 DOM（React 元素）。</p><h5 id=5-提交>5. 提交<a href=#5-提交 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>当协调完成并且 React 准备好应用变更到实际 DOM 时，它会执行提交阶段。</p><ol><li><strong>执行副作用</strong>：在提交阶段，React 会执行 <code>useEffect</code>、<code>useLayoutEffect</code> 等 Hook 中的副作用函数。</li><li><strong>更新 DOM</strong>：React 将更新计算出来的变更应用到实际的 DOM 上。这可能包括属性的更新、元素的添加或删除等。</li><li><strong>引用赋值</strong>：React 会更新需要变更的组件的引用，例如将 DOM 节点赋值给通过 <code>useRef</code> 创建的 Refs。</li></ol><h5 id=6-清理与通知>6. 清理与通知<a href=#6-清理与通知 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>最后，React 清理之前渲染的状态、执行副作用的清理函数，并在需要时通知组件更新完成。这是一个清理并使系统保持最新状态的过程。</p><h5 id=思考>思考<a href=#思考 class=anchor><span class=anchor-icon data-pagefind-ignore="">#</span></a></h5><p>整个过程是高度优化的，涉及到了一系列复杂的内部机制。React 使用了如 Fiber 架构、双缓冲、时间切片等技术，使得即使在大规模的更新中也能保持高性能并避免阻塞主线程。 在实践中，React 开发者不需要深入了解所有内部细节，但理解状态更新和视图更新之间的基本链路对于编写高效且符合预期的代码是非常有帮助的。</p></div><div class="transition onload-animation bg-[var(--license-block-bg)] license-container mb-6 overflow-hidden px-6 py-5 relative rounded-xl"><div class="transition font-bold dark:text-white/75 text-black/75">react-internal</div><a href=https://jenniferwonder.github.io/technote/posts/front-end-frameworks/react/react-internal/react-internal/ class="text-[var(--primary)] link">https://jenniferwonder.github.io/technote/posts/front-end-frameworks/react/react-internal/react-internal/</a><div class="flex gap-6 mt-2"><div><div class="transition text-sm dark:text-white/30 text-black/30">作者</div><div class="transition whitespace-nowrap dark:text-white/75 text-black/75">瞻妮芙</div></div><div><div class="transition text-sm dark:text-white/30 text-black/30">发布于</div><div class="transition whitespace-nowrap dark:text-white/75 text-black/75">2024-05-24</div></div><div><div class="transition text-sm dark:text-white/30 text-black/30">许可协议</div><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="text-[var(--primary)] link whitespace-nowrap" target=_blank>CC BY-NC-SA 4.0</a></div></div><svg data-icon=fa6-brands:creative-commons height=240 viewBox="0 0 496 512" width=240 class="transition absolute pointer-events-none -translate-y-1/2 dark:text-white/5 right-6 text-black/5 top-1/2"><symbol id=ai:fa6-brands:creative-commons><path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86m143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86M247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248m.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82" fill=currentColor /></symbol><use xlink:href=#ai:fa6-brands:creative-commons></use></svg></div></div></div><div class="flex justify-between flex-col gap-4 mb-4 md:flex-row overflow-hidden w-full"><a href=/technote/posts/front-end-frameworks/react/component-basics/component-life-cycle-组件声明周期 class="w-full overflow-hidden active:scale-95 font-bold"><div class="flex items-center gap-4 btn-card h-[3.75rem] max-w-full px-4 rounded-2xl w-full justify-start"><svg data-icon=material-symbols:chevron-left-rounded height=32 viewBox="0 0 24 24" width=32 class=text-[var(--primary)]><symbol id=ai:material-symbols:chevron-left-rounded><path d="m10.8 12l3.9 3.9q.275.275.275.7t-.275.7q-.275.275-.7.275t-.7-.275l-4.6-4.6q-.15-.15-.212-.325T8.425 12q0-.2.063-.375T8.7 11.3l4.6-4.6q.275-.275.7-.275t.7.275q.275.275.275.7t-.275.7z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:chevron-left-rounded></use></svg><div class="transition whitespace-nowrap overflow-ellipsis overflow-hidden dark:text-white/75 max-w-[calc(100%_-_3rem)] text-black/75">Component Life Cycle</div></div></a><a href=/technote/posts/front-end-frameworks/react/style-for-react/react-style-basics class="w-full overflow-hidden active:scale-95 font-bold"><div class="flex items-center gap-4 btn-card h-[3.75rem] max-w-full px-4 rounded-2xl w-full justify-end"><div class="transition whitespace-nowrap overflow-ellipsis overflow-hidden dark:text-white/75 max-w-[calc(100%_-_3rem)] text-black/75">React Style Basics</div><svg data-icon=material-symbols:chevron-right-rounded height=32 viewBox="0 0 24 24" width=32 class=text-[var(--primary)]><symbol id=ai:material-symbols:chevron-right-rounded><path d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7q.275-.275.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375q0 .2-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275q-.275-.275-.275-.7t.275-.7z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:chevron-right-rounded></use></svg></div></a></div></div></div><aside class="hidden 3xl:block fixed left-[84%] top-32"><h2 class=font-semibold>Table of Contents</h2><ul class="text-sm mt-4"><li class=""><a href=#reverse-engineering class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-3" aria-label="Scroll to section: Reverse Engineering#">Reverse Engineering#</a></li><li class=""><a href=#fiber class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-3" aria-label="Scroll to section: Fiber#">Fiber#</a><ul><li class=ms-2><a href=#what-is-fiber class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: What is Fiber#">What is Fiber#</a><ul><li class=ms-2><a href=#why-this-name-fiber class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Why this name “Fiber”#">Why this name “Fiber”#</a></li><li class=ms-2><a href=#reconciliation class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Reconciliation#">Reconciliation#</a></li><li class=ms-2><a href=#data-structure-list--tree class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Data Structure (List &#38; Tree)#">Data Structure (List &amp; Tree)#</a></li></ul></li><li class=ms-2><a href=#background class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Background#">Background#</a><ul><li class=ms-2><a href=#杀手级特性-killer-feature class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 杀手级特性 (killer feature)#">杀手级特性 (killer feature)#</a></li><li class=ms-2><a href=#re-render class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Re-render#">Re-render#</a></li><li class=ms-2><a href=#diff class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Diff#">Diff#</a></li><li class=ms-2><a href=#reconciliation--virtual-dom-虚拟-dom class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Reconciliation / Virtual DOM (虚拟 DOM)#">Reconciliation / Virtual DOM (虚拟 DOM)#</a></li></ul></li><li class=ms-2><a href=#goal-of-fiber class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Goal of Fiber#">Goal of Fiber#</a><ul><li class=ms-2><a href=#the-ability-to-pause-abort-or-reuse-work-as-new-updates-come-in class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: the ability to pause, abort, or reuse work as new updates come in#">the ability to pause, abort, or reuse work as new updates come in#</a></li><li class=ms-2><a href=#the-ability-to-assign-priority-to-different-types-of-updates class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: the ability to assign priority to different types of updates#">the ability to assign priority to different types of updates#</a></li></ul></li><li class=ms-2><a href=#how-fiber-works class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: How Fiber works#">How Fiber works#</a><ul><li class=ms-2><a href=#comparison-with-old-reconciler class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Comparison with old reconciler#">Comparison with old reconciler#</a></li><li class=ms-2><a href=#chunking分包 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Chunking（分包）#">Chunking（分包）#</a></li><li class=ms-2><a href=#double-buffering-双缓冲 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Double Buffering (双缓冲)#">Double Buffering (双缓冲)#</a></li><li class=ms-2><a href=#priority class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Priority#">Priority#</a></li><li class=ms-2><a href=#scheduler-调度器--concurrent-mode-并发模式 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: Scheduler (调度器) / Concurrent Mode (并发模式)#">Scheduler (调度器) / Concurrent Mode (并发模式)#</a></li><li class=ms-2><a href=#使用-concurrent-mode class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 使用 Concurrent Mode#">使用 Concurrent Mode#</a></li><li class=ms-2><a href=#react-fiber-它的目的是解决什么问题 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: React Fiber 它的目的是解决什么问题？#">React Fiber 它的目的是解决什么问题？#</a></li><li class=ms-2><a href=#说说你对-fiber-架构的理解 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 说说你对 Fiber 架构的理解#">说说你对 Fiber 架构的理解#</a></li></ul></li><li class=ms-2><a href=#react-18-批处理 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: React 18 批处理#">React 18 批处理#</a><ul><li class=ms-2><a href=#选择性批处理 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 选择性批处理#">选择性批处理#</a></li></ul></li></ul></li><li class=""><a href=#questions-1 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-3" aria-label="Scroll to section: Questions#">Questions#</a><ul><li class=ms-2><a href=#简要描述下你知道的-react-工作原理是什么 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 简要描述下你知道的 React 工作原理是什么？#">简要描述下你知道的 React 工作原理是什么？#</a></li><li class=ms-2><a href=#你阅读了几遍-react-的源码都有哪些收获你是怎么阅读的 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 你阅读了几遍 React 的源码？都有哪些收获？你是怎么阅读的？#">你阅读了几遍 React 的源码？都有哪些收获？你是怎么阅读的？#</a></li><li class=ms-2><a href=#你阅读过-react-的源码吗简要说下它的执行流程 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 你阅读过 React 的源码吗？简要说下它的执行流程#">你阅读过 React 的源码吗？简要说下它的执行流程#</a></li><li class=ms-2><a href=#react-怎么拿到组件对应的-dom-元素 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: React 怎么拿到组件对应的 DOM 元素？#">React 怎么拿到组件对应的 DOM 元素？#</a></li><li class=ms-2><a href=#讲一下-react-状态发生变化触发视图更新的链路 class="transition text-sm text-50 dark:hover:text-[var(--primary)] font-medium hover:text-[var(--primary)] link-lg whitespace-nowrap active:text-[var(--primary)] block max-w-[14rem] overflow-ellipsis overflow-hidden text-nowrap mt-2 text-[0.80rem]" aria-label="Scroll to section: 讲一下 react 状态发生变化触发视图更新的链路#">讲一下 react 状态发生变化触发视图更新的链路#</a></li></ul></li></ul></aside></main><div class="onload-animation col-span-2 grid-rows-3 mt-4" id=footer><div class="flex items-center justify-center card-base max-w-[var(--page-width)] min-h-[4.5rem] mx-auto px-6 rounded-b-none"><div class="transition text-sm text-50 text-center">© 2024 瞻妮芙. All Rights Reserved.<br>Powered by <a href=https://github.com/Jenniferwonder/fuwari class="text-[var(--primary)] link font-medium" target=_blank>Fuwari</a></div></div></div><div class="hidden back-to-top-wrapper lg:block" data-astro-cid-eymb5ayk><div class="transition flex items-center back-to-top-btn hide overflow-hidden rounded-2xl" id=back-to-top-btn data-astro-cid-eymb5ayk onclick=backToTop()><button class="w-[3.75rem] btn-card h-[3.75rem]" aria-label="Back to Top" data-astro-cid-eymb5ayk><svg data-icon=material-symbols:keyboard-arrow-up-rounded height=1em viewBox="0 0 24 24" width=1em class=mx-auto data-astro-cid-eymb5ayk><symbol id=ai:material-symbols:keyboard-arrow-up-rounded><path d="m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275q-.275-.275-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7q-.275.275-.7.275t-.7-.275z" fill=currentColor /></symbol><use xlink:href=#ai:material-symbols:keyboard-arrow-up-rounded></use></svg></button></div></div><script>function backToTop(){window.scroll({top:0,behavior:"smooth"})}function scrollFunction(){let o=document.getElementById("back-to-top-btn");document.body.scrollTop>600||document.documentElement.scrollTop>600?o.classList.remove("hide"):o.classList.add("hide")}window.onscroll=scrollFunction</script></div></div></body></html><script>function addHeadingLinks(){let e=Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));for(let t of e){t.classList.add("group");let e=document.createElement("a");e.innerText="",e.className="heading-link hidden link-lg transition text-50 text-sm font-medium hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap ml-2",e.href="#"+t.id,e.ariaHidden="true",t.appendChild(e)}}addHeadingLinks()</script>