import{createComponent,renderTemplate,maybeRenderHead,unescapeHTML}from"../../../../chunks/1726300354279/astro.mjs";import"kleur/colors";import"clsx";import"html-escaper";import"cssesc";const id="js/data-fetching/promise.md",collection="posts",slug="js/data-fetching/promise",body="\n# Promise\n\n## What is a Promise?\n\nPromise æ˜¯ä¸€ç§åœ¨ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ç¼–ç¨‹æ¨¡å¼ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªå°šæœªå®Œæˆä½†é¢„è®¡åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å®Œæˆçš„æ“ä½œçš„ç»“æœã€‚Promise å…è®¸æˆ‘ä»¬ä»¥æ›´ç®€æ´ã€æ˜“è¯»çš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…äº†ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰é—®é¢˜ã€‚\n\n- A promise is a returned **object** to which you attach callbacks, instead of passing callbacks into a function.\n- It represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\n\n### Promise 3 ç§çŠ¶æ€\n\n- **pending**: initial state, neither fulfilled nor rejected.\n- **fulfilled** (resolved): meaning that the operation was completed successfully.\n- **rejected**: meaning that the operation failed\n- ![](https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState-1.png) ![](https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState.png)\n\n### Promise æ ¸å¿ƒç‰¹ç‚¹\n\n1. ? Promise å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶çŠ¶æ€å°±ä¸èƒ½å†è¢«æ”¹å˜ã€‚\n2. Promise çŠ¶æ€åªèƒ½ä» pending å˜ä¸º fulfilled æˆ– rejectedï¼Œä¸èƒ½é€†å‘æ”¹å˜ï¼Œä¸”åªèƒ½æ”¹å˜ä¸€æ¬¡ã€‚\n3. Promise å…è®¸æˆ‘ä»¬å°†æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†å‡½æ•°åˆ†å¼€ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚\n\n### Promise ç¼ºç‚¹\n\n1. æ— æ³•å–æ¶ˆï¼šä¸€æ—¦åˆ›å»ºäº† Promiseï¼Œå°±æ— æ³•å–æ¶ˆå®ƒã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸å†éœ€è¦ç»“æœçš„å¼‚æ­¥æ“ä½œä»ç„¶åœ¨æ‰§è¡Œã€‚\n2. æ€»æ˜¯å¼‚æ­¥ï¼šPromise çš„å›è°ƒæ€»æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œå³ä½¿æ“ä½œå·²ç»å®Œæˆã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„å¤–çš„è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œé¡ºåºæ•æ„Ÿçš„æƒ…å†µä¸‹ã€‚\n3. è°ƒè¯•å›°éš¾ï¼šç”±äº Promise çš„é“¾å¼è°ƒç”¨å’Œå¼‚æ­¥ç‰¹æ€§ï¼Œè°ƒè¯• Promise å¯èƒ½æ¯”è°ƒè¯•åŒæ­¥ä»£ç æ›´å…·æŒ‘æˆ˜æ€§ã€‚é”™è¯¯å †æ ˆå¯èƒ½ä¸å¤Ÿæ¸…æ™°ï¼Œéš¾ä»¥ç¡®å®šé—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚\n\n### æ‰§è¡Œç‰¹ç‚¹\n\n- Promise åªä»¥`ç¬¬ä¸€æ¬¡ä¸ºå‡†`ï¼Œç¬¬ä¸€æ¬¡æˆåŠŸå°±`æ°¸ä¹…`ä¸º`fulfilled`ï¼Œç¬¬ä¸€æ¬¡å¤±è´¥å°±æ°¸è¿œçŠ¶æ€ä¸º`rejected`\n- Promise ä¸­æœ‰ `throw` çš„è¯ï¼Œå°±ç›¸å½“äºæ‰§è¡Œäº†`reject`\n\n```js\nlet p1 = new Promise((resolve, reject) => {\n\tresolve(æˆåŠŸ);\n\treject(å¤±è´¥);\n});\nconsole.log(p1, p1);\n\nlet p2 = new Promise((resolve, reject) => {\n\treject(å¤±è´¥);\n\tresolve(æˆåŠŸ);\n});\nconsole.log(p2, p2);\n\nlet p3 = new Promise((resolve, reject) => {\n\tthrow æŠ¥é”™;\n});\nconsole.log(p3, p3);\n```\n\n### Pending State ç‰¹ç‚¹\n\n- Promise é‡Œæ²¡æœ‰æ‰§è¡Œ`resolve`ã€`reject`ä»¥åŠ`throw`çš„è¯ï¼Œè¿™ä¸ª promise çš„çŠ¶æ€ä¹Ÿæ˜¯`pending`\n- `pending`çŠ¶æ€ä¸‹çš„ promise ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°`then()`\n\n```js\nlet myPromise1 = new Promise(() => {});\nconsole.log(myPromise1 :>> , myPromise1);\nlet myPromise2 = new Promise((resolve, reject) => {\n\tlet a = 1;\n\tfor (let index = 0; index < 5; index++) {\n\t\ta++;\n\t}\n});\nconsole.log(myPromise2 :>> , myPromise2);\nmyPromise2.then(() => {\n\tconsole.log(myPromise2æ‰§è¡Œäº†then); // åœ¨ Promise pending çŠ¶æ€ä¸‹ä¸ä¼šæ‰§è¡Œ\n});\n```\n\n## å¸¸è§ç”¨æ³•\n\n1. åˆ›å»º Promise å¯¹è±¡ï¼šé€šè¿‡`new Promise(executor)`åˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡ï¼Œå…¶ä¸­ executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ rejectã€‚æˆåŠŸæ—¶è°ƒç”¨ resolve å‡½æ•°å¹¶ä¼ é€’ç»“æœï¼Œå¤±è´¥æ—¶è°ƒç”¨ reject å‡½æ•°å¹¶ä¼ é€’åŸå› ã€‚\n2. é“¾å¼è°ƒç”¨ï¼šé€šè¿‡`.then()`æ–¹æ³•å¤„ç† fulfilled çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º fulfilled æ—¶è°ƒç”¨ã€‚`.catch()`æ–¹æ³•å¤„ç† rejected çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º rejected æ—¶è°ƒç”¨ã€‚\n3. Promise.allï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå½“æ‰€æœ‰ Promise éƒ½å˜ä¸º fulfilled çŠ¶æ€æ—¶è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶å€¼ä¸ºæ‰€æœ‰ Promise ç»“æœçš„æ•°ç»„ã€‚å¦‚æœæœ‰ä»»æ„ä¸€ä¸ª Promise å˜ä¸º rejected çŠ¶æ€ï¼Œåˆ™è¿”å›çš„ Promise ä¹Ÿå˜ä¸º rejectedï¼Œä¸”è¿”å›åŸå› æ˜¯ç¬¬ä¸€ä¸ª rejected çš„ Promise çš„åŸå› ã€‚\n4. Promise.raceï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶çŠ¶æ€å’Œç»“æœä¸ç¬¬ä¸€ä¸ªå®Œæˆï¼ˆæ— è®ºæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼‰çš„ Promise ç›¸åŒã€‚\n\n## Create a Promise\n\n### `new Promise()`\n\n#### å‚æ•°è¦æ±‚\n\n- ä½¿ç”¨ `new Promise()` å¿…é¡»è¾“å…¥ä¸€ä¸ªæ‰§è¡Œå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\n```js\nlet myPromise0 = new Promise();\nconsole.log(myPromise0 :>> , myPromise0); // æŠ¥é”™ï¼šTypeError: Promise resolver undefined\n```\n\n##### Case\n\n```js\nfunction makeRequest(location) {\n\treturn new Promise((resolve, reject) => {\n\t\tconsole.log(`Making Request to ${location}`);\n\t\tif (location === Google) {\n\t\t\tresolve(Google says Hi);\n\t\t} else {\n\t\t\treject(We can only talk to Google);\n\t\t}\n\t});\n}\n```\n\n#### â­ æ‰§è¡Œé¡ºåº\n\n- Promise æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œ`promise.then`Â  ä¸­çš„å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„\n\n##### Case\n\n```js\nconst promise = new Promise((resolve, reject) => {\n\tconsole.log(1);\n\tresolve();\n\tconsole.log(2);\n});\npromise.then(() => {\n\tconsole.log(3);\n});\nconsole.log(4);\n```\n\n##### Output\n\n```shell\n1\n2\n4\n3\n```\n\n### `Promise.resolve()`\n\nå°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡\n\n```js\nPromise.resolve(foo);\n// ç­‰ä»·äº\nnew Promise((resolve) => resolve(foo));\n```\n\n#### å‚æ•°çš„å››ç§æƒ…å†µ\n\n1. å¦‚æœå‚æ•°æ˜¯ `Promise` å®ä¾‹\n   - é‚£ä¹ˆ `Promise.resolve()` å°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚\n2. å‚æ•°æ˜¯ä¸€ä¸ª thenable (å…·æœ‰`then`æ–¹æ³•çš„å¯¹è±¡) å¯¹è±¡\n   - ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º `Promise` å¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œ thenable å¯¹è±¡çš„ `then`æ–¹æ³•\n3. å‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰`then`æ–¹æ³•çš„å¯¹è±¡\n   - åˆ™`Promise.resolve`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Â `Promise`Â  å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º`resolved`\n4. `Promise.resolve()`æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°\n   - ç›´æ¥è¿”å›ä¸€ä¸ª `resolved`çŠ¶æ€çš„ `Promise` å¯¹è±¡ã€‚\n\n#### Example\n\n```js\nconst tick = Date.now();\nconst log = (v) => console.log(`${v} \\n Elapsed: ${Date.now() - tick}ms`);\nconst codeBlocker = () => {\n\t// Blocking\n\t// let i = 0;\n\t// while(i < 1000000000) { i++;}\n\t// return 'ğŸ· billion loops done';\n\n\t// Async blocking\n\t// return new Promise((resolve, reject) => {\n\t// let i = 0;\n\t// while(i < 1000000000) { i++;}\n\t// resolve('ğŸ· billion loops done');\n\t// })\n\n\t// Non-blocking\n\treturn Promise.resolve().then((v) => {\n\t\tlet i = 0;\n\t\twhile (i < 1000000000) {\n\t\t\ti++;\n\t\t}\n\t\treturn ğŸ· billion loops done;\n\t});\n};\nlog(ğŸ¥ª Synchronous 1);\ncodeBlocker().then(log);\nlog(ğŸ¥ª Synchronous 2);\n```\n\n### `Promise.reject()`\n\n- `Promise.reject()`æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º`reject`çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°\n\n```js\nconst thenable = {\n\tthen(resolve, reject) {\n\t\treject(å‡ºé”™äº†);\n\t},\n};\nPromise.reject(thenable).catch((e) => {\n\tconsole.log(e === thenable);\n});\n// true\n```\n\n## [Promise Chaining-é“¾å¼è°ƒç”¨](promise-chaining-é“¾å¼è°ƒç”¨)\n\n## [Promise Composition-ç»„åˆè°ƒç”¨](promise-composition-ç»„åˆè°ƒç”¨)\n\n## Reference\n\n- â­[é€šä¿—æ˜“æ‡‚çš„ Promise çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œæ£€éªŒä¸€ä¸‹ä½ æ˜¯å¦çœŸçš„å®Œå…¨æŒæ¡äº† Promiseï¼Ÿ - æ˜é‡‘](https://juejin.cn/post/7020335414980378655)\n  - [Promise - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n  - [Using Promises - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)\n- [ä½ å¥½ï¼ŒJavaScript å¼‚æ­¥ç¼–ç¨‹---- ç†è§£ JavaScript å¼‚æ­¥çš„ç¾å¦™](https://juejin.cn/post/6844903648162480142 https://juejin.cn/post/6844903648162480142)\n- [Promise ä¸ä¼šï¼Ÿï¼Ÿçœ‹è¿™é‡Œï¼ï¼ï¼å²ä¸Šæœ€é€šä¿—æ˜“æ‡‚çš„ Promiseï¼ï¼ï¼](https://juejin.cn/post/6844903607968481287 https://juejin.cn/post/6844903607968481287)\n- [å½“ async/await é‡ä¸Š forEach](https://link.juejin.cn?target=https%3A%2F%2Fobjcer.com%2F2017%2F10%2F12%2Fasync-await-with-forEach%2F https://objcer.com/2017/10/12/async-await-with-forEach/)\n- [Promise å¿…çŸ¥å¿…ä¼šï¼ˆåé“é¢˜ï¼‰](https://juejin.cn/post/6844903509934997511 https://juejin.cn/post/6844903509934997511)\n\n### Write a Promise\n\n- â­[Promises/A+](https://promisesaplus.com/)\n  - ğŸ› ï¸[Conformant Promises/A+ Implementations](https://promisesaplus.com/implementations)\n  - ğŸ› ï¸[Promises/A+ Â· GitHub](https://github.com/promises-aplus)\n- ğŸš€[æ‰‹å†™ Promiseï¼šå®ç°ç¬¦åˆ Promises/A+è§„èŒƒçš„ Promise - æ˜é‡‘](https://juejin.cn/post/7274887531271012388#heading-13)\n- ğŸš€[æ‰‹å†™ Promise æ ¸å¿ƒä»£ç  - JavaScript å‰ç«¯ Web å·¥ç¨‹å¸ˆ\\_å“”å“©å“”å“©\\_bilibili](https://www.bilibili.com/video/BV1RR4y1p7my/?vd_source=be278a4cfd00a5f72dcf153eaca79333)\n  - [æ‰‹æŠŠæ‰‹ä¸€è¡Œä¸€è¡Œä»£ç æ•™ä½ â€œæ‰‹å†™ Promiseâ€œï¼Œå®Œç¾é€šè¿‡ Promises/A+ å®˜æ–¹ 872 ä¸ªæµ‹è¯•ç”¨ä¾‹ - æ˜é‡‘](https://juejin.cn/post/7043758954496655397#heading-14)\n- [Promise å®ç°åŸç†ï¼ˆé™„æºç ï¼‰](https://juejin.cn/post/6844903665686282253 https://juejin.cn/post/6844903665686282253)\n- [100 è¡Œä»£ç å®ç° Promises/A+ è§„èŒƒ](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqdJ0Xd8zTgtetFdlJL3P1g https://mp.weixin.qq.com/s/qdJ0Xd8zTgtetFdlJL3P1g)\n- [ä¸€èµ·å­¦ä¹ é€ è½®å­ï¼ˆä¸€ï¼‰ï¼šä»é›¶å¼€å§‹å†™ä¸€ä¸ªç¬¦åˆ Promises/A+è§„èŒƒçš„ promise](https://juejin.cn/post/6844903617619558408#heading-34 https://juejin.cn/post/6844903617619558408#heading-34)\n- [BAT å‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™ Promise æ•™ç¨‹](https://juejin.cn/post/6844903625769091079#heading-9 https://juejin.cn/post/6844903625769091079#heading-9)\n",data={title:"Promise",DateStarted:new Date(1670544e6),draft:!0,tags:["JavaScript"],category:"Programming"},_internal={type:"content",filePath:"E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/js/data-fetching/promise.md",rawData:void 0},html='<h1 id="promise">Promise<a class="anchor" href="#promise"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h1>\n<h2 id="what-is-a-promise">What is a Promise?<a class="anchor" href="#what-is-a-promise"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<p>Promise æ˜¯ä¸€ç§åœ¨ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ç¼–ç¨‹æ¨¡å¼ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªå°šæœªå®Œæˆä½†é¢„è®¡åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å®Œæˆçš„æ“ä½œçš„ç»“æœã€‚Promise å…è®¸æˆ‘ä»¬ä»¥æ›´ç®€æ´ã€æ˜“è¯»çš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…äº†ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰é—®é¢˜ã€‚</p>\n<ul>\n<li>A promise is a returned <strong>object</strong> to which you attach callbacks, instead of passing callbacks into a function.</li>\n<li>It represents the eventual completion (or failure) of an asynchronous operation and its resulting value.</li>\n</ul>\n<h3 id="promise-3-ç§çŠ¶æ€">Promise 3 ç§çŠ¶æ€<a class="anchor" href="#promise-3-ç§çŠ¶æ€"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li><strong>pending</strong>: initial state, neither fulfilled nor rejected.</li>\n<li><strong>fulfilled</strong> (resolved): meaning that the operation was completed successfully.</li>\n<li><strong>rejected</strong>: meaning that the operation failed</li>\n<li><img src="https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState-1.png" alt=""> <img src="https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState.png" alt=""></li>\n</ul>\n<h3 id="promise-æ ¸å¿ƒç‰¹ç‚¹">Promise æ ¸å¿ƒç‰¹ç‚¹<a class="anchor" href="#promise-æ ¸å¿ƒç‰¹ç‚¹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ol>\n<li>? Promise å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶çŠ¶æ€å°±ä¸èƒ½å†è¢«æ”¹å˜ã€‚</li>\n<li>Promise çŠ¶æ€åªèƒ½ä» pending å˜ä¸º fulfilled æˆ– rejectedï¼Œä¸èƒ½é€†å‘æ”¹å˜ï¼Œä¸”åªèƒ½æ”¹å˜ä¸€æ¬¡ã€‚</li>\n<li>Promise å…è®¸æˆ‘ä»¬å°†æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†å‡½æ•°åˆ†å¼€ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚</li>\n</ol>\n<h3 id="promise-ç¼ºç‚¹">Promise ç¼ºç‚¹<a class="anchor" href="#promise-ç¼ºç‚¹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ol>\n<li>æ— æ³•å–æ¶ˆï¼šä¸€æ—¦åˆ›å»ºäº† Promiseï¼Œå°±æ— æ³•å–æ¶ˆå®ƒã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸å†éœ€è¦ç»“æœçš„å¼‚æ­¥æ“ä½œä»ç„¶åœ¨æ‰§è¡Œã€‚</li>\n<li>æ€»æ˜¯å¼‚æ­¥ï¼šPromise çš„å›è°ƒæ€»æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œå³ä½¿æ“ä½œå·²ç»å®Œæˆã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„å¤–çš„è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œé¡ºåºæ•æ„Ÿçš„æƒ…å†µä¸‹ã€‚</li>\n<li>è°ƒè¯•å›°éš¾ï¼šç”±äº Promise çš„é“¾å¼è°ƒç”¨å’Œå¼‚æ­¥ç‰¹æ€§ï¼Œè°ƒè¯• Promise å¯èƒ½æ¯”è°ƒè¯•åŒæ­¥ä»£ç æ›´å…·æŒ‘æˆ˜æ€§ã€‚é”™è¯¯å †æ ˆå¯èƒ½ä¸å¤Ÿæ¸…æ™°ï¼Œéš¾ä»¥ç¡®å®šé—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚</li>\n</ol>\n<h3 id="æ‰§è¡Œç‰¹ç‚¹">æ‰§è¡Œç‰¹ç‚¹<a class="anchor" href="#æ‰§è¡Œç‰¹ç‚¹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>Promise åªä»¥<code>ç¬¬ä¸€æ¬¡ä¸ºå‡†</code>ï¼Œç¬¬ä¸€æ¬¡æˆåŠŸå°±<code>æ°¸ä¹…</code>ä¸º<code>fulfilled</code>ï¼Œç¬¬ä¸€æ¬¡å¤±è´¥å°±æ°¸è¿œçŠ¶æ€ä¸º<code>rejected</code></li>\n<li>Promise ä¸­æœ‰ <code>throw</code> çš„è¯ï¼Œå°±ç›¸å½“äºæ‰§è¡Œäº†<code>reject</code></li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> p1 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#B392F0">\tresolve</span><span style="color:#E1E4E8">(æˆåŠŸ);</span></span>\n<span class="line"><span style="color:#B392F0">\treject</span><span style="color:#E1E4E8">(å¤±è´¥);</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(p1, p1);</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> p2 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#B392F0">\treject</span><span style="color:#E1E4E8">(å¤±è´¥);</span></span>\n<span class="line"><span style="color:#B392F0">\tresolve</span><span style="color:#E1E4E8">(æˆåŠŸ);</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(p2, p2);</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> p3 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#F97583">\tthrow</span><span style="color:#E1E4E8"> æŠ¥é”™;</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(p3, p3);</span></span>\n<span class="line"></span></code></pre>\n<h3 id="pending-state-ç‰¹ç‚¹">Pending State ç‰¹ç‚¹<a class="anchor" href="#pending-state-ç‰¹ç‚¹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>Promise é‡Œæ²¡æœ‰æ‰§è¡Œ<code>resolve</code>ã€<code>reject</code>ä»¥åŠ<code>throw</code>çš„è¯ï¼Œè¿™ä¸ª promise çš„çŠ¶æ€ä¹Ÿæ˜¯<code>pending</code></li>\n<li><code>pending</code>çŠ¶æ€ä¸‹çš„ promise ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°<code>then()</code></li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> myPromise1 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(myPromise1 :</span><span style="color:#F97583">>></span><span style="color:#E1E4E8"> , myPromise1);</span></span>\n<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> myPromise2 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#F97583">\tlet</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">\tfor</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">let</span><span style="color:#E1E4E8"> index </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; index </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; index</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\ta</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#E1E4E8">\t}</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(myPromise2 :</span><span style="color:#F97583">>></span><span style="color:#E1E4E8"> , myPromise2);</span></span>\n<span class="line"><span style="color:#E1E4E8">myPromise2.</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(myPromise2æ‰§è¡Œäº†then); </span><span style="color:#6A737D">// åœ¨ Promise pending çŠ¶æ€ä¸‹ä¸ä¼šæ‰§è¡Œ</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"></span></code></pre>\n<h2 id="å¸¸è§ç”¨æ³•">å¸¸è§ç”¨æ³•<a class="anchor" href="#å¸¸è§ç”¨æ³•"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<ol>\n<li>åˆ›å»º Promise å¯¹è±¡ï¼šé€šè¿‡<code>new Promise(executor)</code>åˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡ï¼Œå…¶ä¸­ executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ rejectã€‚æˆåŠŸæ—¶è°ƒç”¨ resolve å‡½æ•°å¹¶ä¼ é€’ç»“æœï¼Œå¤±è´¥æ—¶è°ƒç”¨ reject å‡½æ•°å¹¶ä¼ é€’åŸå› ã€‚</li>\n<li>é“¾å¼è°ƒç”¨ï¼šé€šè¿‡<code>.then()</code>æ–¹æ³•å¤„ç† fulfilled çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º fulfilled æ—¶è°ƒç”¨ã€‚<code>.catch()</code>æ–¹æ³•å¤„ç† rejected çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º rejected æ—¶è°ƒç”¨ã€‚</li>\n<li>Promise.allï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå½“æ‰€æœ‰ Promise éƒ½å˜ä¸º fulfilled çŠ¶æ€æ—¶è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶å€¼ä¸ºæ‰€æœ‰ Promise ç»“æœçš„æ•°ç»„ã€‚å¦‚æœæœ‰ä»»æ„ä¸€ä¸ª Promise å˜ä¸º rejected çŠ¶æ€ï¼Œåˆ™è¿”å›çš„ Promise ä¹Ÿå˜ä¸º rejectedï¼Œä¸”è¿”å›åŸå› æ˜¯ç¬¬ä¸€ä¸ª rejected çš„ Promise çš„åŸå› ã€‚</li>\n<li>Promise.raceï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶çŠ¶æ€å’Œç»“æœä¸ç¬¬ä¸€ä¸ªå®Œæˆï¼ˆæ— è®ºæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼‰çš„ Promise ç›¸åŒã€‚</li>\n</ol>\n<h2 id="create-a-promise">Create a Promise<a class="anchor" href="#create-a-promise"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<h3 id="new-promise"><code>new Promise()</code><a class="anchor" href="#new-promise"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<h4 id="å‚æ•°è¦æ±‚">å‚æ•°è¦æ±‚<a class="anchor" href="#å‚æ•°è¦æ±‚"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<ul>\n<li>ä½¿ç”¨ <code>new Promise()</code> å¿…é¡»è¾“å…¥ä¸€ä¸ªæ‰§è¡Œå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> myPromise0 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(myPromise0 :</span><span style="color:#F97583">>></span><span style="color:#E1E4E8"> , myPromise0); </span><span style="color:#6A737D">// æŠ¥é”™ï¼šTypeError: Promise resolver undefined</span></span>\n<span class="line"></span></code></pre>\n<h5 id="case">Case<a class="anchor" href="#case"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h5>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> makeRequest</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">location</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#F97583">\treturn</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`Making Request to ${</span><span style="color:#E1E4E8">location</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#F97583">\t\tif</span><span style="color:#E1E4E8"> (location </span><span style="color:#F97583">===</span><span style="color:#E1E4E8"> Google) {</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\tresolve</span><span style="color:#E1E4E8">(Google says Hi);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\treject</span><span style="color:#E1E4E8">(We can only talk to Google);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t}</span></span>\n<span class="line"><span style="color:#E1E4E8">\t});</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"></span></code></pre>\n<h4 id="-æ‰§è¡Œé¡ºåº">â­ æ‰§è¡Œé¡ºåº<a class="anchor" href="#-æ‰§è¡Œé¡ºåº"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<ul>\n<li>Promise æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œ<code>promise.then</code>Â  ä¸­çš„å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„</li>\n</ul>\n<h5 id="case-1">Case<a class="anchor" href="#case-1"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h5>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> promise</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#B392F0">\tresolve</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">promise.</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"></span></code></pre>\n<h5 id="output">Output<a class="anchor" href="#output"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h5>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#B392F0">1</span></span>\n<span class="line"><span style="color:#B392F0">2</span></span>\n<span class="line"><span style="color:#B392F0">4</span></span>\n<span class="line"><span style="color:#B392F0">3</span></span>\n<span class="line"></span></code></pre>\n<h3 id="promiseresolve"><code>Promise.resolve()</code><a class="anchor" href="#promiseresolve"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<p>å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡</p>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">Promise</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">resolve</span><span style="color:#E1E4E8">(foo);</span></span>\n<span class="line"><span style="color:#6A737D">// ç­‰ä»·äº</span></span>\n<span class="line"><span style="color:#F97583">new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> resolve</span><span style="color:#E1E4E8">(foo));</span></span>\n<span class="line"></span></code></pre>\n<h4 id="å‚æ•°çš„å››ç§æƒ…å†µ">å‚æ•°çš„å››ç§æƒ…å†µ<a class="anchor" href="#å‚æ•°çš„å››ç§æƒ…å†µ"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<ol>\n<li>å¦‚æœå‚æ•°æ˜¯ <code>Promise</code> å®ä¾‹\n<ul>\n<li>é‚£ä¹ˆ <code>Promise.resolve()</code> å°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚</li>\n</ul>\n</li>\n<li>å‚æ•°æ˜¯ä¸€ä¸ª thenable (å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡) å¯¹è±¡\n<ul>\n<li>ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º <code>Promise</code> å¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œ thenable å¯¹è±¡çš„ <code>then</code>æ–¹æ³•</li>\n</ul>\n</li>\n<li>å‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡\n<ul>\n<li>åˆ™<code>Promise.resolve</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Â <code>Promise</code>Â  å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º<code>resolved</code></li>\n</ul>\n</li>\n<li><code>Promise.resolve()</code>æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°\n<ul>\n<li>ç›´æ¥è¿”å›ä¸€ä¸ª <code>resolved</code>çŠ¶æ€çš„ <code>Promise</code> å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id="example">Example<a class="anchor" href="#example"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> tick</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> Date.</span><span style="color:#B392F0">now</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> log</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">v</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`${</span><span style="color:#E1E4E8">v</span><span style="color:#9ECBFF">} </span><span style="color:#79B8FF">\\n</span><span style="color:#9ECBFF"> Elapsed: ${</span><span style="color:#E1E4E8">Date</span><span style="color:#9ECBFF">.</span><span style="color:#B392F0">now</span><span style="color:#9ECBFF">() </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> tick</span><span style="color:#9ECBFF">}ms`</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> codeBlocker</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#6A737D">\t// Blocking</span></span>\n<span class="line"><span style="color:#6A737D">\t// let i = 0;</span></span>\n<span class="line"><span style="color:#6A737D">\t// while(i &#x3C; 1000000000) { i++;}</span></span>\n<span class="line"><span style="color:#6A737D">\t// return \'ğŸ· billion loops done\';</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">\t// Async blocking</span></span>\n<span class="line"><span style="color:#6A737D">\t// return new Promise((resolve, reject) => {</span></span>\n<span class="line"><span style="color:#6A737D">\t// let i = 0;</span></span>\n<span class="line"><span style="color:#6A737D">\t// while(i &#x3C; 1000000000) { i++;}</span></span>\n<span class="line"><span style="color:#6A737D">\t// resolve(\'ğŸ· billion loops done\');</span></span>\n<span class="line"><span style="color:#6A737D">\t// })</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">\t// Non-blocking</span></span>\n<span class="line"><span style="color:#F97583">\treturn</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">resolve</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">v</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#F97583">\t\tlet</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">\t\twhile</span><span style="color:#E1E4E8"> (i </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 1000000000</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\ti</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t}</span></span>\n<span class="line"><span style="color:#F97583">\t\treturn</span><span style="color:#E1E4E8"> ğŸ· billion loops done;</span></span>\n<span class="line"><span style="color:#E1E4E8">\t});</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(ğŸ¥ª Synchronous </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#B392F0">codeBlocker</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(log);</span></span>\n<span class="line"><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(ğŸ¥ª Synchronous </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"></span></code></pre>\n<h3 id="promisereject"><code>Promise.reject()</code><a class="anchor" href="#promisereject"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li><code>Promise.reject()</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º<code>reject</code>çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°</li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> thenable</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#B392F0">\tthen</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#B392F0">\t\treject</span><span style="color:#E1E4E8">(å‡ºé”™äº†);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t},</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"><span style="color:#79B8FF">Promise</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">reject</span><span style="color:#E1E4E8">(thenable).</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(e </span><span style="color:#F97583">===</span><span style="color:#E1E4E8"> thenable);</span></span>\n<span class="line"><span style="color:#E1E4E8">});</span></span>\n<span class="line"><span style="color:#6A737D">// true</span></span>\n<span class="line"></span></code></pre>\n<h2 id="promise-chaining-é“¾å¼è°ƒç”¨"><a href="promise-chaining-%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8">Promise Chaining-é“¾å¼è°ƒç”¨</a><a class="anchor" href="#promise-chaining-é“¾å¼è°ƒç”¨"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<h2 id="promise-composition-ç»„åˆè°ƒç”¨"><a href="promise-composition-%E7%BB%84%E5%90%88%E8%B0%83%E7%94%A8">Promise Composition-ç»„åˆè°ƒç”¨</a><a class="anchor" href="#promise-composition-ç»„åˆè°ƒç”¨"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<h2 id="reference">Reference<a class="anchor" href="#reference"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<ul>\n<li>â­<a href="https://juejin.cn/post/7020335414980378655">é€šä¿—æ˜“æ‡‚çš„ Promise çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œæ£€éªŒä¸€ä¸‹ä½ æ˜¯å¦çœŸçš„å®Œå…¨æŒæ¡äº† Promiseï¼Ÿ - æ˜é‡‘</a>\n<ul>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise - JavaScript | MDN</a></li>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises">Using Promises - JavaScript | MDN</a></li>\n</ul>\n</li>\n<li>[ä½ å¥½ï¼ŒJavaScript å¼‚æ­¥ç¼–ç¨‹---- ç†è§£ JavaScript å¼‚æ­¥çš„ç¾å¦™](<a href="https://juejin.cn/post/6844903648162480142">https://juejin.cn/post/6844903648162480142</a> <a href="https://juejin.cn/post/6844903648162480142">https://juejin.cn/post/6844903648162480142</a>)</li>\n<li>[Promise ä¸ä¼šï¼Ÿï¼Ÿçœ‹è¿™é‡Œï¼ï¼ï¼å²ä¸Šæœ€é€šä¿—æ˜“æ‡‚çš„ Promiseï¼ï¼ï¼](<a href="https://juejin.cn/post/6844903607968481287">https://juejin.cn/post/6844903607968481287</a> <a href="https://juejin.cn/post/6844903607968481287">https://juejin.cn/post/6844903607968481287</a>)</li>\n<li>[å½“ async/await é‡ä¸Š forEach](<a href="https://link.juejin.cn?target=https%3A%2F%2Fobjcer.com%2F2017%2F10%2F12%2Fasync-await-with-forEach%2F">https://link.juejin.cn?target=https%3A%2F%2Fobjcer.com%2F2017%2F10%2F12%2Fasync-await-with-forEach%2F</a> <a href="https://objcer.com/2017/10/12/async-await-with-forEach/">https://objcer.com/2017/10/12/async-await-with-forEach/</a>)</li>\n<li>[Promise å¿…çŸ¥å¿…ä¼šï¼ˆåé“é¢˜ï¼‰](<a href="https://juejin.cn/post/6844903509934997511">https://juejin.cn/post/6844903509934997511</a> <a href="https://juejin.cn/post/6844903509934997511">https://juejin.cn/post/6844903509934997511</a>)</li>\n</ul>\n<h3 id="write-a-promise">Write a Promise<a class="anchor" href="#write-a-promise"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>â­<a href="https://promisesaplus.com/">Promises/A+</a>\n<ul>\n<li>ğŸ› ï¸<a href="https://promisesaplus.com/implementations">Conformant Promises/A+ Implementations</a></li>\n<li>ğŸ› ï¸<a href="https://github.com/promises-aplus">Promises/A+ Â· GitHub</a></li>\n</ul>\n</li>\n<li>ğŸš€<a href="https://juejin.cn/post/7274887531271012388#heading-13">æ‰‹å†™ Promiseï¼šå®ç°ç¬¦åˆ Promises/A+è§„èŒƒçš„ Promise - æ˜é‡‘</a></li>\n<li>ğŸš€<a href="https://www.bilibili.com/video/BV1RR4y1p7my/?vd_source=be278a4cfd00a5f72dcf153eaca79333">æ‰‹å†™ Promise æ ¸å¿ƒä»£ç  - JavaScript å‰ç«¯ Web å·¥ç¨‹å¸ˆ_å“”å“©å“”å“©_bilibili</a>\n<ul>\n<li><a href="https://juejin.cn/post/7043758954496655397#heading-14">æ‰‹æŠŠæ‰‹ä¸€è¡Œä¸€è¡Œä»£ç æ•™ä½ â€œæ‰‹å†™ Promiseâ€œï¼Œå®Œç¾é€šè¿‡ Promises/A+ å®˜æ–¹ 872 ä¸ªæµ‹è¯•ç”¨ä¾‹ - æ˜é‡‘</a></li>\n</ul>\n</li>\n<li>[Promise å®ç°åŸç†ï¼ˆé™„æºç ï¼‰](<a href="https://juejin.cn/post/6844903665686282253">https://juejin.cn/post/6844903665686282253</a> <a href="https://juejin.cn/post/6844903665686282253">https://juejin.cn/post/6844903665686282253</a>)</li>\n<li>[100 è¡Œä»£ç å®ç° Promises/A+ è§„èŒƒ](<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqdJ0Xd8zTgtetFdlJL3P1g">https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqdJ0Xd8zTgtetFdlJL3P1g</a> <a href="https://mp.weixin.qq.com/s/qdJ0Xd8zTgtetFdlJL3P1g">https://mp.weixin.qq.com/s/qdJ0Xd8zTgtetFdlJL3P1g</a>)</li>\n<li>[ä¸€èµ·å­¦ä¹ é€ è½®å­ï¼ˆä¸€ï¼‰ï¼šä»é›¶å¼€å§‹å†™ä¸€ä¸ªç¬¦åˆ Promises/A+è§„èŒƒçš„ promise](<a href="https://juejin.cn/post/6844903617619558408#heading-34">https://juejin.cn/post/6844903617619558408#heading-34</a> <a href="https://juejin.cn/post/6844903617619558408#heading-34">https://juejin.cn/post/6844903617619558408#heading-34</a>)</li>\n<li>[BAT å‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™ Promise æ•™ç¨‹](<a href="https://juejin.cn/post/6844903625769091079#heading-9">https://juejin.cn/post/6844903625769091079#heading-9</a> <a href="https://juejin.cn/post/6844903625769091079#heading-9">https://juejin.cn/post/6844903625769091079#heading-9</a>)</li>\n</ul>',frontmatter={Datereviewed:null,reviewed:null,difficulty:null,comment:null,aliases:["Promise"],type:"D",title:"Promise",DateStarted:"2022-12-09T00:00:00.000Z",DateModified:"2024-04-25T00:00:00.000Z",status:null,topic:["Async"],tags:["JavaScript"],category:"Programming",draft:!0,"linter-yaml-title-alias":"Promise",minutes:7,words:1468},file="E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/js/data-fetching/promise.md",url=void 0;function rawContent(){return"\n# Promise\n\n## What is a Promise?\n\nPromise æ˜¯ä¸€ç§åœ¨ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ç¼–ç¨‹æ¨¡å¼ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªå°šæœªå®Œæˆä½†é¢„è®¡åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å®Œæˆçš„æ“ä½œçš„ç»“æœã€‚Promise å…è®¸æˆ‘ä»¬ä»¥æ›´ç®€æ´ã€æ˜“è¯»çš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…äº†ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰é—®é¢˜ã€‚\n\n- A promise is a returned **object** to which you attach callbacks, instead of passing callbacks into a function.\n- It represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\n\n### Promise 3 ç§çŠ¶æ€\n\n- **pending**: initial state, neither fulfilled nor rejected.\n- **fulfilled** (resolved): meaning that the operation was completed successfully.\n- **rejected**: meaning that the operation failed\n- ![](https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState-1.png) ![](https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/z-PromiseState.png)\n\n### Promise æ ¸å¿ƒç‰¹ç‚¹\n\n1. ? Promise å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶çŠ¶æ€å°±ä¸èƒ½å†è¢«æ”¹å˜ã€‚\n2. Promise çŠ¶æ€åªèƒ½ä» pending å˜ä¸º fulfilled æˆ– rejectedï¼Œä¸èƒ½é€†å‘æ”¹å˜ï¼Œä¸”åªèƒ½æ”¹å˜ä¸€æ¬¡ã€‚\n3. Promise å…è®¸æˆ‘ä»¬å°†æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†å‡½æ•°åˆ†å¼€ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚\n\n### Promise ç¼ºç‚¹\n\n1. æ— æ³•å–æ¶ˆï¼šä¸€æ—¦åˆ›å»ºäº† Promiseï¼Œå°±æ— æ³•å–æ¶ˆå®ƒã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸å†éœ€è¦ç»“æœçš„å¼‚æ­¥æ“ä½œä»ç„¶åœ¨æ‰§è¡Œã€‚\n2. æ€»æ˜¯å¼‚æ­¥ï¼šPromise çš„å›è°ƒæ€»æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œå³ä½¿æ“ä½œå·²ç»å®Œæˆã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„å¤–çš„è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œé¡ºåºæ•æ„Ÿçš„æƒ…å†µä¸‹ã€‚\n3. è°ƒè¯•å›°éš¾ï¼šç”±äº Promise çš„é“¾å¼è°ƒç”¨å’Œå¼‚æ­¥ç‰¹æ€§ï¼Œè°ƒè¯• Promise å¯èƒ½æ¯”è°ƒè¯•åŒæ­¥ä»£ç æ›´å…·æŒ‘æˆ˜æ€§ã€‚é”™è¯¯å †æ ˆå¯èƒ½ä¸å¤Ÿæ¸…æ™°ï¼Œéš¾ä»¥ç¡®å®šé—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚\n\n### æ‰§è¡Œç‰¹ç‚¹\n\n- Promise åªä»¥`ç¬¬ä¸€æ¬¡ä¸ºå‡†`ï¼Œç¬¬ä¸€æ¬¡æˆåŠŸå°±`æ°¸ä¹…`ä¸º`fulfilled`ï¼Œç¬¬ä¸€æ¬¡å¤±è´¥å°±æ°¸è¿œçŠ¶æ€ä¸º`rejected`\n- Promise ä¸­æœ‰ `throw` çš„è¯ï¼Œå°±ç›¸å½“äºæ‰§è¡Œäº†`reject`\n\n```js\nlet p1 = new Promise((resolve, reject) => {\n\tresolve(æˆåŠŸ);\n\treject(å¤±è´¥);\n});\nconsole.log(p1, p1);\n\nlet p2 = new Promise((resolve, reject) => {\n\treject(å¤±è´¥);\n\tresolve(æˆåŠŸ);\n});\nconsole.log(p2, p2);\n\nlet p3 = new Promise((resolve, reject) => {\n\tthrow æŠ¥é”™;\n});\nconsole.log(p3, p3);\n```\n\n### Pending State ç‰¹ç‚¹\n\n- Promise é‡Œæ²¡æœ‰æ‰§è¡Œ`resolve`ã€`reject`ä»¥åŠ`throw`çš„è¯ï¼Œè¿™ä¸ª promise çš„çŠ¶æ€ä¹Ÿæ˜¯`pending`\n- `pending`çŠ¶æ€ä¸‹çš„ promise ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°`then()`\n\n```js\nlet myPromise1 = new Promise(() => {});\nconsole.log(myPromise1 :>> , myPromise1);\nlet myPromise2 = new Promise((resolve, reject) => {\n\tlet a = 1;\n\tfor (let index = 0; index < 5; index++) {\n\t\ta++;\n\t}\n});\nconsole.log(myPromise2 :>> , myPromise2);\nmyPromise2.then(() => {\n\tconsole.log(myPromise2æ‰§è¡Œäº†then); // åœ¨ Promise pending çŠ¶æ€ä¸‹ä¸ä¼šæ‰§è¡Œ\n});\n```\n\n## å¸¸è§ç”¨æ³•\n\n1. åˆ›å»º Promise å¯¹è±¡ï¼šé€šè¿‡`new Promise(executor)`åˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡ï¼Œå…¶ä¸­ executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ rejectã€‚æˆåŠŸæ—¶è°ƒç”¨ resolve å‡½æ•°å¹¶ä¼ é€’ç»“æœï¼Œå¤±è´¥æ—¶è°ƒç”¨ reject å‡½æ•°å¹¶ä¼ é€’åŸå› ã€‚\n2. é“¾å¼è°ƒç”¨ï¼šé€šè¿‡`.then()`æ–¹æ³•å¤„ç† fulfilled çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º fulfilled æ—¶è°ƒç”¨ã€‚`.catch()`æ–¹æ³•å¤„ç† rejected çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“ Promise çŠ¶æ€å˜ä¸º rejected æ—¶è°ƒç”¨ã€‚\n3. Promise.allï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå½“æ‰€æœ‰ Promise éƒ½å˜ä¸º fulfilled çŠ¶æ€æ—¶è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶å€¼ä¸ºæ‰€æœ‰ Promise ç»“æœçš„æ•°ç»„ã€‚å¦‚æœæœ‰ä»»æ„ä¸€ä¸ª Promise å˜ä¸º rejected çŠ¶æ€ï¼Œåˆ™è¿”å›çš„ Promise ä¹Ÿå˜ä¸º rejectedï¼Œä¸”è¿”å›åŸå› æ˜¯ç¬¬ä¸€ä¸ª rejected çš„ Promise çš„åŸå› ã€‚\n4. Promise.raceï¼šæ¥å—ä¸€ä¸ª Promise æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶çŠ¶æ€å’Œç»“æœä¸ç¬¬ä¸€ä¸ªå®Œæˆï¼ˆæ— è®ºæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼‰çš„ Promise ç›¸åŒã€‚\n\n## Create a Promise\n\n### `new Promise()`\n\n#### å‚æ•°è¦æ±‚\n\n- ä½¿ç”¨ `new Promise()` å¿…é¡»è¾“å…¥ä¸€ä¸ªæ‰§è¡Œå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\n```js\nlet myPromise0 = new Promise();\nconsole.log(myPromise0 :>> , myPromise0); // æŠ¥é”™ï¼šTypeError: Promise resolver undefined\n```\n\n##### Case\n\n```js\nfunction makeRequest(location) {\n\treturn new Promise((resolve, reject) => {\n\t\tconsole.log(`Making Request to ${location}`);\n\t\tif (location === Google) {\n\t\t\tresolve(Google says Hi);\n\t\t} else {\n\t\t\treject(We can only talk to Google);\n\t\t}\n\t});\n}\n```\n\n#### â­ æ‰§è¡Œé¡ºåº\n\n- Promise æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œ`promise.then`Â  ä¸­çš„å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„\n\n##### Case\n\n```js\nconst promise = new Promise((resolve, reject) => {\n\tconsole.log(1);\n\tresolve();\n\tconsole.log(2);\n});\npromise.then(() => {\n\tconsole.log(3);\n});\nconsole.log(4);\n```\n\n##### Output\n\n```shell\n1\n2\n4\n3\n```\n\n### `Promise.resolve()`\n\nå°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡\n\n```js\nPromise.resolve(foo);\n// ç­‰ä»·äº\nnew Promise((resolve) => resolve(foo));\n```\n\n#### å‚æ•°çš„å››ç§æƒ…å†µ\n\n1. å¦‚æœå‚æ•°æ˜¯ `Promise` å®ä¾‹\n   - é‚£ä¹ˆ `Promise.resolve()` å°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚\n2. å‚æ•°æ˜¯ä¸€ä¸ª thenable (å…·æœ‰`then`æ–¹æ³•çš„å¯¹è±¡) å¯¹è±¡\n   - ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º `Promise` å¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œ thenable å¯¹è±¡çš„ `then`æ–¹æ³•\n3. å‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰`then`æ–¹æ³•çš„å¯¹è±¡\n   - åˆ™`Promise.resolve`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Â `Promise`Â  å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º`resolved`\n4. `Promise.resolve()`æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°\n   - ç›´æ¥è¿”å›ä¸€ä¸ª `resolved`çŠ¶æ€çš„ `Promise` å¯¹è±¡ã€‚\n\n#### Example\n\n```js\nconst tick = Date.now();\nconst log = (v) => console.log(`${v} \\n Elapsed: ${Date.now() - tick}ms`);\nconst codeBlocker = () => {\n\t// Blocking\n\t// let i = 0;\n\t// while(i < 1000000000) { i++;}\n\t// return 'ğŸ· billion loops done';\n\n\t// Async blocking\n\t// return new Promise((resolve, reject) => {\n\t// let i = 0;\n\t// while(i < 1000000000) { i++;}\n\t// resolve('ğŸ· billion loops done');\n\t// })\n\n\t// Non-blocking\n\treturn Promise.resolve().then((v) => {\n\t\tlet i = 0;\n\t\twhile (i < 1000000000) {\n\t\t\ti++;\n\t\t}\n\t\treturn ğŸ· billion loops done;\n\t});\n};\nlog(ğŸ¥ª Synchronous 1);\ncodeBlocker().then(log);\nlog(ğŸ¥ª Synchronous 2);\n```\n\n### `Promise.reject()`\n\n- `Promise.reject()`æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º`reject`çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°\n\n```js\nconst thenable = {\n\tthen(resolve, reject) {\n\t\treject(å‡ºé”™äº†);\n\t},\n};\nPromise.reject(thenable).catch((e) => {\n\tconsole.log(e === thenable);\n});\n// true\n```\n\n## [Promise Chaining-é“¾å¼è°ƒç”¨](promise-chaining-é“¾å¼è°ƒç”¨)\n\n## [Promise Composition-ç»„åˆè°ƒç”¨](promise-composition-ç»„åˆè°ƒç”¨)\n\n## Reference\n\n- â­[é€šä¿—æ˜“æ‡‚çš„ Promise çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œæ£€éªŒä¸€ä¸‹ä½ æ˜¯å¦çœŸçš„å®Œå…¨æŒæ¡äº† Promiseï¼Ÿ - æ˜é‡‘](https://juejin.cn/post/7020335414980378655)\n  - [Promise - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n  - [Using Promises - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)\n- [ä½ å¥½ï¼ŒJavaScript å¼‚æ­¥ç¼–ç¨‹---- ç†è§£ JavaScript å¼‚æ­¥çš„ç¾å¦™](https://juejin.cn/post/6844903648162480142 https://juejin.cn/post/6844903648162480142)\n- [Promise ä¸ä¼šï¼Ÿï¼Ÿçœ‹è¿™é‡Œï¼ï¼ï¼å²ä¸Šæœ€é€šä¿—æ˜“æ‡‚çš„ Promiseï¼ï¼ï¼](https://juejin.cn/post/6844903607968481287 https://juejin.cn/post/6844903607968481287)\n- [å½“ async/await é‡ä¸Š forEach](https://link.juejin.cn?target=https%3A%2F%2Fobjcer.com%2F2017%2F10%2F12%2Fasync-await-with-forEach%2F https://objcer.com/2017/10/12/async-await-with-forEach/)\n- [Promise å¿…çŸ¥å¿…ä¼šï¼ˆåé“é¢˜ï¼‰](https://juejin.cn/post/6844903509934997511 https://juejin.cn/post/6844903509934997511)\n\n### Write a Promise\n\n- â­[Promises/A+](https://promisesaplus.com/)\n  - ğŸ› ï¸[Conformant Promises/A+ Implementations](https://promisesaplus.com/implementations)\n  - ğŸ› ï¸[Promises/A+ Â· GitHub](https://github.com/promises-aplus)\n- ğŸš€[æ‰‹å†™ Promiseï¼šå®ç°ç¬¦åˆ Promises/A+è§„èŒƒçš„ Promise - æ˜é‡‘](https://juejin.cn/post/7274887531271012388#heading-13)\n- ğŸš€[æ‰‹å†™ Promise æ ¸å¿ƒä»£ç  - JavaScript å‰ç«¯ Web å·¥ç¨‹å¸ˆ\\_å“”å“©å“”å“©\\_bilibili](https://www.bilibili.com/video/BV1RR4y1p7my/?vd_source=be278a4cfd00a5f72dcf153eaca79333)\n  - [æ‰‹æŠŠæ‰‹ä¸€è¡Œä¸€è¡Œä»£ç æ•™ä½ â€œæ‰‹å†™ Promiseâ€œï¼Œå®Œç¾é€šè¿‡ Promises/A+ å®˜æ–¹ 872 ä¸ªæµ‹è¯•ç”¨ä¾‹ - æ˜é‡‘](https://juejin.cn/post/7043758954496655397#heading-14)\n- [Promise å®ç°åŸç†ï¼ˆé™„æºç ï¼‰](https://juejin.cn/post/6844903665686282253 https://juejin.cn/post/6844903665686282253)\n- [100 è¡Œä»£ç å®ç° Promises/A+ è§„èŒƒ](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqdJ0Xd8zTgtetFdlJL3P1g https://mp.weixin.qq.com/s/qdJ0Xd8zTgtetFdlJL3P1g)\n- [ä¸€èµ·å­¦ä¹ é€ è½®å­ï¼ˆä¸€ï¼‰ï¼šä»é›¶å¼€å§‹å†™ä¸€ä¸ªç¬¦åˆ Promises/A+è§„èŒƒçš„ promise](https://juejin.cn/post/6844903617619558408#heading-34 https://juejin.cn/post/6844903617619558408#heading-34)\n- [BAT å‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™ Promise æ•™ç¨‹](https://juejin.cn/post/6844903625769091079#heading-9 https://juejin.cn/post/6844903625769091079#heading-9)\n"}function compiledContent(){return html}function getHeadings(){return[{depth:1,slug:"promise",text:"Promise#"},{depth:2,slug:"what-is-a-promise",text:"What is a Promise?#"},{depth:3,slug:"promise-3-ç§çŠ¶æ€",text:"Promise 3 ç§çŠ¶æ€#"},{depth:3,slug:"promise-æ ¸å¿ƒç‰¹ç‚¹",text:"Promise æ ¸å¿ƒç‰¹ç‚¹#"},{depth:3,slug:"promise-ç¼ºç‚¹",text:"Promise ç¼ºç‚¹#"},{depth:3,slug:"æ‰§è¡Œç‰¹ç‚¹",text:"æ‰§è¡Œç‰¹ç‚¹#"},{depth:3,slug:"pending-state-ç‰¹ç‚¹",text:"Pending State ç‰¹ç‚¹#"},{depth:2,slug:"å¸¸è§ç”¨æ³•",text:"å¸¸è§ç”¨æ³•#"},{depth:2,slug:"create-a-promise",text:"Create a Promise#"},{depth:3,slug:"new-promise",text:"new Promise()#"},{depth:4,slug:"å‚æ•°è¦æ±‚",text:"å‚æ•°è¦æ±‚#"},{depth:5,slug:"case",text:"Case#"},{depth:4,slug:"-æ‰§è¡Œé¡ºåº",text:"â­ æ‰§è¡Œé¡ºåº#"},{depth:5,slug:"case-1",text:"Case#"},{depth:5,slug:"output",text:"Output#"},{depth:3,slug:"promiseresolve",text:"Promise.resolve()#"},{depth:4,slug:"å‚æ•°çš„å››ç§æƒ…å†µ",text:"å‚æ•°çš„å››ç§æƒ…å†µ#"},{depth:4,slug:"example",text:"Example#"},{depth:3,slug:"promisereject",text:"Promise.reject()#"},{depth:2,slug:"promise-chaining-é“¾å¼è°ƒç”¨",text:"Promise Chaining-é“¾å¼è°ƒç”¨#"},{depth:2,slug:"promise-composition-ç»„åˆè°ƒç”¨",text:"Promise Composition-ç»„åˆè°ƒç”¨#"},{depth:2,slug:"reference",text:"Reference#"},{depth:3,slug:"write-a-promise",text:"Write a Promise#"}]}const Content=createComponent(((s,n,e)=>{const{layout:o,...a}=frontmatter;return a.file=file,a.url=url,renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`})),promise=Object.freeze(Object.defineProperty({__proto__:null,Content:Content,compiledContent:compiledContent,default:Content,file:file,frontmatter:frontmatter,getHeadings:getHeadings,rawContent:rawContent,url:url},Symbol.toStringTag,{value:"Module"}));export{_internal,body,collection,data,id,promise,slug};