import{createComponent,renderTemplate,maybeRenderHead,unescapeHTML}from"../../../../chunks/1726300354279/astro.mjs";import"kleur/colors";import"clsx";import"html-escaper";import"cssesc";const id="front-end-frameworks/next.js/03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º.md",collection="posts",slug="front-end-frameworks/nextjs/03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º",body='\n### å‰è¨€\n\næœ¬æ–‡å°†åˆ†äº« React, Next.js å®ç°é¢„åŠ è½½ï¼Œä»¥åŠå¯Œæ–‡æœ¬å†…å®¹å±•ç¤ºçš„æ–¹æ³•ã€‚\n\n### æŠ€æœ¯æ ˆ\n\nå‰ç«¯ï¼šReact, Next.js, Tailwind CSS , TypeScript  \nåç«¯ -CMSï¼šSanity\n\n### Next.jsï¼šè·å–é¢„åŠ è½½å†…å®¹\n\n- åŸç†ï¼šincremental static regenerationï¼ˆå®šæ—¶æ¸²æŸ“ï¼‰\n- æ‰“å¼€ /pagesï¼Œæ–°å»º /post> **[slug].tsx**ï¼Œè¯¥æ–‡ä»¶ç”¨äºå±•ç¤ºåšæ–‡å†…å®¹\n- åŠ å…¥ç»„ä»¶/å‡½æ•°\n- [slug].tsx(Import)\n\n```tsx TI:"[slug].tsx"\nimport { GetStaticProps } from "next";\nimport { sanityClient, urlFor } from "sanity";\n```\n\n#### 1. ğŸ’¡ éš¾ç‚¹ï¼šåœ¨ [slug].tsx å®šä¹‰ä¸‹åˆ—å‡½æ•°\n\n- getStaticPaths: æ¥è‡ª Sanity\n- getStaticProps: æ¥è‡ª Next.js\n\n```tsx\nexport const getStaticPaths = async () => {\n\tconst query = `*[_type =="post"]{ _id, slug { current } }`;\n\tconst posts = await sanityClient.fetch(query);\n\tconst paths = posts.map((post: Post) => ({\n\t\tparams: {\n\t\t\tslug: post.slug.current,\n\t\t},\n\t}));\n\treturn {\n\t\tpaths,\n\t\tfallback: "blocking",\n\t};\n};\n```\n\n```tsx\nexport const getStaticProps: GetStaticProps = async ({ params }) => {\n\tconst query = `*[_type =="post" && slug.current == $slug][0]{ _id, _createdAt, title, author->{ name, image }, \'comments\': *[ _type== "comment" && post._ref ==^._id && approved == true], description, mainImage, slug, body }`;\n\tconst post = await sanityClient.fetch(query, {\n\t\tslug: params?.slug,\n\t});\n\tif (!post) {\n\t\treturn {\n\t\t\tnotFound: true,\n\t\t};\n\t}\n\treturn {\n\t\tprops: { post },\n\t\trevalidate: 60, // after 60 seconds, it\'ll update old cached version\n\t};\n};\n```\n\n### é˜…è¯»é¡µå¤´éƒ¨ï¼šæ ·å¼\n\n- å‚è€ƒï¼š[Tailwind CSS å®˜æ–¹æ–‡æ¡£](https://tailwindcss.com/docs/guides/create-react-app)\n\n```tsx\n<Header />\n{/_ Banner _/}\n<img\n  className="w-full h-40 object-cover"\n  src={urlFor(post.mainImage).url()!}\n  alt=""\n/>\n<article className="max-w-3xl mx-auto p-5">\n  <h1 className="text-3xl mt-10 mb-3">{post.title}</h1>\n  <h2 className="text-xl font-light text-grey-500 mb-2">\n  \t{post.description}\n  </h2>\n  <div className="flex items-center space-x-2">\n    <img\n      className="h-10 w-10 rounded-full"\n      src={urlFor(post.author.image).url()!}\n      alt=""\n    />\n    <p className="font-extralight text-sm">\n      Blog post by{" "}\n    \t<span className="text-green-600">{post.author.name}</span> -\n      Published at {new Date(post._createdAt).toLocaleString()}\n  \t</p>\n\t</div>\n    {/* Display Rich Content */}\n</article>\n```\n\n### å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º\n\n- ä¸‹è½½ç»„ä»¶ï¼š`npm i react-portable-text`\n- import PortableText from "react-portable-text";\n\n```tsx\n{\n\t/_ Display Rich Content _/;\n}\n<div className="mt-10">\n\t<PortableText\n\t\tclassName=""\n\t\tdataset={process.env.NEXT_PUBLIC_SANITY_DATASET!}\n\t\tprojectId={process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!}\n\t\tcontent={post.body}\n\t\tserializers={{\n\t\t\th1: (props: any) => <h1 className="text-2xl font-bold my-5" {...props} />,\n\t\t\th2: (props: any) => <h1 className="text-xl font-bold my-5" {...props} />,\n\t\t\tli: ({ children }: any) => <li className="ml-4 list-disc">{children}</li>,\n\t\t\tlink: ({ href, children }: any) => (\n\t\t\t\t<a href={href} className="text-blue-500 hover:underline">\n\t\t\t\t\t{children}\n\t\t\t\t</a>\n\t\t\t),\n\t\t}}\n\t/>\n</div>;\n```\n',data={title:"03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º",DateStarted:new Date(1667952e6),draft:!0,tags:["NextJS"],category:"Front-End Frameworks"},_internal={type:"content",filePath:"E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/front-end-frameworks/next.js/03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º.md",rawData:void 0},html='<h3 id="å‰è¨€">å‰è¨€<a class="anchor" href="#å‰è¨€"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<p>æœ¬æ–‡å°†åˆ†äº« React, Next.js å®ç°é¢„åŠ è½½ï¼Œä»¥åŠå¯Œæ–‡æœ¬å†…å®¹å±•ç¤ºçš„æ–¹æ³•ã€‚</p>\n<h3 id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ<a class="anchor" href="#æŠ€æœ¯æ ˆ"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<p>å‰ç«¯ï¼šReact, Next.js, Tailwind CSS , TypeScript<br>\nåç«¯ -CMSï¼šSanity</p>\n<h3 id="nextjsè·å–é¢„åŠ è½½å†…å®¹">Next.jsï¼šè·å–é¢„åŠ è½½å†…å®¹<a class="anchor" href="#nextjsè·å–é¢„åŠ è½½å†…å®¹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>åŸç†ï¼šincremental static regenerationï¼ˆå®šæ—¶æ¸²æŸ“ï¼‰</li>\n<li>æ‰“å¼€ /pagesï¼Œæ–°å»º /post> <strong>[slug].tsx</strong>ï¼Œè¯¥æ–‡ä»¶ç”¨äºå±•ç¤ºåšæ–‡å†…å®¹</li>\n<li>åŠ å…¥ç»„ä»¶/å‡½æ•°</li>\n<li>[slug].tsx(Import)</li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { GetStaticProps } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "next"</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { sanityClient, urlFor } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "sanity"</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"></span></code></pre>\n<h4 id="1--éš¾ç‚¹åœ¨-slugtsx-å®šä¹‰ä¸‹åˆ—å‡½æ•°">1. ğŸ’¡ éš¾ç‚¹ï¼šåœ¨ [slug].tsx å®šä¹‰ä¸‹åˆ—å‡½æ•°<a class="anchor" href="#1--éš¾ç‚¹åœ¨-slugtsx-å®šä¹‰ä¸‹åˆ—å‡½æ•°"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<ul>\n<li>getStaticPaths: æ¥è‡ª Sanity</li>\n<li>getStaticProps: æ¥è‡ª Next.js</li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> getStaticPaths</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#F97583">\tconst</span><span style="color:#79B8FF"> query</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `*[_type =="post"]{ _id, slug { current } }`</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">\tconst</span><span style="color:#79B8FF"> posts</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> sanityClient.</span><span style="color:#B392F0">fetch</span><span style="color:#E1E4E8">(query);</span></span>\n<span class="line"><span style="color:#F97583">\tconst</span><span style="color:#79B8FF"> paths</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> posts.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">post</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Post</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tparams: {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tslug: post.slug.current,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t},</span></span>\n<span class="line"><span style="color:#E1E4E8">\t}));</span></span>\n<span class="line"><span style="color:#F97583">\treturn</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tpaths,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tfallback: </span><span style="color:#9ECBFF">"blocking"</span><span style="color:#E1E4E8">,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t};</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"></span></code></pre>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> getStaticProps</span><span style="color:#F97583">:</span><span style="color:#B392F0"> GetStaticProps</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">params</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#F97583">\tconst</span><span style="color:#79B8FF"> query</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `*[_type =="post" &#x26;&#x26; slug.current == $slug][0]{ _id, _createdAt, title, author->{ name, image }, \'comments\': *[ _type== "comment" &#x26;&#x26; post._ref ==^._id &#x26;&#x26; approved == true], description, mainImage, slug, body }`</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">\tconst</span><span style="color:#79B8FF"> post</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> sanityClient.</span><span style="color:#B392F0">fetch</span><span style="color:#E1E4E8">(query, {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tslug: params?.slug,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t});</span></span>\n<span class="line"><span style="color:#F97583">\tif</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">post) {</span></span>\n<span class="line"><span style="color:#F97583">\t\treturn</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tnotFound: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t};</span></span>\n<span class="line"><span style="color:#E1E4E8">\t}</span></span>\n<span class="line"><span style="color:#F97583">\treturn</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tprops: { post },</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\trevalidate: </span><span style="color:#79B8FF">60</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// after 60 seconds, it\'ll update old cached version</span></span>\n<span class="line"><span style="color:#E1E4E8">\t};</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"></span></code></pre>\n<h3 id="é˜…è¯»é¡µå¤´éƒ¨æ ·å¼">é˜…è¯»é¡µå¤´éƒ¨ï¼šæ ·å¼<a class="anchor" href="#é˜…è¯»é¡µå¤´éƒ¨æ ·å¼"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>å‚è€ƒï¼š<a href="https://tailwindcss.com/docs/guides/create-react-app">Tailwind CSS å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">Header</span><span style="color:#E1E4E8"> /></span></span>\n<span class="line"><span style="color:#E1E4E8">{</span><span style="color:#9ECBFF">/</span><span style="color:#DBEDFF">_ Banner _</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">img</span></span>\n<span class="line"><span style="color:#B392F0">  className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"w-full h-40 object-cover"</span></span>\n<span class="line"><span style="color:#B392F0">  src</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#B392F0">urlFor</span><span style="color:#E1E4E8">(post.mainImage).</span><span style="color:#B392F0">url</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">  alt</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">""</span></span>\n<span class="line"><span style="color:#E1E4E8">/></span></span>\n<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">article</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"max-w-3xl mx-auto p-5"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-3xl mt-10 mb-3"</span><span style="color:#E1E4E8">>{post.title}&#x3C;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">h2</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-xl font-light text-grey-500 mb-2"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">  \t{post.description}</span></span>\n<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"flex items-center space-x-2"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">img</span></span>\n<span class="line"><span style="color:#B392F0">      className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"h-10 w-10 rounded-full"</span></span>\n<span class="line"><span style="color:#B392F0">      src</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#B392F0">urlFor</span><span style="color:#E1E4E8">(post.author.image).</span><span style="color:#B392F0">url</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">      alt</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">""</span></span>\n<span class="line"><span style="color:#E1E4E8">    /></span></span>\n<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"font-extralight text-sm"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">      Blog post by{</span><span style="color:#9ECBFF">" "</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#E1E4E8">    \t&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-green-600"</span><span style="color:#E1E4E8">>{post.author.name}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> -</span></span>\n<span class="line"><span style="color:#E1E4E8">      Published at {</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Date</span><span style="color:#E1E4E8">(post._createdAt).</span><span style="color:#B392F0">toLocaleString</span><span style="color:#E1E4E8">()}</span></span>\n<span class="line"><span style="color:#E1E4E8">  \t&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">\t&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">    {</span><span style="color:#6A737D">/* Display Rich Content */</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">article</span><span style="color:#E1E4E8">></span></span>\n<span class="line"></span></code></pre>\n<h3 id="å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º">å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º<a class="anchor" href="#å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>ä¸‹è½½ç»„ä»¶ï¼š<code>npm i react-portable-text</code></li>\n<li>import PortableText from â€œreact-portable-textâ€;</li>\n</ul>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">{</span></span>\n<span class="line"><span style="color:#9ECBFF">\t/</span><span style="color:#DBEDFF">_ Display Rich Content _</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"mt-10"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">\t&#x3C;</span><span style="color:#79B8FF">PortableText</span></span>\n<span class="line"><span style="color:#B392F0">\t\tclassName</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">""</span></span>\n<span class="line"><span style="color:#B392F0">\t\tdataset</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{process.env.</span><span style="color:#79B8FF">NEXT_PUBLIC_SANITY_DATASET</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">\t\tprojectId</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{process.env.</span><span style="color:#79B8FF">NEXT_PUBLIC_SANITY_PROJECT_ID</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">\t\tcontent</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{post.body}</span></span>\n<span class="line"><span style="color:#B392F0">\t\tserializers</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{{</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\th1</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">props</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-2xl font-bold my-5"</span><span style="color:#E1E4E8"> {</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">props} />,</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\th2</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">props</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-xl font-bold my-5"</span><span style="color:#E1E4E8"> {</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">props} />,</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\tli</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">children</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"ml-4 list-disc"</span><span style="color:#E1E4E8">>{children}&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">>,</span></span>\n<span class="line"><span style="color:#B392F0">\t\t\tlink</span><span style="color:#E1E4E8">: ({ </span><span style="color:#FFAB70">href</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">children</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> (</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\t\t&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{href} </span><span style="color:#B392F0">className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"text-blue-500 hover:underline"</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\t\t\t{children}</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\t\t&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">></span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\t),</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t}}</span></span>\n<span class="line"><span style="color:#E1E4E8">\t/></span></span>\n<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">>;</span></span>\n<span class="line"></span></code></pre>',frontmatter={topic:null,category:"Front-End Frameworks",Datereviewed:null,reviewed:null,difficulty:null,comment:null,type:"Note",DateModified:"2024-09-14T00:00:00.000Z",title:"03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º",tags:["NextJS"],status:[""],DateStarted:"2022-11-09T00:00:00.000Z","sr-due":"2023-07-02T00:00:00.000Z","sr-interval":4,"sr-ease":273,draft:!0,minutes:2,words:386},file="E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/front-end-frameworks/next.js/03-é¢„åŠ è½½ä¸å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º.md",url=void 0;function rawContent(){return'\n### å‰è¨€\n\næœ¬æ–‡å°†åˆ†äº« React, Next.js å®ç°é¢„åŠ è½½ï¼Œä»¥åŠå¯Œæ–‡æœ¬å†…å®¹å±•ç¤ºçš„æ–¹æ³•ã€‚\n\n### æŠ€æœ¯æ ˆ\n\nå‰ç«¯ï¼šReact, Next.js, Tailwind CSS , TypeScript  \nåç«¯ -CMSï¼šSanity\n\n### Next.jsï¼šè·å–é¢„åŠ è½½å†…å®¹\n\n- åŸç†ï¼šincremental static regenerationï¼ˆå®šæ—¶æ¸²æŸ“ï¼‰\n- æ‰“å¼€ /pagesï¼Œæ–°å»º /post> **[slug].tsx**ï¼Œè¯¥æ–‡ä»¶ç”¨äºå±•ç¤ºåšæ–‡å†…å®¹\n- åŠ å…¥ç»„ä»¶/å‡½æ•°\n- [slug].tsx(Import)\n\n```tsx TI:"[slug].tsx"\nimport { GetStaticProps } from "next";\nimport { sanityClient, urlFor } from "sanity";\n```\n\n#### 1. ğŸ’¡ éš¾ç‚¹ï¼šåœ¨ [slug].tsx å®šä¹‰ä¸‹åˆ—å‡½æ•°\n\n- getStaticPaths: æ¥è‡ª Sanity\n- getStaticProps: æ¥è‡ª Next.js\n\n```tsx\nexport const getStaticPaths = async () => {\n\tconst query = `*[_type =="post"]{ _id, slug { current } }`;\n\tconst posts = await sanityClient.fetch(query);\n\tconst paths = posts.map((post: Post) => ({\n\t\tparams: {\n\t\t\tslug: post.slug.current,\n\t\t},\n\t}));\n\treturn {\n\t\tpaths,\n\t\tfallback: "blocking",\n\t};\n};\n```\n\n```tsx\nexport const getStaticProps: GetStaticProps = async ({ params }) => {\n\tconst query = `*[_type =="post" && slug.current == $slug][0]{ _id, _createdAt, title, author->{ name, image }, \'comments\': *[ _type== "comment" && post._ref ==^._id && approved == true], description, mainImage, slug, body }`;\n\tconst post = await sanityClient.fetch(query, {\n\t\tslug: params?.slug,\n\t});\n\tif (!post) {\n\t\treturn {\n\t\t\tnotFound: true,\n\t\t};\n\t}\n\treturn {\n\t\tprops: { post },\n\t\trevalidate: 60, // after 60 seconds, it\'ll update old cached version\n\t};\n};\n```\n\n### é˜…è¯»é¡µå¤´éƒ¨ï¼šæ ·å¼\n\n- å‚è€ƒï¼š[Tailwind CSS å®˜æ–¹æ–‡æ¡£](https://tailwindcss.com/docs/guides/create-react-app)\n\n```tsx\n<Header />\n{/_ Banner _/}\n<img\n  className="w-full h-40 object-cover"\n  src={urlFor(post.mainImage).url()!}\n  alt=""\n/>\n<article className="max-w-3xl mx-auto p-5">\n  <h1 className="text-3xl mt-10 mb-3">{post.title}</h1>\n  <h2 className="text-xl font-light text-grey-500 mb-2">\n  \t{post.description}\n  </h2>\n  <div className="flex items-center space-x-2">\n    <img\n      className="h-10 w-10 rounded-full"\n      src={urlFor(post.author.image).url()!}\n      alt=""\n    />\n    <p className="font-extralight text-sm">\n      Blog post by{" "}\n    \t<span className="text-green-600">{post.author.name}</span> -\n      Published at {new Date(post._createdAt).toLocaleString()}\n  \t</p>\n\t</div>\n    {/* Display Rich Content */}\n</article>\n```\n\n### å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º\n\n- ä¸‹è½½ç»„ä»¶ï¼š`npm i react-portable-text`\n- import PortableText from "react-portable-text";\n\n```tsx\n{\n\t/_ Display Rich Content _/;\n}\n<div className="mt-10">\n\t<PortableText\n\t\tclassName=""\n\t\tdataset={process.env.NEXT_PUBLIC_SANITY_DATASET!}\n\t\tprojectId={process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!}\n\t\tcontent={post.body}\n\t\tserializers={{\n\t\t\th1: (props: any) => <h1 className="text-2xl font-bold my-5" {...props} />,\n\t\t\th2: (props: any) => <h1 className="text-xl font-bold my-5" {...props} />,\n\t\t\tli: ({ children }: any) => <li className="ml-4 list-disc">{children}</li>,\n\t\t\tlink: ({ href, children }: any) => (\n\t\t\t\t<a href={href} className="text-blue-500 hover:underline">\n\t\t\t\t\t{children}\n\t\t\t\t</a>\n\t\t\t),\n\t\t}}\n\t/>\n</div>;\n```\n'}function compiledContent(){return html}function getHeadings(){return[{depth:3,slug:"å‰è¨€",text:"å‰è¨€#"},{depth:3,slug:"æŠ€æœ¯æ ˆ",text:"æŠ€æœ¯æ ˆ#"},{depth:3,slug:"nextjsè·å–é¢„åŠ è½½å†…å®¹",text:"Next.jsï¼šè·å–é¢„åŠ è½½å†…å®¹#"},{depth:4,slug:"1--éš¾ç‚¹åœ¨-slugtsx-å®šä¹‰ä¸‹åˆ—å‡½æ•°",text:"1. ğŸ’¡ éš¾ç‚¹ï¼šåœ¨ [slug].tsx å®šä¹‰ä¸‹åˆ—å‡½æ•°#"},{depth:3,slug:"é˜…è¯»é¡µå¤´éƒ¨æ ·å¼",text:"é˜…è¯»é¡µå¤´éƒ¨ï¼šæ ·å¼#"},{depth:3,slug:"å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º",text:"å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º#"}]}const Content=createComponent(((s,n,a)=>{const{layout:t,...l}=frontmatter;return l.file=file,l.url=url,renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`})),_03____________=Object.freeze(Object.defineProperty({__proto__:null,Content:Content,compiledContent:compiledContent,default:Content,file:file,frontmatter:frontmatter,getHeadings:getHeadings,rawContent:rawContent,url:url},Symbol.toStringTag,{value:"Module"}));export{_03____________,_internal,body,collection,data,id,slug};