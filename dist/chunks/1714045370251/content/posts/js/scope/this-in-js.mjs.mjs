import{createComponent,renderTemplate,maybeRenderHead,unescapeHTML}from"../../../../astro.mjs";import"kleur/colors";import"clsx";import"html-escaper";import"cssesc";const html='<h1 id="this-in-js">this in JS<a class="anchor" href="#this-in-js"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h1>\n<hr>\n<p>Basic</p>\n<h2 id="å¯¹-this-çš„ç†è§£-ç»‘å®šæ–¹å¼">å¯¹ <code>this</code> çš„ç†è§£ (ç»‘å®šæ–¹å¼)<a class="anchor" href="#å¯¹-this-çš„ç†è§£-ç»‘å®šæ–¹å¼"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<p>Back:</p>\n<blockquote>\n<p><code>this</code> æ˜¯ JavaScript ä¸­ä¸€ä¸ªåŠ¨æ€ä¸Šä¸‹æ–‡çš„å…³é”®å­—ï¼Œå®ƒçš„å€¼å–å†³äºå‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚</p>\n</blockquote>\n<p>åœ¨ JavaScript ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—ï¼Œ<code>this</code> çš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼Œä¸åŒçš„è°ƒç”¨æ–¹å¼ä¼šå¯¼è‡´ <code>this</code> æŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³äº <code>this</code> çš„ä¸åŒç”¨æ³•å’Œåœºæ™¯ï¼š</p>\n<h4 id="1-å…¨å±€ä¸Šä¸‹æ–‡">1. å…¨å±€ä¸Šä¸‹æ–‡<a class="anchor" href="#1-å…¨å±€ä¸Šä¸‹æ–‡"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>å½“åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä½¿ç”¨ <code>this</code> æ—¶ï¼Œå®ƒæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ <code>window</code>ï¼›åœ¨ Node.js ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ <code>global</code>ã€‚</p>\n<h4 id="2-å‡½æ•°è°ƒç”¨-é»˜è®¤ç»‘å®š">2. å‡½æ•°è°ƒç”¨ (é»˜è®¤ç»‘å®š)<a class="anchor" href="#2-å‡½æ•°è°ƒç”¨-é»˜è®¤ç»‘å®š"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>å½“åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>this</code> ä¸”å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼ˆéå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œ<code>this</code> é€šå¸¸æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆä½¿ç”¨ <code>"use strict"</code>ï¼‰ï¼Œ<code>this</code> ä¼šè¢«è®¾ç½®ä¸º <code>undefined</code>ã€‚<br>\nå®šæ—¶å™¨ä¸­çš„ this æŒ‡å‘ window</p>\n<h4 id="3-å¯¹è±¡æ–¹æ³•è°ƒç”¨-éšå¼ç»‘å®š">3. å¯¹è±¡æ–¹æ³•è°ƒç”¨ (éšå¼ç»‘å®š)<a class="anchor" href="#3-å¯¹è±¡æ–¹æ³•è°ƒç”¨-éšå¼ç»‘å®š"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<ul>\n<li>å½“åœ¨å¯¹è±¡çš„æ–¹æ³•å†…éƒ¨ä½¿ç”¨ <code>this</code> æ—¶ï¼Œ<code>this</code> æŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚è¿™ä¹Ÿé€‚ç”¨äºåŸå‹é“¾ä¸­çš„æ–¹æ³•ã€‚</li>\n<li>äº‹ä»¶ä¸­çš„ this æŒ‡å‘äº‹ä»¶çš„è°ƒç”¨è€…</li>\n</ul>\n<h4 id="4-æ„é€ å‡½æ•°è°ƒç”¨">4. æ„é€ å‡½æ•°è°ƒç”¨<a class="anchor" href="#4-æ„é€ å‡½æ•°è°ƒç”¨"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>å½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>this</code> ä¸”ä½¿ç”¨ <code>new</code> å…³é”®å­—è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œ<code>this</code> æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚<br>\nç±» class ä¸­çš„ this æŒ‡å‘ç”± constructor æ„é€ å™¨ new å‡ºæ¥çš„å®ä¾‹å¯¹è±¡</p>\n<h4 id="5-æ˜¾å¼ç»‘å®š">5. æ˜¾å¼ç»‘å®š<a class="anchor" href="#5-æ˜¾å¼ç»‘å®š"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>ä½¿ç”¨ <code>call</code>ã€<code>apply</code> æˆ– <code>bind</code> æ–¹æ³•è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥æ˜¾å¼åœ°å°† <code>this</code> ç»‘å®šåˆ°ä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡ã€‚</p>\n<h4 id="6-ç®­å¤´å‡½æ•°">6. ç®­å¤´å‡½æ•°<a class="anchor" href="#6-ç®­å¤´å‡½æ•°"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼Œå®ƒä»åŒ…å›´å®ƒçš„æ™®é€šå‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸç»§æ‰¿ <code>this</code>ã€‚è¿™ä½¿å¾—åœ¨äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬è‡ªåŠ¨æ•è·å¤–éƒ¨çš„ <code>this</code>ã€‚</p>\n<ul>\n<li>åœ¨äº‹ä»¶å›è°ƒæˆ–å®šæ—¶å›è°ƒä¸­è°ƒç”¨æŸä¸ªå‡½æ•°æ—¶\n<ul>\n<li><img src="https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/1fc4c4837ed533b9b66067107fee23b3.png" alt="image"></li>\n<li>`setTimeout(() =console.log(this.royaltyName), 1000);</li>\n</ul>\n</li>\n</ul>\n<p>ğŸ“Œ: JS::JS-Function<br>\nğŸ·ï¸: JS-Function</p>\n\x3c!--ID: 1708065505751--\x3e\n<hr>\n<h4 id="2-this-é¢˜ç›®-1">2. this é¢˜ç›® 1<a class="anchor" href="#2-this-é¢˜ç›®-1"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">use strict;</span></span>\n<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 10</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// varå®šä¹‰çš„aå˜é‡æŒ‚è½½åˆ°windowå¯¹è±¡ä¸Š</span></span>\n<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> foo</span><span style="color:#E1E4E8">() {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(this1, </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// undefined</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(window.a); </span><span style="color:#6A737D">// 10</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.a); </span><span style="color:#6A737D">//  æŠ¥é”™ï¼ŒUncaught TypeError: Cannot read properties of undefined (reading \'a\')</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(this2, </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// window</span></span>\n<span class="line"><span style="color:#B392F0">foo</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"></span></code></pre>\n<p>æ³¨æ„ï¼šå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œåªæ˜¯ä½¿å¾—å‡½æ•°å†…çš„ this æŒ‡å‘<code>undefined</code>ï¼Œå®ƒå¹¶ä¸ä¼šæ”¹å˜å…¨å±€ä¸­ this çš„æŒ‡å‘ã€‚å› æ­¤<code>this1</code>ä¸­æ‰“å°çš„æ˜¯<code>undefined</code>ï¼Œè€Œ<code>this2</code>è¿˜æ˜¯<code>window</code>å¯¹è±¡ã€‚</p>\n<h4 id="3-this-é¢˜ç›®-2">3. this é¢˜ç›® 2<a class="anchor" href="#3-this-é¢˜ç›®-2"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 10</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> b</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 20</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> foo</span><span style="color:#E1E4E8">() {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.a); </span><span style="color:#6A737D">// undefined</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.b); </span><span style="color:#6A737D">// undefined</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">foo</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(window.a); </span><span style="color:#6A737D">// undefined</span></span>\n<span class="line"><span style="color:#E1E4E8">å¤åˆ¶ä»£ç ;</span></span>\n<span class="line"></span></code></pre>\n<p>å¦‚æœæŠŠ var æ”¹æˆäº† let æˆ– constï¼Œå˜é‡æ˜¯ä¸ä¼šè¢«ç»‘å®šåˆ° window ä¸Šçš„ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šæ‰“å°å‡ºä¸‰ä¸ª undefined</p>\n<h4 id="4-this-é¢˜ç›®-3">4. this é¢˜ç›® 3<a class="anchor" href="#4-this-é¢˜ç›®-3"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> foo</span><span style="color:#E1E4E8">() {</span></span>\n<span class="line"><span style="color:#F97583">\tvar</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// window</span></span>\n<span class="line"><span style="color:#E1E4E8">\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.a); </span><span style="color:#6A737D">// 1</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"><span style="color:#B392F0">foo</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"></span></code></pre>\n<p>foo()å‡½æ•°å†…çš„ this æŒ‡å‘çš„æ˜¯ windowï¼Œå› ä¸ºæ˜¯ window è°ƒç”¨çš„ fooï¼Œæ‰“å°å‡ºçš„<code>this.a</code>æ˜¯ window ä¸‹çš„<code>a</code></p>\n<h4 id="5-this-é¢˜ç›®-4">5. this é¢˜ç›® 4<a class="anchor" href="#5-this-é¢˜ç›®-4"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> obj2 </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\ta: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>\n<span class="line"><span style="color:#B392F0">\tfoo1</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.a); </span><span style="color:#6A737D">// 2</span></span>\n<span class="line"><span style="color:#E1E4E8">\t},</span></span>\n<span class="line"><span style="color:#B392F0">\tfoo2</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>\n<span class="line"><span style="color:#B392F0">\t\tsetTimeout</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// window</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.a); </span><span style="color:#6A737D">// 3</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t}, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t},</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 3</span><span style="color:#E1E4E8">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8">obj2.</span><span style="color:#B392F0">foo1</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#E1E4E8">obj2.</span><span style="color:#B392F0">foo2</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"></span></code></pre>\n<p>å¯¹äº<code>setTimeout</code>ä¸­çš„å‡½æ•°ï¼Œè¿™é‡Œå­˜åœ¨éšå¼ç»‘å®šçš„ this ä¸¢å¤±ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶,ä¼šè¢«éšå¼èµ‹å€¼ï¼Œå›è°ƒå‡½æ•°ä¸¢å¤± this ç»‘å®šï¼Œå› æ­¤è¿™æ—¶å€™ setTimeout ä¸­å‡½æ•°å†…çš„ this æ˜¯æŒ‡å‘<code>window</code></p>\n<h4 id="6-this-é¢˜ç›®-5">6. this é¢˜ç›® 5<a class="anchor" href="#6-this-é¢˜ç›®-5"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> obj </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\tname: obj,</span></span>\n<span class="line"><span style="color:#B392F0">\tfoo1</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.name); </span><span style="color:#6A737D">// window</span></span>\n<span class="line"><span style="color:#E1E4E8">\t},</span></span>\n<span class="line"><span style="color:#B392F0">\tfoo2</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.name); </span><span style="color:#6A737D">// obj</span></span>\n<span class="line"><span style="color:#F97583">\t\treturn</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.name); </span><span style="color:#6A737D">// obj</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t};</span></span>\n<span class="line"><span style="color:#E1E4E8">\t},</span></span>\n<span class="line"><span style="color:#E1E4E8">};</span></span>\n<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> name </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> window;</span></span>\n<span class="line"><span style="color:#E1E4E8">obj.</span><span style="color:#B392F0">foo1</span><span style="color:#E1E4E8">();</span></span>\n<span class="line"><span style="color:#E1E4E8">obj.</span><span style="color:#B392F0">foo2</span><span style="color:#E1E4E8">()();</span></span>\n<span class="line"></span></code></pre>\n<p>è¿™é“é¢˜éå¸¸ç»å…¸ï¼Œå®ƒè¯æ˜äº†<strong>ç®­å¤´å‡½æ•°å†…çš„ this æ˜¯ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šçš„</strong></p>\n<h5 id="61-é¢˜ç›®-5-è§£æ">6.1. é¢˜ç›® 5 è§£æï¼š<a class="anchor" href="#61-é¢˜ç›®-5-è§£æ"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h5>\n<p>1ï¼‰å¯¹äº<code>obj.foo1()</code>å‡½æ•°çš„è°ƒç”¨ï¼Œå®ƒçš„å¤–å±‚ä½œç”¨åŸŸæ˜¯ windowï¼Œå¯¹è±¡ obj å½“ç„¶ä¸å±äºä½œç”¨åŸŸäº†(ä½œç”¨åŸŸåªæœ‰å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸ)ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º<code>window</code><br>\n2ï¼‰<code>obj.foo2()()</code>ï¼Œé¦–å…ˆä¼šæ‰§è¡Œ<code>obj.foo2()</code>ï¼Œè¿™ä¸æ˜¯ä¸ªç®­å¤´å‡½æ•°ï¼Œæ‰€ä»¥å®ƒé‡Œé¢çš„ this æ˜¯è°ƒç”¨å®ƒçš„ obj å¯¹è±¡ï¼Œå› æ­¤ç¬¬äºŒä¸ªæ‰“å°ä¸º<code>obj</code>ï¼Œè€Œè¿”å›çš„åŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œ<strong>å®ƒçš„ this ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®š</strong>ï¼Œé‚£ä¹Ÿå°±æ˜¯å®ƒçš„ this ä¼šå’Œ foo2 å‡½æ•°é‡Œçš„ this ä¸€æ ·ï¼Œç¬¬ä¸‰ä¸ªæ‰“å°ä¹Ÿæ˜¯<code>obj</code></p>\n<h2 id="reference">Reference<a class="anchor" href="#reference"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h2>\n<ul>\n<li>[JavaScript åŸºç¡€å¿ƒæ³•â€”â€”this](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faxuebin%2Farticles%2Fissues%2F6">https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faxuebin%2Farticles%2Fissues%2F6</a> <a href="https://github.com/axuebin/articles/issues/6">https://github.com/axuebin/articles/issues/6</a>)</li>\n<li>[é¢è¯•å®˜é—®ï¼šJS çš„ this æŒ‡å‘](<a href="https://juejin.cn/post/6844903746984476686">https://juejin.cn/post/6844903746984476686</a> <a href="https://juejin.cn/post/6844903746984476686">https://juejin.cn/post/6844903746984476686</a>)</li>\n<li>[JavaScript æ·±å…¥ä¹‹ä» ECMAScript è§„èŒƒè§£è¯» this](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmqyqingfeng%2FBlog%2Fissues%2F7">https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmqyqingfeng%2FBlog%2Fissues%2F7</a> <a href="https://github.com/mqyqingfeng/Blog/issues/7">https://github.com/mqyqingfeng/Blog/issues/7</a>)</li>\n<li>[å‰ç«¯åŸºç¡€è¿›é˜¶ï¼ˆä¸ƒï¼‰ï¼šå…¨æ–¹ä½è§£è¯» this](<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2Fd647aa6d1ae6">https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2Fd647aa6d1ae6</a> <a href="https://www.jianshu.com/p/d647aa6d1ae6">https://www.jianshu.com/p/d647aa6d1ae6</a>)</li>\n<li>[å†æ¥ 40 é“ this é¢è¯•é¢˜é…¸çˆ½ç»§ç»­(1.2w å­—ç”¨æ‰‹æ•´ç†)](<a href="https://juejin.cn/post/6844904083707396109">https://juejin.cn/post/6844904083707396109</a> <a href="https://juejin.cn/post/6844904083707396109">https://juejin.cn/post/6844904083707396109</a>)</li>\n</ul>',frontmatter={draft:!1,aliases:["this in JS "],title:"this in JS ",topic:["Function"],type:"D",tags:["JavaScript"],DateStarted:"2024-02-16T00:00:00.000Z",DateModified:"2024-04-25T00:00:00.000Z",Datereviewed:"2024-02-16T00:00:00.000Z",reviewed:1,difficulty:null,status:null,comment:null,category:"Programming","linter-yaml-title-alias":"this in JS ",minutes:5,words:1075},file="E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/js/scope/this-in-js.md",url=void 0;function rawContent(){return"\n# this in JS \n\n---\nBasic\n## å¯¹ `this` çš„ç†è§£ (ç»‘å®šæ–¹å¼)\nBack:\n\n>`this` æ˜¯ JavaScript ä¸­ä¸€ä¸ªåŠ¨æ€ä¸Šä¸‹æ–‡çš„å…³é”®å­—ï¼Œå®ƒçš„å€¼å–å†³äºå‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚\n\nåœ¨ JavaScript ä¸­ï¼Œ`this` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—ï¼Œ`this` çš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼Œä¸åŒçš„è°ƒç”¨æ–¹å¼ä¼šå¯¼è‡´ `this` æŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³äº `this` çš„ä¸åŒç”¨æ³•å’Œåœºæ™¯ï¼š\n\n#### 1. å…¨å±€ä¸Šä¸‹æ–‡\n å½“åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä½¿ç”¨ `this` æ—¶ï¼Œå®ƒæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ `window`ï¼›åœ¨ Node.js ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ `global`ã€‚\n#### 2. å‡½æ•°è°ƒç”¨ (é»˜è®¤ç»‘å®š)\n å½“åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ `this` ä¸”å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼ˆéå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œ`this` é€šå¸¸æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆä½¿ç”¨ `\"use strict\"`ï¼‰ï¼Œ`this` ä¼šè¢«è®¾ç½®ä¸º `undefined`ã€‚  \nå®šæ—¶å™¨ä¸­çš„ this æŒ‡å‘ window\n#### 3. å¯¹è±¡æ–¹æ³•è°ƒç”¨ (éšå¼ç»‘å®š)\n- å½“åœ¨å¯¹è±¡çš„æ–¹æ³•å†…éƒ¨ä½¿ç”¨ `this` æ—¶ï¼Œ`this` æŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚è¿™ä¹Ÿé€‚ç”¨äºåŸå‹é“¾ä¸­çš„æ–¹æ³•ã€‚\n- äº‹ä»¶ä¸­çš„ this æŒ‡å‘äº‹ä»¶çš„è°ƒç”¨è€… \n#### 4. æ„é€ å‡½æ•°è°ƒç”¨\nå½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨ä½¿ç”¨ `this` ä¸”ä½¿ç”¨ `new` å…³é”®å­—è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œ`this` æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚  \nç±» class ä¸­çš„ this æŒ‡å‘ç”± constructor æ„é€ å™¨ new å‡ºæ¥çš„å®ä¾‹å¯¹è±¡\n#### 5. æ˜¾å¼ç»‘å®š\nä½¿ç”¨ `call`ã€`apply` æˆ– `bind` æ–¹æ³•è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥æ˜¾å¼åœ°å°† `this` ç»‘å®šåˆ°ä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡ã€‚\n#### 6. ç®­å¤´å‡½æ•°\n ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ `this`ï¼Œå®ƒä»åŒ…å›´å®ƒçš„æ™®é€šå‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸç»§æ‰¿ `this`ã€‚è¿™ä½¿å¾—åœ¨äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬è‡ªåŠ¨æ•è·å¤–éƒ¨çš„ `this`ã€‚\n - åœ¨äº‹ä»¶å›è°ƒæˆ–å®šæ—¶å›è°ƒä¸­è°ƒç”¨æŸä¸ªå‡½æ•°æ—¶\n\t - ![image](https://cdn.jsdelivr.net/gh/jenniferwonder/bimg/programming/1fc4c4837ed533b9b66067107fee23b3.png)\n\t - `setTimeout(() =console.log(this.royaltyName), 1000);\n\nğŸ“Œ: JS::JS-Function  \nğŸ·ï¸: JS-Function\n\x3c!--ID: 1708065505751--\x3e\n\n---\n\n#### 2. this é¢˜ç›® 1\n\n```javascript\nuse strict;\nvar a = 10; // varå®šä¹‰çš„aå˜é‡æŒ‚è½½åˆ°windowå¯¹è±¡ä¸Š\nfunction foo() {\n\tconsole.log(this1, this); // undefined\n\tconsole.log(window.a); // 10\n\tconsole.log(this.a); //  æŠ¥é”™ï¼ŒUncaught TypeError: Cannot read properties of undefined (reading 'a')\n}\nconsole.log(this2, this); // window\nfoo();\n```\n\næ³¨æ„ï¼šå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œåªæ˜¯ä½¿å¾—å‡½æ•°å†…çš„ this æŒ‡å‘`undefined`ï¼Œå®ƒå¹¶ä¸ä¼šæ”¹å˜å…¨å±€ä¸­ this çš„æŒ‡å‘ã€‚å› æ­¤`this1`ä¸­æ‰“å°çš„æ˜¯`undefined`ï¼Œè€Œ`this2`è¿˜æ˜¯`window`å¯¹è±¡ã€‚\n\n#### 3. this é¢˜ç›® 2\n\n```javascript\nlet a = 10;\nconst b = 20;\nfunction foo() {\n\tconsole.log(this.a); // undefined\n\tconsole.log(this.b); // undefined\n}\nfoo();\nconsole.log(window.a); // undefined\nå¤åˆ¶ä»£ç ;\n```\n\nå¦‚æœæŠŠ var æ”¹æˆäº† let æˆ– constï¼Œå˜é‡æ˜¯ä¸ä¼šè¢«ç»‘å®šåˆ° window ä¸Šçš„ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šæ‰“å°å‡ºä¸‰ä¸ª undefined\n\n#### 4. this é¢˜ç›® 3\n\n```javascript\nvar a = 1;\nfunction foo() {\n\tvar a = 2;\n\tconsole.log(this); // window\n\tconsole.log(this.a); // 1\n}\nfoo();\n```\n\nfoo()å‡½æ•°å†…çš„ this æŒ‡å‘çš„æ˜¯ windowï¼Œå› ä¸ºæ˜¯ window è°ƒç”¨çš„ fooï¼Œæ‰“å°å‡ºçš„`this.a`æ˜¯ window ä¸‹çš„`a`\n\n#### 5. this é¢˜ç›® 4\n\n```javascript\nvar obj2 = {\n\ta: 2,\n\tfoo1: function () {\n\t\tconsole.log(this.a); // 2\n\t},\n\tfoo2: function () {\n\t\tsetTimeout(function () {\n\t\t\tconsole.log(this); // window\n\t\t\tconsole.log(this.a); // 3\n\t\t}, 0);\n\t},\n};\nvar a = 3;\n\nobj2.foo1();\nobj2.foo2();\n```\n\nå¯¹äº`setTimeout`ä¸­çš„å‡½æ•°ï¼Œè¿™é‡Œå­˜åœ¨éšå¼ç»‘å®šçš„ this ä¸¢å¤±ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶,ä¼šè¢«éšå¼èµ‹å€¼ï¼Œå›è°ƒå‡½æ•°ä¸¢å¤± this ç»‘å®šï¼Œå› æ­¤è¿™æ—¶å€™ setTimeout ä¸­å‡½æ•°å†…çš„ this æ˜¯æŒ‡å‘`window`\n\n#### 6. this é¢˜ç›® 5\n\n```javascript\nvar obj = {\n\tname: obj,\n\tfoo1: () => {\n\t\tconsole.log(this.name); // window\n\t},\n\tfoo2: function () {\n\t\tconsole.log(this.name); // obj\n\t\treturn () => {\n\t\t\tconsole.log(this.name); // obj\n\t\t};\n\t},\n};\nvar name = window;\nobj.foo1();\nobj.foo2()();\n```\n\nè¿™é“é¢˜éå¸¸ç»å…¸ï¼Œå®ƒè¯æ˜äº†**ç®­å¤´å‡½æ•°å†…çš„ this æ˜¯ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šçš„**\n\n##### 6.1. é¢˜ç›® 5 è§£æï¼š\n\n1ï¼‰å¯¹äº`obj.foo1()`å‡½æ•°çš„è°ƒç”¨ï¼Œå®ƒçš„å¤–å±‚ä½œç”¨åŸŸæ˜¯ windowï¼Œå¯¹è±¡ obj å½“ç„¶ä¸å±äºä½œç”¨åŸŸäº†(ä½œç”¨åŸŸåªæœ‰å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸ)ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º`window`  \n2ï¼‰`obj.foo2()()`ï¼Œé¦–å…ˆä¼šæ‰§è¡Œ`obj.foo2()`ï¼Œè¿™ä¸æ˜¯ä¸ªç®­å¤´å‡½æ•°ï¼Œæ‰€ä»¥å®ƒé‡Œé¢çš„ this æ˜¯è°ƒç”¨å®ƒçš„ obj å¯¹è±¡ï¼Œå› æ­¤ç¬¬äºŒä¸ªæ‰“å°ä¸º`obj`ï¼Œè€Œè¿”å›çš„åŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œ**å®ƒçš„ this ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®š**ï¼Œé‚£ä¹Ÿå°±æ˜¯å®ƒçš„ this ä¼šå’Œ foo2 å‡½æ•°é‡Œçš„ this ä¸€æ ·ï¼Œç¬¬ä¸‰ä¸ªæ‰“å°ä¹Ÿæ˜¯`obj`\n\n## Reference\n\n- [JavaScript åŸºç¡€å¿ƒæ³•â€”â€”this](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faxuebin%2Farticles%2Fissues%2F6 https://github.com/axuebin/articles/issues/6)\n- [é¢è¯•å®˜é—®ï¼šJS çš„ this æŒ‡å‘](https://juejin.cn/post/6844903746984476686 https://juejin.cn/post/6844903746984476686)\n- [JavaScript æ·±å…¥ä¹‹ä» ECMAScript è§„èŒƒè§£è¯» this](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmqyqingfeng%2FBlog%2Fissues%2F7 https://github.com/mqyqingfeng/Blog/issues/7)\n- [å‰ç«¯åŸºç¡€è¿›é˜¶ï¼ˆä¸ƒï¼‰ï¼šå…¨æ–¹ä½è§£è¯» this](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2Fd647aa6d1ae6 https://www.jianshu.com/p/d647aa6d1ae6)\n- [å†æ¥ 40 é“ this é¢è¯•é¢˜é…¸çˆ½ç»§ç»­(1.2w å­—ç”¨æ‰‹æ•´ç†)](https://juejin.cn/post/6844904083707396109 https://juejin.cn/post/6844904083707396109)\n"}function compiledContent(){return html}function getHeadings(){return[{depth:1,slug:"this-in-js",text:"this in JS#"},{depth:2,slug:"å¯¹-this-çš„ç†è§£-ç»‘å®šæ–¹å¼",text:"å¯¹ this çš„ç†è§£ (ç»‘å®šæ–¹å¼)#"},{depth:4,slug:"1-å…¨å±€ä¸Šä¸‹æ–‡",text:"1. å…¨å±€ä¸Šä¸‹æ–‡#"},{depth:4,slug:"2-å‡½æ•°è°ƒç”¨-é»˜è®¤ç»‘å®š",text:"2. å‡½æ•°è°ƒç”¨ (é»˜è®¤ç»‘å®š)#"},{depth:4,slug:"3-å¯¹è±¡æ–¹æ³•è°ƒç”¨-éšå¼ç»‘å®š",text:"3. å¯¹è±¡æ–¹æ³•è°ƒç”¨ (éšå¼ç»‘å®š)#"},{depth:4,slug:"4-æ„é€ å‡½æ•°è°ƒç”¨",text:"4. æ„é€ å‡½æ•°è°ƒç”¨#"},{depth:4,slug:"5-æ˜¾å¼ç»‘å®š",text:"5. æ˜¾å¼ç»‘å®š#"},{depth:4,slug:"6-ç®­å¤´å‡½æ•°",text:"6. ç®­å¤´å‡½æ•°#"},{depth:4,slug:"2-this-é¢˜ç›®-1",text:"2. this é¢˜ç›® 1#"},{depth:4,slug:"3-this-é¢˜ç›®-2",text:"3. this é¢˜ç›® 2#"},{depth:4,slug:"4-this-é¢˜ç›®-3",text:"4. this é¢˜ç›® 3#"},{depth:4,slug:"5-this-é¢˜ç›®-4",text:"5. this é¢˜ç›® 4#"},{depth:4,slug:"6-this-é¢˜ç›®-5",text:"6. this é¢˜ç›® 5#"},{depth:5,slug:"61-é¢˜ç›®-5-è§£æ",text:"6.1. é¢˜ç›® 5 è§£æï¼š#"},{depth:2,slug:"reference",text:"Reference#"}]}const Content=createComponent(((s,n,a)=>{const{layout:o,...t}=frontmatter;return t.file=file,t.url=url,renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`}));export{Content,compiledContent,Content as default,file,frontmatter,getHeadings,rawContent,url};