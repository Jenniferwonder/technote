import{createComponent,renderTemplate,maybeRenderHead,unescapeHTML}from"../../../../astro.mjs";import"kleur/colors";import"clsx";import"html-escaper";import"cssesc";const html='<hr>\n<p>Basic</p>\n<h3 id="é—­åŒ…å®šä¹‰">é—­åŒ…å®šä¹‰<a class="anchor" href="#é—­åŒ…å®šä¹‰"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<p>Back:</p>\n<ul>\n<li>å¼•ç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°</li>\n<li>é—­åŒ…ä¸­ä½¿ç”¨ this\nğŸ“Œ: JS::JS-Function\nğŸ·ï¸: JS-Function</li>\n</ul>\n<hr>\n<h3 id="questions">Questions<a class="anchor" href="#questions"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<ul>\n<li>[å‘ç° JavaScript ä¸­é—­åŒ…çš„å¼ºå¤§å¨åŠ›](<a href="https://juejin.cn/post/6844903769646317576">https://juejin.cn/post/6844903769646317576</a> <a href="https://juejin.cn/post/6844903769646317576">https://juejin.cn/post/6844903769646317576</a>)</li>\n<li>[JavaScript é—­åŒ…çš„åº•å±‚è¿è¡Œæœºåˆ¶](<a href="https://link.juejin.cn/?target=http%3A%2F%2Fblog.leapoahead.com%2F2015%2F09%2F15%2Fjs-closure%2F">https://link.juejin.cn/?target=http%3A%2F%2Fblog.leapoahead.com%2F2015%2F09%2F15%2Fjs-closure%2F</a> <a href="http://blog.leapoahead.com/2015/09/15/js-closure/">http://blog.leapoahead.com/2015/09/15/js-closure/</a>)</li>\n<li>[æˆ‘ä»æ¥ä¸ç†è§£ JavaScript é—­åŒ…ï¼Œç›´åˆ°æœ‰äººè¿™æ ·å‘æˆ‘è§£é‡Šå®ƒâ€¦](<a href="https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F56490498">https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F56490498</a> <a href="https://zhuanlan.zhihu.com/p/56490498">https://zhuanlan.zhihu.com/p/56490498</a>)</li>\n<li>[ç ´è§£å‰ç«¯é¢è¯•ï¼ˆ80% åº”è˜è€…ä¸åŠæ ¼ç³»åˆ—ï¼‰ï¼šä»é—­åŒ…è¯´èµ·](<a href="https://juejin.cn/post/6844903474212143117#heading-0">https://juejin.cn/post/6844903474212143117#heading-0</a> <a href="https://juejin.cn/post/6844903474212143117#heading-0">https://juejin.cn/post/6844903474212143117#heading-0</a>)</li>\n</ul>\n<h3 id="closures-é—­åŒ…">Closures é—­åŒ…<a class="anchor" href="#closures-é—­åŒ…"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h3>\n<p>to give a function access to all variables of its parent function, even after that parent function has returned</p>\n<h4 id="1-é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ">1. é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ<a class="anchor" href="#1-é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>ä¸€æ˜¯å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼› å¦ä¸€ä¸ªæ˜¯å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</p>\n<h4 id="2-é—­åŒ…çš„ä½œç”¨">2. é—­åŒ…çš„ä½œç”¨<a class="anchor" href="#2-é—­åŒ…çš„ä½œç”¨"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>å¯ä»¥è®©å±€éƒ¨å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼›<br>\nå¯¹å†…éƒ¨å˜é‡è¿›è¡Œä¿æŠ¤ï¼Œä½¿å¤–éƒ¨è®¿é—®ä¸åˆ°<br>\næœ€å¸¸è§çš„æ¡ˆä¾‹ï¼š<code>å‡½æ•°èŠ‚æµå’Œé˜²æŠ–</code> <a href="Debounce-and-Throttle-%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81">Debounce and Throttle-é˜²æŠ–èŠ‚æµ</a></p>\n<h4 id="3-é—­åŒ…çš„åƒåœ¾å›æ”¶">3. é—­åŒ…çš„åƒåœ¾å›æ”¶<a class="anchor" href="#3-é—­åŒ…çš„åƒåœ¾å›æ”¶"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<p>å‰¯ä½œç”¨ï¼šä¸åˆç†çš„ä½¿ç”¨é—­åŒ…ï¼Œä¼šé€ æˆå†…å­˜æ³„éœ² (å°±æ˜¯è¯¥å†…å­˜ç©ºé—´ä½¿ç”¨å®Œæ¯•ä¹‹åæœªè¢«å›æ”¶)<br>\né—­åŒ…ä¸­å¼•ç”¨çš„å˜é‡ç›´åˆ°é—­åŒ…è¢«é”€æ¯æ—¶æ‰ä¼šè¢«åƒåœ¾å›æ”¶</p>\n<h4 id="4-é—­åŒ…çš„ç¤ºä¾‹">4. é—­åŒ…çš„ç¤ºä¾‹<a class="anchor" href="#4-é—­åŒ…çš„ç¤ºä¾‹"><span class="anchor-icon" data-pagefind-ignore="">#</span></a></h4>\n<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A737D">// åŸå§‹é¢˜ç›®</span></span>\n<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#B392F0">\tsetTimeout</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(i); </span><span style="color:#6A737D">// 1såæ‰“å°å‡º5ä¸ª5</span></span>\n<span class="line"><span style="color:#E1E4E8">\t}, </span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">// â¬…ï¸åˆ©ç”¨é—­åŒ…ï¼Œå°†ä¸Šè¿°é¢˜ç›®æ”¹æˆ1såï¼Œæ‰“å°0,1,2,3,4</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">// æ–¹æ³•ä¸€ï¼š</span></span>\n<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t(</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">j</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#B392F0">\t\tsetTimeout</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">function</span><span style="color:#B392F0"> timer</span><span style="color:#E1E4E8">() {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(j);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t}, </span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t})(i);</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">// æ–¹æ³•äºŒï¼š</span></span>\n<span class="line"><span style="color:#6A737D">// åˆ©ç”¨setTimeoutçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°†ä½œä¸ºsetTimeoutç¬¬ä¸€ä¸ªå‚æ•°çš„å‚æ•°</span></span>\n<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#B392F0">\tsetTimeout</span><span style="color:#E1E4E8">(</span></span>\n<span class="line"><span style="color:#F97583">\t\tfunction</span><span style="color:#B392F0"> fn</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">i</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(i);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t},</span></span>\n<span class="line"><span style="color:#79B8FF">\t\t1000</span><span style="color:#E1E4E8">,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\ti</span></span>\n<span class="line"><span style="color:#E1E4E8">\t); </span><span style="color:#6A737D">// ç¬¬ä¸‰ä¸ªå‚æ•°i,å°†ä½œä¸ºfnçš„å‚æ•°</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D">// â¬…ï¸å°†ä¸Šè¿°é¢˜ç›®æ”¹æˆæ¯é—´éš”1såï¼Œä¾æ¬¡æ‰“å°0,1,2,3,4</span></span>\n<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#B392F0">\tsetTimeout</span><span style="color:#E1E4E8">(</span></span>\n<span class="line"><span style="color:#F97583">\t\tfunction</span><span style="color:#B392F0"> fn</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">i</span><span style="color:#E1E4E8">) {</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t\tconsole.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(i);</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\t},</span></span>\n<span class="line"><span style="color:#79B8FF">\t\t1000</span><span style="color:#F97583"> *</span><span style="color:#E1E4E8"> i,</span></span>\n<span class="line"><span style="color:#E1E4E8">\t\ti</span></span>\n<span class="line"><span style="color:#E1E4E8">\t);</span></span>\n<span class="line"><span style="color:#E1E4E8">}</span></span>\n<span class="line"></span></code></pre>',frontmatter={title:"Closure (é—­åŒ…)",topic:["Function"],type:"D",tags:["JavaScript"],DateStarted:"2024-02-16T00:00:00.000Z",DateModified:"2024-04-18T00:00:00.000Z",Datereviewed:"2024-02-16T00:00:00.000Z",reviewed:1,difficulty:null,status:null,comment:null,category:"Programming",minutes:2,words:459},file="E:/SynologyDrive/Codespace/blog-site/mynote/my-fuwari-blog/src/content/posts/js/function/closure-é—­åŒ….md",url=void 0;function rawContent(){return"\n---\n\nBasic\n\n### é—­åŒ…å®šä¹‰\n\nBack:\n\n- å¼•ç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°\n- é—­åŒ…ä¸­ä½¿ç”¨ this\n  ğŸ“Œ: JS::JS-Function\n  ğŸ·ï¸: JS-Function\n\n---\n\n### Questions\n\n- [å‘ç° JavaScript ä¸­é—­åŒ…çš„å¼ºå¤§å¨åŠ›](https://juejin.cn/post/6844903769646317576 https://juejin.cn/post/6844903769646317576)\n- [JavaScript é—­åŒ…çš„åº•å±‚è¿è¡Œæœºåˆ¶](https://link.juejin.cn/?target=http%3A%2F%2Fblog.leapoahead.com%2F2015%2F09%2F15%2Fjs-closure%2F http://blog.leapoahead.com/2015/09/15/js-closure/)\n- [æˆ‘ä»æ¥ä¸ç†è§£ JavaScript é—­åŒ…ï¼Œç›´åˆ°æœ‰äººè¿™æ ·å‘æˆ‘è§£é‡Šå®ƒ...](https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F56490498 https://zhuanlan.zhihu.com/p/56490498)\n- [ç ´è§£å‰ç«¯é¢è¯•ï¼ˆ80% åº”è˜è€…ä¸åŠæ ¼ç³»åˆ—ï¼‰ï¼šä»é—­åŒ…è¯´èµ·](https://juejin.cn/post/6844903474212143117#heading-0 https://juejin.cn/post/6844903474212143117#heading-0)\n\n### Closures é—­åŒ…\n\nto give a function access to all variables of its parent function, even after that parent function has returned\n\n#### 1. é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ\n\nä¸€æ˜¯å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼› å¦ä¸€ä¸ªæ˜¯å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’\n\n#### 2. é—­åŒ…çš„ä½œç”¨\n\nå¯ä»¥è®©å±€éƒ¨å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼›  \nå¯¹å†…éƒ¨å˜é‡è¿›è¡Œä¿æŠ¤ï¼Œä½¿å¤–éƒ¨è®¿é—®ä¸åˆ°  \næœ€å¸¸è§çš„æ¡ˆä¾‹ï¼š`å‡½æ•°èŠ‚æµå’Œé˜²æŠ–` [Debounce and Throttle-é˜²æŠ–èŠ‚æµ](Debounce-and-Throttle-é˜²æŠ–èŠ‚æµ)\n\n#### 3. é—­åŒ…çš„åƒåœ¾å›æ”¶\n\nå‰¯ä½œç”¨ï¼šä¸åˆç†çš„ä½¿ç”¨é—­åŒ…ï¼Œä¼šé€ æˆå†…å­˜æ³„éœ² (å°±æ˜¯è¯¥å†…å­˜ç©ºé—´ä½¿ç”¨å®Œæ¯•ä¹‹åæœªè¢«å›æ”¶)  \né—­åŒ…ä¸­å¼•ç”¨çš„å˜é‡ç›´åˆ°é—­åŒ…è¢«é”€æ¯æ—¶æ‰ä¼šè¢«åƒåœ¾å›æ”¶\n\n#### 4. é—­åŒ…çš„ç¤ºä¾‹\n\n```javascript\n// åŸå§‹é¢˜ç›®\nfor (var i = 0; i < 5; i++) {\n\tsetTimeout(function () {\n\t\tconsole.log(i); // 1såæ‰“å°å‡º5ä¸ª5\n\t}, 1000);\n}\n\n// â¬…ï¸åˆ©ç”¨é—­åŒ…ï¼Œå°†ä¸Šè¿°é¢˜ç›®æ”¹æˆ1såï¼Œæ‰“å°0,1,2,3,4\n\n// æ–¹æ³•ä¸€ï¼š\nfor (var i = 0; i < 5; i++) {\n\t(function (j) {\n\t\tsetTimeout(function timer() {\n\t\t\tconsole.log(j);\n\t\t}, 1000);\n\t})(i);\n}\n\n// æ–¹æ³•äºŒï¼š\n// åˆ©ç”¨setTimeoutçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°†ä½œä¸ºsetTimeoutç¬¬ä¸€ä¸ªå‚æ•°çš„å‚æ•°\nfor (var i = 0; i < 5; i++) {\n\tsetTimeout(\n\t\tfunction fn(i) {\n\t\t\tconsole.log(i);\n\t\t},\n\t\t1000,\n\t\ti\n\t); // ç¬¬ä¸‰ä¸ªå‚æ•°i,å°†ä½œä¸ºfnçš„å‚æ•°\n}\n\n// â¬…ï¸å°†ä¸Šè¿°é¢˜ç›®æ”¹æˆæ¯é—´éš”1såï¼Œä¾æ¬¡æ‰“å°0,1,2,3,4\nfor (var i = 0; i < 5; i++) {\n\tsetTimeout(\n\t\tfunction fn(i) {\n\t\t\tconsole.log(i);\n\t\t},\n\t\t1000 * i,\n\t\ti\n\t);\n}\n```\n"}function compiledContent(){return html}function getHeadings(){return[{depth:3,slug:"é—­åŒ…å®šä¹‰",text:"é—­åŒ…å®šä¹‰#"},{depth:3,slug:"questions",text:"Questions#"},{depth:3,slug:"closures-é—­åŒ…",text:"Closures é—­åŒ…#"},{depth:4,slug:"1-é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ",text:"1. é—­åŒ…å¸¸è§çš„ä¸¤ç§æƒ…å†µ#"},{depth:4,slug:"2-é—­åŒ…çš„ä½œç”¨",text:"2. é—­åŒ…çš„ä½œç”¨#"},{depth:4,slug:"3-é—­åŒ…çš„åƒåœ¾å›æ”¶",text:"3. é—­åŒ…çš„åƒåœ¾å›æ”¶#"},{depth:4,slug:"4-é—­åŒ…çš„ç¤ºä¾‹",text:"4. é—­åŒ…çš„ç¤ºä¾‹#"}]}const Content=createComponent(((n,s,a)=>{const{layout:t,...o}=frontmatter;return o.file=file,o.url=url,renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`}));export{Content,compiledContent,Content as default,file,frontmatter,getHeadings,rawContent,url};